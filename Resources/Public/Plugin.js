/*! For license information please see Plugin.js.LICENSE.txt */
!function(e){var t={};function __webpack_require__(n){if(t[n])return t[n].exports;var r=t[n]={i:n,l:!1,exports:{}};return e[n].call(r.exports,r,r.exports,__webpack_require__),r.l=!0,r.exports}__webpack_require__.m=e,__webpack_require__.c=t,__webpack_require__.d=function(e,t,n){__webpack_require__.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},__webpack_require__.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},__webpack_require__.t=function(e,t){if(1&t&&(e=__webpack_require__(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(__webpack_require__.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)__webpack_require__.d(n,r,function(t){return e[t]}.bind(null,r));return n},__webpack_require__.n=function(e){var t=e&&e.__esModule?function getDefault(){return e.default}:function getModuleExports(){return e};return __webpack_require__.d(t,"a",t),t},__webpack_require__.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},__webpack_require__.p="",__webpack_require__(__webpack_require__.s=22)}([function(e,t,n){"use strict";var r=function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}(n(3));e.exports=(0,r.default)("vendor")().React},function(e,t,n){"use strict";var r=function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}(n(3));e.exports=(0,r.default)("vendor")().PropTypes},function(e,t,n){"use strict";var r=function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}(n(3));e.exports=(0,r.default)("NeosProjectPackages")().NeosUiReduxStore},function(e,t,n){"use strict";var __read=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,s=n.call(e),f=[];try{for(;(void 0===t||t-- >0)&&!(r=s.next()).done;)f.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=s.return)&&n.call(s)}finally{if(o)throw o.error}}return f},__spreadArray=function(e,t,n){if(n||2===arguments.length)for(var r,o=0,s=t.length;o<s;o++)!r&&o in t||(r||(r=Array.prototype.slice.call(t,0,o)),r[o]=t[o]);return e.concat(r||Array.prototype.slice.call(t))};t.__esModule=!0,t.default=function readFromConsumerApi(e){return function(){for(var t,n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];if(window["@Neos:HostPluginAPI"]&&window["@Neos:HostPluginAPI"]["@".concat(e)])return(t=window["@Neos:HostPluginAPI"])["@".concat(e)].apply(t,__spreadArray([],__read(n),!1));throw new Error("You are trying to read from a consumer api that hasn't been initialized yet!")}}},function(e,t,n){e.exports={commandListItem:"CommandListItem-module__commandListItem___2u7xD",highlighted:"CommandListItem-module__highlighted___1LR6R",disabled:"CommandListItem-module__disabled___7wCym",label:"CommandListItem-module__label___1bznO",description:"CommandListItem-module__description___2RTG3",type:"CommandListItem-module__type___1C7PR",favouriteButton:"CommandListItem-module__favouriteButton___3n3yV",isFavourite:"CommandListItem-module__isFavourite___KSM9p"}},function(e,t,n){"use strict";n.r(t),n.d(t,"actionTypes",(function(){return o})),n.d(t,"actions",(function(){return s})),n.d(t,"reducer",(function(){return f})),n.d(t,"selectors",(function(){return E}));var r=n(13);const o={TOGGLE_COMMAND_BAR:"TOGGLE_COMMAND_BAR"},s={toggleCommandBar:Object(r.createAction)(o.TOGGLE_COMMAND_BAR)},f=Object(r.handleActions)({TOGGLE_COMMAND_BAR:(e,t)=>{var n,r,o;return{...e,plugins:{...e.plugins,commandBar:{open:void 0!==(null===(n=t.payload)||void 0===n?void 0:n.open)?t.payload.open:!(null===(o=null===(r=e.plugins)||void 0===r?void 0:r.commandBar)||void 0===o?void 0:o.open)}}}}},{plugins:{commandBar:{open:!1}}}),E={commandBarOpen:e=>{var t,n;return null===(n=null===(t=e.plugins)||void 0===t?void 0:t.commandBar)||void 0===n?void 0:n.open},previewUrl:e=>{var t,n;return null===(n=null===(t=e.ui)||void 0===t?void 0:t.contentCanvas)||void 0===n?void 0:n.previewUrl}}},function(e,t,n){e.exports={commandBarFooter:"CommandBarFooter-module__commandBarFooter___2mcre",breadcrumb:"CommandBarFooter-module__breadcrumb___1Ul24",activity:"CommandBarFooter-module__activity___2GXJU",spinner:"CommandBarFooter-module__spinner___1mRmX"}},function(e,t,n){e.exports={searchBox:"SearchBox-module__searchBox___1SEtn",expandButton:"SearchBox-module__expandButton___B2jYv",executeButton:"SearchBox-module__executeButton___3hg_l",commandQueryDirty:"SearchBox-module__commandQueryDirty___s_CVX"}},function(e,t,n){e.exports={commandBar:"CommandBarDialog-module__commandBar___1Hb5s",hasResults:"CommandBarDialog-module__hasResults___3iM8B",resultsWrap:"CommandBarDialog-module__resultsWrap___2gd3U",expanded:"CommandBarDialog-module__expanded___jby7g"}},function(e,t,n){e.exports={results:"CommandListing-module__results___23Rve",noResults:"CommandListing-module__noResults___Mb89V",disabled:"CommandListing-module__disabled___6gpPj"}},function(e,t,n){e.exports={commandResultsView:"CommandResultsView-module__commandResultsView___xLqwb",message:"CommandResultsView-module__message___NhUkR",results:"CommandResultsView-module__results___1t6jB",noResults:"CommandResultsView-module__noResults___2ksIF",disabled:"CommandResultsView-module__disabled___OmNvX"}},function(e,t,n){e.exports={toggleButton:"ToggleButton-module__toggleButton___2wPs-",toggleButtonActive:"ToggleButton-module__toggleButtonActive___3bWD5",buttonIcon:"ToggleButton-module__buttonIcon___UjFjw"}},function(e,t,n){e.exports={fullScreenLayer:"CommandBarUiPlugin-module__fullScreenLayer___1cUx4",open:"CommandBarUiPlugin-module__open___1Bjxj",commandBarToolbarComponent:"CommandBarUiPlugin-module__commandBarToolbarComponent___1agRY"}},function(e,t,n){"use strict";var r=function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}(n(3));e.exports=(0,r.default)("vendor")().reduxActions},function(e,t,n){"use strict";var r=function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}(n(3));e.exports=(0,r.default)("vendor")().reactRedux},function(e,t,n){e.exports={commandBarHeader:"CommandBarHeader-module__commandBarHeader___3Y2hR",backButton:"CommandBarHeader-module__backButton___1qIGu"}},function(e,t,n){"use strict";var r,o=(r=function extendStatics(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function __(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(__.prototype=t.prototype,new __)}),__importDefault=function(e){return e&&e.__esModule?e:{default:e}};t.__esModule=!0;var s=__importDefault(n(28)),f=__importDefault(n(29)),E=function(e){function SynchronousRegistry(t){var n=e.call(this,t)||this;return n._registry=[],n}return o(SynchronousRegistry,e),SynchronousRegistry.prototype.set=function(e,t,n){if(void 0===n&&(n=0),"string"!=typeof e)throw new Error("Key must be a string");if("string"!=typeof n&&"number"!=typeof n)throw new Error("Position must be a string or a number");var r={key:e,value:t};n&&(r.position=n);var o=this._registry.findIndex((function(t){return t.key===e}));return-1===o?this._registry.push(r):this._registry[o]=r,t},SynchronousRegistry.prototype.get=function(e){if("string"!=typeof e)return console.error("Key must be a string"),null;var t=this._registry.find((function(t){return t.key===e}));return t?t.value:null},SynchronousRegistry.prototype._getChildrenWrapped=function(e){var t=this._registry.filter((function(t){return 0===t.key.indexOf(e+"/")}));return(0,f.default)(t)},SynchronousRegistry.prototype.getChildrenAsObject=function(e){var t={};return this._getChildrenWrapped(e).forEach((function(e){t[e.key]=e.value})),t},SynchronousRegistry.prototype.getChildren=function(e){return this._getChildrenWrapped(e).map((function(e){return e.value}))},SynchronousRegistry.prototype.has=function(e){return"string"!=typeof e?(console.error("Key must be a string"),!1):Boolean(this._registry.find((function(t){return t.key===e})))},SynchronousRegistry.prototype._getAllWrapped=function(){return(0,f.default)(this._registry)},SynchronousRegistry.prototype.getAllAsObject=function(){var e={};return this._getAllWrapped().forEach((function(t){e[t.key]=t.value})),e},SynchronousRegistry.prototype.getAllAsList=function(){return this._getAllWrapped().map((function(e){return Object.assign({id:e.key},e.value)}))},SynchronousRegistry}(s.default);t.default=E},function(e,t,n){"use strict";var r=function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}(n(3));e.exports=(0,r.default)("NeosProjectPackages")().NeosUiDecorators},function(e,t,n){"use strict";var r=function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}(n(3));e.exports=(0,r.default)("NeosProjectPackages")().ReactUiComponents},function(e,t,n){e.exports={iconWrap:"IconWrapper-module__iconWrap___1Z3nD"}},function(e,t,n){e.exports={madeWithLove:"Branding-module__madeWithLove___2ibna"}},function(e,t,n){e.exports={commandBarTheme:"Theme-module__commandBarTheme___1Z1-S"}},function(e,t,n){"use strict";n(23)},function(e,t,n){"use strict";var r=n(24),o=_interopRequireDefault(r),s=n(5),f=_interopRequireDefault(n(32));function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}(0,o.default)("Shel.Neos.CommandBar:CommandBar",{},(function(e,t){t.frontendConfiguration["Shel.Neos.CommandBar:CommandBar"].enabled&&(e.set("Shel.Neos.CommandBar",new r.SynchronousRegistry("\n        # Shel.Neos.CommandBar 3rd party commands\n    ")),e.get("containers").set("PrimaryToolbar/Middle/CommandBar",f.default),e.get("reducers").set("Shel.Neos.CommandBar",{reducer:s.reducer}))}))},function(e,t,n){"use strict";var __importDefault=function(e){return e&&e.__esModule?e:{default:e}};t.__esModule=!0,t.SynchronousMetaRegistry=t.SynchronousRegistry=t.readFromConsumerApi=t.createConsumerApi=void 0;var r=__importDefault(n(25));t.createConsumerApi=r.default;var o=__importDefault(n(3));t.readFromConsumerApi=o.default;var s=n(27);t.SynchronousRegistry=s.SynchronousRegistry,t.SynchronousMetaRegistry=s.SynchronousMetaRegistry,t.default=(0,o.default)("manifest")},function(e,t,n){"use strict";var __importDefault=function(e){return e&&e.__esModule?e:{default:e}};t.__esModule=!0;var r=__importDefault(n(26)),o=function createReadOnlyValue(e){return{value:e,writable:!1,enumerable:!1,configurable:!0}};t.default=function createConsumerApi(e,t){var n={};Object.keys(t).forEach((function(e){Object.defineProperty(n,e,o(t[e]))})),Object.defineProperty(n,"@manifest",o((0,r.default)(e))),Object.defineProperty(window,"@Neos:HostPluginAPI",o(n))}},function(e,t,n){"use strict";t.__esModule=!0,t.default=function(e){return function(t,n,r){var o;e.push(((o={})[t]={options:n,bootstrap:r},o))}}},function(e,t,n){"use strict";var __importDefault=function(e){return e&&e.__esModule?e:{default:e}};t.__esModule=!0,t.SynchronousMetaRegistry=t.SynchronousRegistry=void 0;var r=__importDefault(n(16));t.SynchronousRegistry=r.default;var o=__importDefault(n(31));t.SynchronousMetaRegistry=o.default},function(e,t,n){"use strict";t.__esModule=!0;var r=function r(e){this.SERIAL_VERSION_UID="d8a5aa78-978e-11e6-ae22-56b6b6499611",this.description=e};t.default=r},function(e,t,n){"use strict";t.__esModule=!0;var r=n(30);t.default=function positionalArraySorter(e,t,n){var o,s,f,E,C,R,I,S,O,T,A,P,D,N;void 0===t&&(t="position"),void 0===n&&(n="key");var M="string"==typeof t?function(e){return e[t]}:t,U={},L={},x={},H={},k={},B={};e.forEach((function(e,t){var r=e[n]?e[n]:String(t);U[r]=t;var o=M(e),s=String(o||t),f=!1;if(s.startsWith("start")){var E=(C=s.match(/start\s+(\d+)/))&&C[1]?Number(C[1]):0;x[E]||(x[E]=[]),x[E].push(r)}else if(s.startsWith("end")){var C;E=(C=s.match(/end\s+(\d+)/))&&C[1]?Number(C[1]):0;H[E]||(H[E]=[]),H[E].push(r)}else if(s.startsWith("before")){if(I=s.match(/before\s+(\S+)(\s+(\d+))?/)){var R=I[1];E=I[3]?Number(I[3]):0;k[R]||(k[R]={}),k[R][E]||(k[R][E]=[]),k[R][E].push(r)}else f=!0}else if(s.startsWith("after")){var I;if(I=s.match(/after\s+(\S+)(\s+(\d+))?/)){R=I[1],E=I[3]?Number(I[3]):0;B[R]||(B[R]={}),B[R][E]||(B[R][E]=[]),B[R][E].push(r)}else f=!0}else f=!0;if(f){var S=parseFloat(s);!isNaN(S)&&isFinite(S)||(S=t),L[S]||(L[S]=[]),L[S].push(r)}}));var G=[],F=[],V=[],W=[],q=function sortedWeights(e,t){var n=Object.keys(e).map((function(e){return Number(e)})).sort((function(e,t){return e-t}));return t?n:n.reverse()},X=function addToResults(e,t){e.forEach((function(e){var n,o,s,f;if(!(W.indexOf(e)>=0)){if(W.push(e),k[e]){var E=q(k[e],!0);try{for(var C=r.__values(E),R=C.next();!R.done;R=C.next()){var I=R.value;addToResults(k[e][I],t)}}catch(e){n={error:e}}finally{try{R&&!R.done&&(o=C.return)&&o.call(C)}finally{if(n)throw n.error}}}if(t.push(e),B[e]){var S=q(B[e],!1);try{for(var O=r.__values(S),T=O.next();!T.done;T=O.next()){I=T.value;addToResults(B[e][I],t)}}catch(e){s={error:e}}finally{try{T&&!T.done&&(f=O.return)&&f.call(O)}finally{if(s)throw s.error}}}}}))};try{for(var Q=r.__values(q(x,!1)),z=Q.next();!z.done;z=Q.next()){var Y=z.value;X(x[Y],G)}}catch(e){o={error:e}}finally{try{z&&!z.done&&(s=Q.return)&&s.call(Q)}finally{if(o)throw o.error}}try{for(var $=r.__values(q(L,!0)),K=$.next();!K.done;K=$.next()){Y=K.value;X(L[Y],F)}}catch(e){f={error:e}}finally{try{K&&!K.done&&(E=$.return)&&E.call($)}finally{if(f)throw f.error}}try{for(var Z=r.__values(q(H,!0)),J=Z.next();!J.done;J=Z.next()){Y=J.value;X(H[Y],V)}}catch(e){C={error:e}}finally{try{J&&!J.done&&(R=Z.return)&&R.call(Z)}finally{if(C)throw C.error}}try{for(var ee=r.__values(Object.keys(k)),te=ee.next();!te.done;te=ee.next()){var ne=te.value;if(!(W.indexOf(ne)>=0))try{for(var ae=(O=void 0,r.__values(q(k[ne],!1))),re=ae.next();!re.done;re=ae.next()){Y=re.value;X(k[ne][Y],G)}}catch(e){O={error:e}}finally{try{re&&!re.done&&(T=ae.return)&&T.call(ae)}finally{if(O)throw O.error}}}}catch(e){I={error:e}}finally{try{te&&!te.done&&(S=ee.return)&&S.call(ee)}finally{if(I)throw I.error}}try{for(var oe=r.__values(Object.keys(B)),se=oe.next();!se.done;se=oe.next()){ne=se.value;if(!(W.indexOf(ne)>=0))try{for(var ie=(D=void 0,r.__values(q(B[ne],!1))),ce=ie.next();!ce.done;ce=ie.next()){Y=ce.value;X(B[ne][Y],F)}}catch(e){D={error:e}}finally{try{ce&&!ce.done&&(N=ie.return)&&N.call(ie)}finally{if(D)throw D.error}}}}catch(e){A={error:e}}finally{try{se&&!se.done&&(P=oe.return)&&P.call(oe)}finally{if(A)throw A.error}}return r.__spread(G,F,V).map((function(e){return U[e]})).map((function(t){return e[t]}))}},function(e,t,n){"use strict";n.r(t),n.d(t,"__extends",(function(){return __extends})),n.d(t,"__assign",(function(){return __assign})),n.d(t,"__rest",(function(){return __rest})),n.d(t,"__decorate",(function(){return __decorate})),n.d(t,"__param",(function(){return __param})),n.d(t,"__metadata",(function(){return __metadata})),n.d(t,"__awaiter",(function(){return __awaiter})),n.d(t,"__generator",(function(){return __generator})),n.d(t,"__createBinding",(function(){return __createBinding})),n.d(t,"__exportStar",(function(){return __exportStar})),n.d(t,"__values",(function(){return __values})),n.d(t,"__read",(function(){return __read})),n.d(t,"__spread",(function(){return __spread})),n.d(t,"__spreadArrays",(function(){return __spreadArrays})),n.d(t,"__await",(function(){return __await})),n.d(t,"__asyncGenerator",(function(){return __asyncGenerator})),n.d(t,"__asyncDelegator",(function(){return __asyncDelegator})),n.d(t,"__asyncValues",(function(){return __asyncValues})),n.d(t,"__makeTemplateObject",(function(){return __makeTemplateObject})),n.d(t,"__importStar",(function(){return __importStar})),n.d(t,"__importDefault",(function(){return __importDefault})),n.d(t,"__classPrivateFieldGet",(function(){return __classPrivateFieldGet})),n.d(t,"__classPrivateFieldSet",(function(){return __classPrivateFieldSet}));var extendStatics=function(e,t){return(extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)};function __extends(e,t){function __(){this.constructor=e}extendStatics(e,t),e.prototype=null===t?Object.create(t):(__.prototype=t.prototype,new __)}var __assign=function(){return(__assign=Object.assign||function __assign(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};function __rest(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n}function __decorate(e,t,n,r){var o,s=arguments.length,f=s<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)f=Reflect.decorate(e,t,n,r);else for(var E=e.length-1;E>=0;E--)(o=e[E])&&(f=(s<3?o(f):s>3?o(t,n,f):o(t,n))||f);return s>3&&f&&Object.defineProperty(t,n,f),f}function __param(e,t){return function(n,r){t(n,r,e)}}function __metadata(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)}function __awaiter(e,t,n,r){return new(n||(n=Promise))((function(o,s){function fulfilled(e){try{step(r.next(e))}catch(e){s(e)}}function rejected(e){try{step(r.throw(e))}catch(e){s(e)}}function step(e){e.done?o(e.value):function adopt(e){return e instanceof n?e:new n((function(t){t(e)}))}(e.value).then(fulfilled,rejected)}step((r=r.apply(e,t||[])).next())}))}function __generator(e,t){var n,r,o,s,f={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return s={next:verb(0),throw:verb(1),return:verb(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function verb(s){return function(E){return function step(s){if(n)throw new TypeError("Generator is already executing.");for(;f;)try{if(n=1,r&&(o=2&s[0]?r.return:s[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,s[1])).done)return o;switch(r=0,o&&(s=[2&s[0],o.value]),s[0]){case 0:case 1:o=s;break;case 4:return f.label++,{value:s[1],done:!1};case 5:f.label++,r=s[1],s=[0];continue;case 7:s=f.ops.pop(),f.trys.pop();continue;default:if(!(o=f.trys,(o=o.length>0&&o[o.length-1])||6!==s[0]&&2!==s[0])){f=0;continue}if(3===s[0]&&(!o||s[1]>o[0]&&s[1]<o[3])){f.label=s[1];break}if(6===s[0]&&f.label<o[1]){f.label=o[1],o=s;break}if(o&&f.label<o[2]){f.label=o[2],f.ops.push(s);break}o[2]&&f.ops.pop(),f.trys.pop();continue}s=t.call(e,f)}catch(e){s=[6,e],r=0}finally{n=o=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,E])}}}function __createBinding(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}function __exportStar(e,t){for(var n in e)"default"===n||t.hasOwnProperty(n)||(t[n]=e[n])}function __values(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function __read(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,s=n.call(e),f=[];try{for(;(void 0===t||t-- >0)&&!(r=s.next()).done;)f.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=s.return)&&n.call(s)}finally{if(o)throw o.error}}return f}function __spread(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(__read(arguments[t]));return e}function __spreadArrays(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var r=Array(e),o=0;for(t=0;t<n;t++)for(var s=arguments[t],f=0,E=s.length;f<E;f++,o++)r[o]=s[f];return r}function __await(e){return this instanceof __await?(this.v=e,this):new __await(e)}function __asyncGenerator(e,t,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r,o=n.apply(e,t||[]),s=[];return r={},verb("next"),verb("throw"),verb("return"),r[Symbol.asyncIterator]=function(){return this},r;function verb(e){o[e]&&(r[e]=function(t){return new Promise((function(n,r){s.push([e,t,n,r])>1||resume(e,t)}))})}function resume(e,t){try{!function step(e){e.value instanceof __await?Promise.resolve(e.value.v).then(fulfill,reject):settle(s[0][2],e)}(o[e](t))}catch(e){settle(s[0][3],e)}}function fulfill(e){resume("next",e)}function reject(e){resume("throw",e)}function settle(e,t){e(t),s.shift(),s.length&&resume(s[0][0],s[0][1])}}function __asyncDelegator(e){var t,n;return t={},verb("next"),verb("throw",(function(e){throw e})),verb("return"),t[Symbol.iterator]=function(){return this},t;function verb(r,o){t[r]=e[r]?function(t){return(n=!n)?{value:__await(e[r](t)),done:"return"===r}:o?o(t):t}:o}}function __asyncValues(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t,n=e[Symbol.asyncIterator];return n?n.call(e):(e=__values(e),t={},verb("next"),verb("throw"),verb("return"),t[Symbol.asyncIterator]=function(){return this},t);function verb(n){t[n]=e[n]&&function(t){return new Promise((function(r,o){(function settle(e,t,n,r){Promise.resolve(r).then((function(t){e({value:t,done:n})}),t)})(r,o,(t=e[n](t)).done,t.value)}))}}}function __makeTemplateObject(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e}function __importStar(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function __importDefault(e){return e&&e.__esModule?e:{default:e}}function __classPrivateFieldGet(e,t){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return t.get(e)}function __classPrivateFieldSet(e,t,n){if(!t.has(e))throw new TypeError("attempted to set private field on non-instance");return t.set(e,n),n}},function(e,t,n){"use strict";var r,o=(r=function extendStatics(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function __(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(__.prototype=t.prototype,new __)}),__importDefault=function(e){return e&&e.__esModule?e:{default:e}};t.__esModule=!0;var s=function(e){function SynchronousMetaRegistry(){return null!==e&&e.apply(this,arguments)||this}return o(SynchronousMetaRegistry,e),SynchronousMetaRegistry.prototype.set=function(t,n){if("d8a5aa78-978e-11e6-ae22-56b6b6499611"!==n.SERIAL_VERSION_UID)throw new Error("You can only add registries to a meta registry");return e.prototype.set.call(this,t,n)},SynchronousMetaRegistry}(__importDefault(n(16)).default);t.default=s},function(e,t,n){"use strict";n.r(t);var r={};n.r(r),n.d(r,"getPreferences",(function(){return getPreferences})),n.d(r,"setFavouriteCommands",(function(){return setFavouriteCommands})),n.d(r,"addRecentCommand",(function(){return addRecentCommand})),n.d(r,"addRecentDocument",(function(){return addRecentDocument}));var o={};n.r(o),n.d(o,"getCommands",(function(){return getCommands}));var s={};n.r(s),n.d(s,"searchNeosDocs",(function(){return searchNeosDocs}));var f={};n.r(f),n.d(f,"searchNeosPackages",(function(){return searchNeosPackages}));var E={};n.r(E),n.d(E,"searchNodes",(function(){return searchNodes}));var C=n(0),R=n.n(C),I=n(14),S=n(1),O=n.n(S),T=n(17),A=n(2),P=n(18);function useFunctionRef(e){const t=Object(C.useRef)(e);return t.current=e,t}function i(){throw new Error("Cycle detected")}function signals_core_module_t(){if(M>1)M--;else{for(var e,t=!1;void 0!==N;){var n=N;for(N=void 0,U++;void 0!==n;){var r=n.o;if(n.o=void 0,n.f&=-3,!(8&n.f)&&d(n))try{n.c()}catch(n){t||(e=n,t=!0)}n=r}}if(U=0,M--,t)throw e}}function h(e){if(M>0)return e();M++;try{return e()}finally{signals_core_module_t()}}var D=void 0,N=void 0,M=0,U=0,L=0;function v(e){if(void 0!==D){var t=e.n;if(void 0===t||t.t!==D)return t={i:0,S:e,p:D.s,n:void 0,t:D,e:void 0,x:void 0,r:t},void 0!==D.s&&(D.s.n=t),D.s=t,e.n=t,32&D.f&&e.S(t),t;if(-1===t.i)return t.i=0,void 0!==t.n&&(t.n.p=t.p,void 0!==t.p&&(t.p.n=t.n),t.p=D.s,t.n=void 0,D.s.n=t,D.s=t),t}}function signals_core_module_e(e){this.v=e,this.i=0,this.n=void 0,this.t=void 0}function u(e){return new signals_core_module_e(e)}function d(e){for(var t=e.s;void 0!==t;t=t.n)if(t.S.i!==t.i||!t.S.h()||t.S.i!==t.i)return!0;return!1}function c(e){for(var t=e.s;void 0!==t;t=t.n){var n=t.S.n;if(void 0!==n&&(t.r=n),t.S.n=t,t.i=-1,void 0===t.n){e.s=t;break}}}function a(e){for(var t=e.s,n=void 0;void 0!==t;){var r=t.p;-1===t.i?(t.S.U(t),void 0!==r&&(r.n=t.n),void 0!==t.n&&(t.n.p=r)):n=t,t.S.n=t.r,void 0!==t.r&&(t.r=void 0),t=r}e.s=n}function l(e){signals_core_module_e.call(this,void 0),this.x=e,this.s=void 0,this.g=L-1,this.f=4}function w(e){return new l(e)}function y(e){var t=e.u;if(e.u=void 0,"function"==typeof t){M++;var n=D;D=void 0;try{t()}catch(t){throw e.f&=-2,e.f|=8,_(e),t}finally{D=n,signals_core_module_t()}}}function _(e){for(var t=e.s;void 0!==t;t=t.n)t.S.U(t);e.x=void 0,e.s=void 0,y(e)}function g(e){if(D!==this)throw new Error("Out-of-order effect");a(this),D=e,this.f&=-2,8&this.f&&_(this),signals_core_module_t()}function b(e){this.x=e,this.u=void 0,this.s=void 0,this.o=void 0,this.f=32}function p(e){var t=new b(e);try{t.c()}catch(e){throw t.d(),e}return t.d.bind(t)}signals_core_module_e.prototype.h=function(){return!0},signals_core_module_e.prototype.S=function(e){this.t!==e&&void 0===e.e&&(e.x=this.t,void 0!==this.t&&(this.t.e=e),this.t=e)},signals_core_module_e.prototype.U=function(e){if(void 0!==this.t){var t=e.e,n=e.x;void 0!==t&&(t.x=n,e.e=void 0),void 0!==n&&(n.e=t,e.x=void 0),e===this.t&&(this.t=n)}},signals_core_module_e.prototype.subscribe=function(e){var t=this;return p((function(){var n=t.value,r=32&this.f;this.f&=-33;try{e(n)}finally{this.f|=r}}))},signals_core_module_e.prototype.valueOf=function(){return this.value},signals_core_module_e.prototype.toString=function(){return this.value+""},signals_core_module_e.prototype.peek=function(){return this.v},Object.defineProperty(signals_core_module_e.prototype,"value",{get:function(){var e=v(this);return void 0!==e&&(e.i=this.i),this.v},set:function(e){if(e!==this.v){U>100&&i(),this.v=e,this.i++,L++,M++;try{for(var t=this.t;void 0!==t;t=t.x)t.t.N()}finally{signals_core_module_t()}}}}),(l.prototype=new signals_core_module_e).h=function(){if(this.f&=-3,1&this.f)return!1;if(32==(36&this.f))return!0;if(this.f&=-5,this.g===L)return!0;if(this.g=L,this.f|=1,this.i>0&&!d(this))return this.f&=-2,!0;var e=D;try{c(this),D=this;var t=this.x();(16&this.f||this.v!==t||0===this.i)&&(this.v=t,this.f&=-17,this.i++)}catch(e){this.v=e,this.f|=16,this.i++}return D=e,a(this),this.f&=-2,!0},l.prototype.S=function(e){if(void 0===this.t){this.f|=36;for(var t=this.s;void 0!==t;t=t.n)t.S.S(t)}signals_core_module_e.prototype.S.call(this,e)},l.prototype.U=function(e){if(void 0!==this.t&&(signals_core_module_e.prototype.U.call(this,e),void 0===this.t)){this.f&=-33;for(var t=this.s;void 0!==t;t=t.n)t.S.U(t)}},l.prototype.N=function(){if(!(2&this.f)){this.f|=6;for(var e=this.t;void 0!==e;e=e.x)e.t.N()}},l.prototype.peek=function(){if(this.h()||i(),16&this.f)throw this.v;return this.v},Object.defineProperty(l.prototype,"value",{get:function(){1&this.f&&i();var e=v(this);if(this.h(),void 0!==e&&(e.i=this.i),16&this.f)throw this.v;return this.v}}),b.prototype.c=function(){var e=this.S();try{8&this.f||void 0===this.x||(this.u=this.x())}finally{e()}},b.prototype.S=function(){1&this.f&&i(),this.f|=1,this.f&=-9,y(this),c(this),M++;var e=D;return D=this,g.bind(this,e)},b.prototype.N=function(){2&this.f||(this.f|=2,this.o=N,N=this)},b.prototype.d=function(){this.f|=8,1&this.f||_(this)};var x,H=R.a.createElement;R.a.createElement=function(e,t){if("string"==typeof e&&t)for(var n in t){var r=t[n];"children"!==n&&r instanceof signals_core_module_e&&(t[n]=r.value)}return H.apply(this,arguments)};var k=new WeakMap;function signals_module_p(e){x&&x(),x=e&&e.S()}var B=H("a").$$typeof;Object.defineProperties(signals_core_module_e.prototype,{$$typeof:{configurable:!0,value:B},type:{configurable:!0,value:function(e){return e.data.value}},props:{configurable:!0,get:function(){return{data:this}}},ref:{configurable:!0,value:null}});var G,F=!1,m=function(){return{}};Object.defineProperty(C.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentDispatcher,"current",{get:function(){return G},set:function(e){if(G=e,!F)if(e&&!function(e){var t=V.get(e);if(void 0!==t)return t;var n=e.useCallback.length<2||/Invalid/.test(e.useCallback);return V.set(e,n),n}(e)){F=!0;var t=e.useReducer(m,{})[1];F=!1;var n=k.get(t);n?n.c=t:(n=function(e){var t;return p((function(){t=this})),t.c=e,t}(t),k.set(t,n)),signals_module_p(n)}else signals_module_p()}});var V=new Map;function signals_module_h(e){return Object(C.useMemo)((function(){return u(e)}),[])}function signals_module_y(e){var t=Object(C.useRef)(e);return t.current=e,Object(C.useMemo)((function(){return w((function(){return t.current()}))}),[])}function j(e){var t=Object(C.useRef)(e);t.current=e,Object(C.useEffect)((function(){return p((function(){return t.current()}))}),[])}function flattenCommands(e,t=null){return Object.keys(e).reduce((n,r)=>{const{icon:o,description:s,name:f,subCommands:E,action:C,canHandleQueries:R,closeOnExecute:I,category:S,executeManually:O}=e[r],T=t?`${t}.${r}`:r,A=E?Object.keys(E).map(e=>`${T}.${e}`):[];return n[T]={id:T,name:f,icon:o,description:s,action:C,canHandleQueries:R,subCommandIds:A,parentId:t,closeOnExecute:I,category:S,executeManually:O},A.length>0?{...n,...flattenCommands(E,T)}:n},{})}const W="%c[COMMANDBAR]";var q={ok:(e,...t)=>console.log(W,"color: green",e,...t),error:(e,...t)=>console.log(W,"color: red",e,...t),warn:(e,...t)=>console.warn(W,"color: orange",e,...t),debug:()=>null};function clamp(e,t,n){return Math.max(t,Math.min(n,e))}const X=new Intl.Collator("en").compare,Q=/(?:\s+|^)-[a-z\d]+/gi,z={interSplit:"[^A-Za-z0-9']+",intraSplit:"[a-z][A-Z]",intraBound:"[A-Za-z][0-9]|[0-9][A-Za-z]|[a-z][A-Z]",interLft:0,interRgt:0,interChars:".",interIns:1/0,intraChars:"[a-z\\d']",intraIns:0,intraContr:"'[a-z]{1,2}\\b",intraMode:0,intraSlice:[1,1/0],intraSub:0,intraTrn:0,intraDel:0,intraFilt:(e,t,n)=>!0,sort:(e,t,n)=>{let{idx:r,chars:o,terms:s,interLft2:f,interLft1:E,start:C,intraIns:R,interIns:I}=e;return r.map((e,t)=>t).sort((e,n)=>o[n]-o[e]||R[e]-R[n]||s[n]+f[n]+.5*E[n]-(s[e]+f[e]+.5*E[e])||I[e]-I[n]||C[e]-C[n]||X(t[r[e]],t[r[n]]))}},lazyRepeat=(e,t)=>0==t?"":1==t?e+"??":t==1/0?e+"*?":e+`{0,${t}}?`;function uFuzzy(e){e=Object.assign({},z,e);const{interLft:t,interRgt:n,intraMode:r,intraSlice:o,intraIns:s,intraSub:f,intraTrn:E,intraDel:C,intraContr:R,intraSplit:I,interSplit:S,intraBound:O,intraChars:T}=e;let{intraRules:A}=e;null==A&&(A=e=>{let t=z.intraSlice,n=0,r=0,R=0,I=0,S=e.length;return S<=4?S>=3&&(R=Math.min(E,1),4==S&&(n=Math.min(s,1))):(t=o,n=s,r=f,R=E,I=C),{intraSlice:t,intraIns:n,intraSub:r,intraTrn:R,intraDel:I}});let P=!!I,D=new RegExp(I,"g"),N=new RegExp(S,"g"),M=new RegExp("^"+S+"|"+S+"$","g"),U=new RegExp(R,"gi");const split=e=>(e=e.replace(M,"").toLowerCase(),P&&(e=e.replace(D,e=>e[0]+" "+e[1])),e.split(N).filter(e=>""!=e)),prepQuery=(o,f=0,E=!1)=>{let C=split(o);if(0==C.length)throw"Empty needle!";let R,I=Array(C.length).fill("");if(C=C.map((e,t)=>e.replace(U,e=>(I[t]=e,""))),1==r)R=C.map((e,t)=>{let{intraSlice:n,intraIns:r,intraSub:o,intraTrn:s,intraDel:f}=A(e);if(r+o+s+f==0)return e+I[t];let[E,C]=n,R=e.slice(0,E),S=e.slice(C),O=e.slice(E,C);1==r&&1==R.length&&R!=O[0]&&(R+="(?!"+R+")");let P=O.length,D=[];if(o)for(let e=0;e<P;e++)D.push(R+O.slice(0,e)+T+O.slice(e+1)+S);if(s)for(let e=0;e<P-1;e++)O[e]!=O[e+1]&&D.push(R+O.slice(0,e)+O[e+1]+O[e]+O.slice(e+2)+S);if(f)for(let e=0;e<P;e++)D.push(R+O.slice(0,e+1)+"?"+O.slice(e+1)+S);if(r){let e=lazyRepeat(T,1);for(let t=0;t<P;t++)D.push(R+O.slice(0,t)+e+O.slice(t)+S)}return"(?:"+e+"|"+D.join("|")+")"+I[t]});else{let e=lazyRepeat(T,s);2==f&&s>0&&(e=")("+e+")("),R=C.map((t,n)=>t.split("").map((e,t,n)=>(1==s&&0==t&&n.length>1&&e[t]!=e[t+1]&&(e+="(?!"+e+")"),e)).join(e)+I[n])}let S=2==t?"(?:\\b|_)":"",O=2==n?"(?:\\b|_)":"",P=O+lazyRepeat(e.interChars,e.interIns)+S;return f>0?E?R=S+"("+R.join(")"+O+"|"+S+"(")+")"+O:(R="("+R.join(")("+P+")(")+")",R="(.?"+S+")"+R+"("+O+".*)"):(R=R.join(P),R=S+R+O),[new RegExp(R,"i"),C,I]},filter=(e,t,n)=>{let r=[],[o]=prepQuery(t);if(null!=n)for(let t=0;t<n.length;t++){let s=n[t];o.test(e[s])&&r.push(s)}else for(let t=0;t<e.length;t++)o.test(e[t])&&r.push(t);return r};let L=!!O,x=new RegExp(S),H=new RegExp(O);const info=(r,o,s)=>{let[f,E,C]=prepQuery(s,1),[R]=prepQuery(s,2),I=E.length,S=r.length,O=Array(S).fill(0),T={idx:Array(S),start:O.slice(),chars:O.slice(),terms:O.slice(),interIns:O.slice(),intraIns:O.slice(),interLft2:O.slice(),interRgt2:O.slice(),interLft1:O.slice(),interRgt1:O.slice(),ranges:Array(S)},A=1==t||1==n,P=0;for(let s=0;s<r.length;s++){let S=o[r[s]],O=S.match(f),D=O.index+O[1].length,N=D,M=!1,U=0,k=0,B=0,G=0,F=0,V=0,W=0,q=0,X=[];for(let r=0,o=2;r<I;r++,o+=2){let s=O[o].toLowerCase(),f=E[r]+C[r],R=f.length,T=s.length,P=s==f;if(!P&&O[o+1].length>=R){let e=O[o+1].toLowerCase().indexOf(f);e>-1&&(X.push(N,e,R),N+=refineMatch(O,o,e,R),s=f,T=R,P=!0,0==r&&(D=N))}if(A||P){let e=N-1,r=N+T,E=!0,C=!0;if(-1==e||x.test(S[e]))P&&U++;else{if(2==t){M=!0;break}if(L&&H.test(S[e]+S[e+1]))P&&k++;else{if(1==t){let e=O[o+1],t=N+T;if(e.length>=R){let n,r=0,E=!1,C=new RegExp(f,"ig");for(;n=C.exec(e);){r=n.index;let e=t+r,o=e-1;if(-1==o||x.test(S[o])){U++,E=!0;break}if(H.test(S[o]+S[e])){k++,E=!0;break}}if(E){X.push(N,r,R),N+=refineMatch(O,o,r,R),s=f,T=R,P=!0;break}}M=!0;break}E=!1}}if(r==S.length||x.test(S[r]))P&&B++;else{if(2==n){M=!0;break}if(L&&H.test(S[r-1]+S[r]))P&&G++;else{if(1==n){M=!0;break}C=!1}}P&&(F+=R,E&&C&&V++)}if(T>R&&(q+=T-R),r>0&&(W+=O[o-1].length),!e.intraFilt(f,s,N)){M=!0;break}r<I-1&&(N+=T+O[o+1].length)}if(!M){T.idx[P]=r[s],T.interLft2[P]=U,T.interLft1[P]=k,T.interRgt2[P]=B,T.interRgt1[P]=G,T.chars[P]=F,T.terms[P]=V,T.interIns[P]=W,T.intraIns[P]=q,T.start[P]=D;let e=S.match(R),t=T.ranges[P]=[],n=e.index+e[1].length,o=n,f=n,E=X.length,C=E>0?0:1/0,I=E-3;for(let r=2;r<e.length;r++){let s=e[r].length;if(C<=I&&X[C]==n){let t=X[C+1],f=X[C+2],E=t+f;n+=s+E,o=n-f,e[r+1]=e[r+1].slice(E),C+=3}else n+=s;r%2==0?f=n:s>0&&(t.push(o,f),o=f=n)}f>o&&t.push(o,f),P++}}if(P<r.length)for(let e in T)T[e]=T[e].slice(0,P);return T},refineMatch=(e,t,n,r)=>{let o=e[t]+e[t+1].slice(0,n);return e[t-1]+=o,e[t]=e[t+1].slice(n,n+r),e[t+1]=e[t+1].slice(n+r),o.length};return{search:(...t)=>((t,n,r=!1,o=1e3,s)=>{let f,E=null,C=null,R=[];if(n=n.replace(Q,e=>(R.push(e.trim().slice(1)),"")),R.length>0&&(f=new RegExp(R.join("|"),"i"),""==n.trim())){let e=[];for(let n=0;n<t.length;n++)f.test(t[n])||e.push(n);return[e,null,null]}if(r){let e=split(n);if(e.length>1){let n=e.slice().sort((e,t)=>t.length-e.length);for(let e=0;e<n.length;e++){if(s&&0==s.length)return[[],null,null];s=filter(t,n[e],s)}E=permute(e).map(e=>e.join(" ")),C=[];let r=new Set;for(let e=0;e<E.length;e++)if(r.size<s.length){let n=s.filter(e=>!r.has(e)),o=filter(t,E[e],n);for(let e=0;e<o.length;e++)r.add(o[e]);C.push(o)}else C.push([])}}null==E&&(E=[n],C=[s&&s.length>0?s:filter(t,n)]);let I=null,S=null;if(R.length>0&&(C=C.map(e=>e.filter(e=>!f.test(t[e])))),C.reduce((e,t)=>e+t.length,0)<=o){I={},S=[];for(let n=0;n<C.length;n++){let r=C[n];if(null==r||0==r.length)continue;let o=E[n],s=info(r,t,o),f=e.sort(s,t,o);if(n>0)for(let e=0;e<f.length;e++)f[e]+=S.length;for(let e in s)I[e]=(I[e]?I[e]:[]).concat(s[e]);S=S.concat(f)}}return[[].concat(...C),I,S]})(...t),split:split,filter:filter,info:info,sort:e.sort}}const Y=(()=>{let e={A:"ÁÀÃÂÄĄ",a:"áàãâäą",E:"ÉÈÊËĖ",e:"éèêëę",I:"ÍÌÎÏĮ",i:"íìîïį",O:"ÓÒÔÕÖ",o:"óòôõö",U:"ÚÙÛÜŪŲ",u:"úùûüūų",C:"ÇČ",c:"çč",N:"Ñ",n:"ñ",S:"Š",s:"š"},t=new Map,n="";for(let r in e)e[r].split("").forEach(e=>{n+=e,t.set(e,r)});let r=new RegExp(`[${n}]`,"g"),replacer=e=>t.get(e);return e=>{if("string"==typeof e)return e.replace(r,replacer);let t=Array(e.length);for(let n=0;n<e.length;n++)t[n]=e[n].replace(r,replacer);return t}})();function permute(e){let t,n,r=(e=e.slice()).length,o=[e.slice()],s=new Array(r).fill(0),f=1;for(;f<r;)s[f]<f?(t=f%2&&s[f],n=e[f],e[f]=e[t],e[t]=n,++s[f],f=1,o.push(e.slice())):(s[f]=0,++f);return o}const _mark=(e,t)=>t?`<mark>${e}</mark>`:e,_append=(e,t)=>e+t;uFuzzy.latinize=Y,uFuzzy.permute=e=>permute([...Array(e.length).keys()]).sort((e,t)=>{for(let n=0;n<e.length;n++)if(e[n]!=t[n])return e[n]-t[n];return 0}).map(t=>t.map(t=>e[t])),uFuzzy.highlight=function highlight(e,t,n=_mark,r="",o=_append){let s=o(r,n(e.substring(0,t[0]),!1));r=null!==s?s:r;for(let f=0;f<t.length;f+=2){let E=t[f],C=t[f+1];s=o(r,n(e.substring(E,C),!0)),r=null!==s?s:r,f<t.length-3&&(s=o(r,n(e.substring(t[f+1],t[f+2]),!1)),r=null!==s?s:r)}return s=o(r,n(e.substring(t[t.length-1]),!1)),r=null!==s?s:r};const $=new uFuzzy({intraMode:1,intraIns:1,intraSub:1,intraTrn:1,intraDel:1});function assert(e,t="Assertion failed"){if(!1===e)throw Error(t)}function classnames(...e){return e.filter(Boolean).join(" ")}var K,Z,J;!function(e){e.COLLAPSED="collapsed",e.IDLE="idle",e.EXECUTING_COMMAND="executingCommand",e.DISPLAYING_RESULT="displayingResult"}(K||(K={})),function(e){e.RESET_SEARCH="RESET_SEARCH",e.HIGHLIGHT_NEXT_ITEM="HIGHLIGHT_NEXT_ITEM",e.HIGHLIGHT_PREVIOUS_ITEM="HIGHLIGHT_PREVIOUS_ITEM",e.CANCEL="CANCEL",e.SELECT_GROUP="SELECT_GROUP",e.GO_TO_PARENT_GROUP="GO_TO_PARENT_GROUP",e.UPDATE_SEARCH="UPDATE_SEARCH",e.UPDATE_COMMAND_QUERY="UPDATE_COMMAND_QUERY",e.EXECUTE_COMMAND="EXECUTE_COMMAND",e.FINISH_COMMAND="FINISH_COMMAND",e.UPDATE_RESULT="UPDATE_RESULT",e.EXPAND="EXPAND",e.ADD_FAVOURITE="ADD_FAVOURITE",e.REMOVE_FAVOURITE="REMOVE_FAVOURITE"}(Z||(Z={})),function(e){e.ADD_FAVOURITE="ADD_FAVOURITE",e.ADD_RECENTLY_USED="ADD_RECENTLY_USED",e.EXPAND="EXPAND",e.HIGHLIGHT_NEXT_COMMAND="HIGHLIGHT_NEXT_COMMAND",e.HIGHLIGHT_NEXT_OPTION="HIGHLIGHT_NEXT_OPTION",e.HIGHLIGHT_PREVIOUS_COMMAND="HIGHLIGHT_PREVIOUS_COMMAND",e.HIGHLIGHT_PREVIOUS_OPTION="HIGHLIGHT_PREVIOUS_OPTION",e.LEAVE_GROUP="LEAVE_GROUP",e.REFRESH_COMMANDS="REFRESH_COMMANDS",e.REMOVE_FAVOURITE="REMOVE_FAVOURITE",e.RESET_HIGHLIGHT="RESET_HIGHLIGHT",e.RESET_OPTION_HIGHLIGHT="RESET_OPTION_HIGHLIGHT",e.RESET_SEARCH="RESET_SEARCH",e.RESET_SEARCH_OR_LEAVE_GROUP="RESET_SEARCH_OR_LEAVE_GROUP",e.SET_ACTIVE_COMMAND="SET_ACTIVE_COMMAND",e.SET_COMMAND_QUERY="SET_COMMAND_QUERY",e.SET_GROUP="SET_GROUP",e.SET_SEARCH_WORD="SET_SEARCH_WORD",e.UNSET_ACTIVE_COMMAND="UNSET_ACTIVE_COMMAND",e.UNSET_RESULT="UNSET_RESULT",e.UPDATE_RESULT="UPDATE_RESULT"}(J||(J={}));const ee={initial:K.COLLAPSED,states:{collapsed:{on:{UPDATE_SEARCH:{target:K.IDLE,actions:[J.EXPAND,J.SET_SEARCH_WORD,J.REFRESH_COMMANDS]},HIGHLIGHT_NEXT_ITEM:{target:K.IDLE,actions:[J.REFRESH_COMMANDS,J.EXPAND]},EXPAND:{target:K.IDLE,actions:[J.REFRESH_COMMANDS,J.EXPAND]}}},idle:{on:{UPDATE_SEARCH:{target:K.IDLE,actions:[J.SET_SEARCH_WORD,J.RESET_HIGHLIGHT,J.REFRESH_COMMANDS]},HIGHLIGHT_NEXT_ITEM:{target:K.IDLE,actions:[J.HIGHLIGHT_NEXT_COMMAND]},HIGHLIGHT_PREVIOUS_ITEM:{target:K.IDLE,actions:[J.HIGHLIGHT_PREVIOUS_COMMAND]},CANCEL:{target:K.IDLE,actions:[J.RESET_HIGHLIGHT,J.RESET_SEARCH_OR_LEAVE_GROUP,J.REFRESH_COMMANDS]},EXECUTE_COMMAND:{target:K.EXECUTING_COMMAND,actions:[J.ADD_RECENTLY_USED,J.SET_ACTIVE_COMMAND,J.REFRESH_COMMANDS]},GO_TO_PARENT_GROUP:{target:K.IDLE,actions:[J.RESET_HIGHLIGHT,J.LEAVE_GROUP,J.REFRESH_COMMANDS]},SELECT_GROUP:{target:K.IDLE,actions:[J.RESET_SEARCH,J.RESET_HIGHLIGHT,J.SET_GROUP,J.REFRESH_COMMANDS]},ADD_FAVOURITE:{target:K.IDLE,actions:[J.ADD_FAVOURITE,J.REFRESH_COMMANDS]},REMOVE_FAVOURITE:{target:K.IDLE,actions:[J.REMOVE_FAVOURITE,J.REFRESH_COMMANDS]}}},executingCommand:{on:{UPDATE_RESULT:{target:K.DISPLAYING_RESULT,actions:[J.UPDATE_RESULT]},FINISH_COMMAND:{target:K.IDLE,actions:[J.UNSET_ACTIVE_COMMAND]}}},displayingResult:{on:{UPDATE_COMMAND_QUERY:{target:K.DISPLAYING_RESULT,actions:[J.SET_COMMAND_QUERY]},UPDATE_RESULT:{target:K.DISPLAYING_RESULT,actions:[J.UPDATE_RESULT,J.RESET_OPTION_HIGHLIGHT]},HIGHLIGHT_NEXT_ITEM:{target:K.DISPLAYING_RESULT,actions:[J.HIGHLIGHT_NEXT_OPTION]},HIGHLIGHT_PREVIOUS_ITEM:{target:K.DISPLAYING_RESULT,actions:[J.HIGHLIGHT_PREVIOUS_OPTION]},EXECUTE_COMMAND:{target:K.DISPLAYING_RESULT,actions:[J.SET_ACTIVE_COMMAND]},CANCEL:{target:K.IDLE,actions:[J.UNSET_RESULT,J.UNSET_ACTIVE_COMMAND,J.RESET_OPTION_HIGHLIGHT]},FINISH_COMMAND:{target:K.DISPLAYING_RESULT,actions:[J.UNSET_ACTIVE_COMMAND]}}}}};function runAction(e,t,n){switch(e){case J.RESET_SEARCH:t.searchWord="";break;case J.RESET_HIGHLIGHT:t.highlightedItem=0;break;case J.REFRESH_COMMANDS:t.availableCommandIds=function filterCommands(e,t,n,r,o){let s=Object.values(n);if(s=t?s:s.filter(t=>t.parentId===e||!e&&o.includes(t.id)),!t)return s.sort((t,n)=>function sortCommands(e,t,n,r){const o=r.includes(e.id),s=r.includes(t.id);if(o&&!s)return-1;if(!o&&s)return 1;if(o&&s)return r.indexOf(e.id)-r.indexOf(t.id);const f=n.includes(e.id),E=n.includes(t.id);return f&&!E?-1:!f&&E?1:e.name.localeCompare(t.name)}(t,n,r,e?[]:o)).map(e=>e.id);const f=s.map(({name:e,description:t})=>e+" "+t),[E,,C]=$.search(f,t.toLowerCase());return C.map(e=>s[E[e]].id)}(t.selectedCommandGroup,t.searchWord,t.commands,t.favouriteCommands,t.recentCommands);break;case J.HIGHLIGHT_NEXT_COMMAND:t.highlightedItem=clamp(t.highlightedItem+1,0,t.availableCommandIds.length-1);break;case J.HIGHLIGHT_PREVIOUS_COMMAND:t.highlightedItem=clamp(t.highlightedItem-1,0,t.availableCommandIds.length-1);break;case J.HIGHLIGHT_NEXT_OPTION:t.highlightedOption=clamp(t.highlightedOption+1,0,Object.keys(t.result.options).length-1);break;case J.HIGHLIGHT_PREVIOUS_OPTION:t.highlightedOption=clamp(t.highlightedOption-1,0,Object.keys(t.result.options).length-1);break;case J.SET_SEARCH_WORD:assert(n.type===Z.UPDATE_SEARCH),t.searchWord=n.searchWord;break;case J.SET_COMMAND_QUERY:assert(n.type===Z.UPDATE_COMMAND_QUERY),t.commandQuery=n.commandQuery,t.commandQueryDirty=!0;break;case J.EXPAND:t.expanded=!0;break;case J.SET_ACTIVE_COMMAND:assert(n.type===Z.EXECUTE_COMMAND),t.activeCommandId=n.commandId,t.activeCommandMessage=n.message;break;case J.UNSET_ACTIVE_COMMAND:t.activeCommandId=null,t.activeCommandMessage=null;break;case J.UPDATE_RESULT:assert(n.type===Z.UPDATE_RESULT),assert("boolean"==typeof n.result.success),t.result={options:{},message:"Command executed",view:null,success:!1,...n.result},t.resultCommandId=t.activeCommandId,t.commandQueryDirty=!1;break;case J.RESET_OPTION_HIGHLIGHT:t.highlightedOption=0;break;case J.RESET_SEARCH_OR_LEAVE_GROUP:t.commandQuery?t.commandQuery="":t.searchWord?t.searchWord="":t.selectedCommandGroup=t.selectedCommandGroup?t.commands[t.selectedCommandGroup].parentId:null;break;case J.UNSET_RESULT:t.result=null,t.resultCommandId=null,t.commandQuery="";break;case J.LEAVE_GROUP:t.selectedCommandGroup=t.selectedCommandGroup?t.commands[t.selectedCommandGroup].parentId:null;break;case J.SET_GROUP:assert(n.type===Z.SELECT_GROUP),t.selectedCommandGroup=n.commandId;break;case J.ADD_FAVOURITE:assert(n.type===Z.ADD_FAVOURITE),t.favouriteCommands.includes(n.commandId)||(t.favouriteCommands=[...t.favouriteCommands,n.commandId]);break;case J.REMOVE_FAVOURITE:assert(n.type===Z.REMOVE_FAVOURITE),t.favouriteCommands=t.favouriteCommands.filter(e=>e!==n.commandId);break;case J.ADD_RECENTLY_USED:if(assert(n.type===Z.EXECUTE_COMMAND),!t.commands[n.commandId].action)break;t.recentCommands.includes(n.commandId)&&(t.recentCommands=t.recentCommands.filter(e=>e!==n.commandId)),t.recentCommands.unshift(n.commandId),t.recentCommands.length>5&&t.recentCommands.pop();break;default:throw Error(`Action ${e} not implemented`)}}const commandBarReducer=(e,t)=>function transition(e,t,n){var r,o,s;let f=null!==(o=null===(r=ee.states[e.status].on)||void 0===r?void 0:r[t.type])&&void 0!==o?o:null;f||(q.error(`No transition found for event "${t.type}" in state "${e.status}"`),f={target:e.status});const E={...e,status:"string"==typeof f?f:f.target};return n&&"object"==typeof f&&(null===(s=f.actions)||void 0===s||s.forEach(e=>n(e,E,t))),q.debug(`Transitioned from "${e.status}" to "${E.status}" with event "${t.type}"`),E}(e,t,runAction);var te=n(19);var ne=R.a.memo(({children:e})=>R.a.createElement("span",{className:te.iconWrap},e)),ae=n(20);var re=R.a.memo(()=>{const{state:{showBranding:e}}=useCommandBarState(),{translate:t}=useIntl();return e?R.a.createElement("a",{href:"https://helzle.it/projects?source=commandbar",title:t("CommandBarFooter.branding","Made with love by Sebastian Helzle"),target:"_blank",rel:"noreferrer noopener",className:ae.madeWithLove},R.a.createElement("small",null,t("CommandBarFooter.brandingSmall","Made with love by")),R.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"18",height:"18",viewBox:"0 0 180 180"},R.a.createElement("defs",null,R.a.createElement("linearGradient",{id:"a",gradientUnits:"userSpaceOnUse",x1:"280.25",y1:"377.003",x2:"373.261",y2:"377.003"},R.a.createElement("stop",{offset:"0",stopColor:"#297AAC"}),R.a.createElement("stop",{offset:"1",stopColor:"#53AADA"}))),R.a.createElement("path",{d:"M0 180.017h37.287L71.35 52.898H34.061zM48.717 0l-9.083 33.898h36.675L85.392 0z",fill:"#B9B7B3"}),R.a.createElement("path",{d:"M335.972 313.444H288.25l-8 28.306h47.691l-28.03 98.813h39.287l34.063-127.119z",fill:"url(#a)",transform:"translate(-195.462 -260.325)"}))):null});function IconBack(){return R.a.createElement("svg",{viewBox:"0 0 448 512"},R.a.createElement("path",{fill:"currentColor",d:"m257.5 445.1-22.2 22.2c-9.4 9.4-24.6 9.4-33.9 0L7 273c-9.4-9.4-9.4-24.6 0-33.9L201.4 44.7c9.4-9.4 24.6-9.4 33.9 0l22.2 22.2c9.5 9.5 9.3 25-.4 34.3L136.6 216H424c13.3 0 24 10.7 24 24v32c0 13.3-10.7 24-24 24H136.6l120.5 114.8c9.8 9.3 10 24.8.4 34.3z"}))}function IconNeos(){return R.a.createElement("svg",{viewBox:"0 0 512 512"},R.a.createElement("path",{fill:"currentColor",d:"M415.44 512h-95.11L212.12 357.46v91.1L125.69 512H28V29.82L68.47 0h108.05l123.74 176.13V63.45L386.69 0h97.69v461.5zM38.77 35.27V496l72-52.88V194l215.5 307.64h84.79l52.35-38.17h-78.27L69 13zm82.54 466.61 80-58.78v-101l-79.76-114.4v220.94L49 501.89h72.34zM80.63 10.77l310.6 442.57h82.37V10.77h-79.75v317.56L170.91 10.77zM311 191.65l72 102.81V15.93l-72 53v122.72z"}))}function IconSpinner(){return R.a.createElement("svg",{viewBox:"0 0 512 512"},R.a.createElement("path",{fill:"currentColor",d:"M288 39.056v16.659c0 10.804 7.281 20.159 17.686 23.066C383.204 100.434 440 171.518 440 256c0 101.689-82.295 184-184 184-101.689 0-184-82.295-184-184 0-84.47 56.786-155.564 134.312-177.219C216.719 75.874 224 66.517 224 55.712V39.064c0-15.709-14.834-27.153-30.046-23.234C86.603 43.482 7.394 141.206 8.003 257.332c.72 137.052 111.477 246.956 248.531 246.667C393.255 503.711 504 392.788 504 256c0-115.633-79.14-212.779-186.211-240.236C302.678 11.889 288 23.456 288 39.056z"}))}function IconStar(){return R.a.createElement("svg",{viewBox:"0 0 576 512"},R.a.createElement("path",{fill:"currentColor",d:"M528.1 171.5 382 150.2 316.7 17.8c-11.7-23.6-45.6-23.9-57.4 0L194 150.2 47.9 171.5c-26.2 3.8-36.7 36.1-17.7 54.6l105.7 103-25 145.5c-4.5 26.3 23.2 46 46.4 33.7L288 439.6l130.7 68.7c23.2 12.2 50.9-7.4 46.4-33.7l-25-145.5 105.7-103c19-18.5 8.5-50.8-17.7-54.6zM388.6 312.3l23.7 138.4L288 385.4l-124.3 65.3 23.7-138.4-100.6-98 139-20.2 62.2-126 62.2 126 139 20.2-100.6 98z"}))}function IconPlay(){return R.a.createElement("svg",{viewBox:"0 0 512 512"},R.a.createElement("path",{fill:"currentColor",d:"M256 8C119 8 8 119 8 256s111 248 248 248 248-111 248-248S393 8 256 8zm115.7 272l-176 101c-15.8 8.8-35.7-2.5-35.7-21V152c0-18.4 19.8-29.8 35.7-21l176 107c16.4 9.2 16.4 32.9 0 42z"}))}function IconRepeat(){return R.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512"},R.a.createElement("path",{fill:"currentColor",d:"M0 224c0 17.7 14.3 32 32 32s32-14.3 32-32c0-53 43-96 96-96H320v32c0 12.9 7.8 24.6 19.8 29.6s25.7 2.2 34.9-6.9l64-64c12.5-12.5 12.5-32.8 0-45.3l-64-64c-9.2-9.2-22.9-11.9-34.9-6.9S320 19.1 320 32V64H160C71.6 64 0 135.6 0 224zm512 64c0-17.7-14.3-32-32-32s-32 14.3-32 32c0 53-43 96-96 96H192V352c0-12.9-7.8-24.6-19.8-29.6s-25.7-2.2-34.9 6.9l-64 64c-12.5 12.5-12.5 32.8 0 45.3l64 64c9.2 9.2 22.9 11.9 34.9 6.9s19.8-16.6 19.8-29.6V448H352c88.4 0 160-71.6 160-160z"}))}var oe=n(6);var se=R.a.memo(()=>{const{state:{activeCommandId:e,resultCommandId:t,activeCommandMessage:n,commands:r,result:o,selectedCommandGroup:s,expanded:f},Icon:E}=useCommandBarState(),C=signals_module_y(()=>{var n,s;const f=null!==(n=e.value)&&void 0!==n?n:t.value;return f&&f?null!==(s=r.value[f])&&void 0!==s?s:o.value.options[f]:null}),I=null!==e.value;return f.value?R.a.createElement("footer",{className:oe.commandBarFooter},I?R.a.createElement("span",{className:oe.activity},R.a.createElement(ne,null,R.a.createElement(IconSpinner,null)),R.a.createElement("em",null,C.value.name,n.value?"﹘"+n.value:"")):C.value?R.a.createElement("span",{className:oe.breadcrumb},R.a.createElement(E,{icon:C.value.icon}),R.a.createElement("small",null,C.value.name)):s.value?R.a.createElement("span",{className:oe.breadcrumb},R.a.createElement(E,{icon:r.value[s.value].icon}),R.a.createElement("small",null,r.value[s.value].name)):R.a.createElement(ne,null,R.a.createElement(IconNeos,null)),R.a.createElement(re,null)):null}),ie=n(7);let ce=null;var le=R.a.memo(()=>{var e;const{state:t,actions:n}=useCommandBarState(),{executeCommand:r}=useCommandExecutor(),{translate:o}=useIntl(),s=Object(C.useRef)(),f=t.commands.value[t.activeCommandId.value||t.resultCommandId.value],E=Object(C.useCallback)(e=>{var o;t.status.value===K.DISPLAYING_RESULT?(n.UPDATE_COMMAND_QUERY(e.target.value),(null===(o=t.commands.value[t.resultCommandId.value])||void 0===o?void 0:o.executeManually)||(ce&&clearTimeout(ce),ce=setTimeout(()=>r(t.resultCommandId.value),500))):n.UPDATE_SEARCH(e.target.value)},[]),I=Object(C.useCallback)(e=>{"Escape"===e.key&&s.current.value&&(e.preventDefault(),e.stopPropagation())},[s.current]);return j(()=>{var e;t.status.value!==K.EXECUTING_COMMAND&&(null===(e=s.current)||void 0===e||e.focus())}),R.a.createElement(R.a.Fragment,null,R.a.createElement("input",{ref:s,className:ie.searchBox,type:"search",placeholder:t.status.value===K.DISPLAYING_RESULT?o("SearchBox.commandQuery.placeholder","Enter the query for the command"):o("SearchBox.placeholder","What do you want to do today?"),disabled:t.status.value===K.DISPLAYING_RESULT&&!(null==f?void 0:f.canHandleQueries),autoFocus:!0,onChange:E,onKeyUp:I,value:t.status.value===K.DISPLAYING_RESULT?t.commandQuery:t.searchWord,"data-testid":"SearchBox"}),!t.expanded.value&&R.a.createElement("button",{className:ie.expandButton,onClick:n.EXPAND,title:o("SearchBox.expand.title","Expand to show all commands")},R.a.createElement(ne,null,R.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 320 512"},R.a.createElement("path",{fill:"currentColor",d:"M31.3 192h257.3c17.8 0 26.7 21.5 14.1 34.1L174.1 354.8c-7.8 7.8-20.5 7.8-28.3 0L17.2 226.1C4.6 213.5 13.5 192 31.3 192z"})))),t.status.value===K.DISPLAYING_RESULT&&(null===(e=t.commands.value[t.resultCommandId.value])||void 0===e?void 0:e.executeManually)&&!t.activeCommandId.value&&R.a.createElement("button",{className:[ie.executeButton,t.commandQueryDirty.value?ie.commandQueryDirty:""].join(" "),onClick:()=>r(t.resultCommandId.value),title:o("SearchBox.execute.title","Execute the command")},R.a.createElement(ne,null,t.commandQueryDirty.value?R.a.createElement(IconPlay,null):R.a.createElement(IconRepeat,null))))}),ue=n(15);var de=R.a.memo(()=>{const{state:e,actions:t}=useCommandBarState(),n=signals_module_y(()=>e.status.value==K.DISPLAYING_RESULT);return R.a.createElement("header",{className:ue.commandBarHeader},(n.value||e.selectedCommandGroup.value)&&R.a.createElement("button",{type:"button",onClick:n.value?t.CANCEL:t.GO_TO_PARENT_GROUP,className:ue.backButton,title:"Back"},R.a.createElement(ne,null,R.a.createElement(IconBack,null))),R.a.createElement(le,null))}),me=n(4);var _e=R.a.memo((function CommandListItem({command:e,onItemSelect:t,highlightedId:n,onToggleFavourite:r}){const{state:{favouriteCommands:o},Icon:s}=useCommandBarState(),{translate:f}=useIntl(),{id:E,name:C,description:I,icon:S,action:O}=e,T=function getCommandType({subCommandIds:e,category:t,canHandleQueries:n,action:r},o){let s="command";return t||((null==e?void 0:e.length)>0?s="category":n?s="query":"string"==typeof r&&(s="link"),o("CommandListItem.type."+s,s))}(e,f),A=signals_module_y(()=>n.value===E),P=signals_module_y(()=>o.value.includes(E));return R.a.createElement("li",{className:classnames(me.commandListItem,A.value&&me.highlighted),onClick:()=>t(E),"data-testid":"CommandListItem"},R.a.createElement(s,{icon:S}),R.a.createElement("span",{className:me.label},R.a.createElement("span",null,C),I&&R.a.createElement("span",{className:me.description},"string"==typeof I?I:I())),r&&O&&R.a.createElement("button",{type:"button",className:classnames(me.favouriteButton,P.value&&me.isFavourite),title:f("CommandListItem.toggleFavourite","Toggle favourite"),onClick:e=>{e.stopPropagation(),r(E)}},R.a.createElement(ne,null,R.a.createElement(IconStar,null))),R.a.createElement("small",{className:me.type},T))})),fe=n(9);var he=R.a.memo(()=>{const{state:{commands:e,highlightedItem:t,availableCommandIds:n,status:r,searchWord:o,favouriteCommands:s,recentCommands:f,selectedCommandGroup:E},actions:{ADD_FAVOURITE:I,REMOVE_FAVOURITE:S}}=useCommandBarState(),{translate:O}=useIntl(),{executeCommand:T}=useCommandExecutor(),A=R.a.useRef(null);j(()=>{var e,n;null===(n=null===(e=A.current)||void 0===e?void 0:e.querySelector(`li:nth-child(${t.value})`))||void 0===n||n.scrollIntoView({behavior:"smooth",block:"center"})});const P=Object(C.useCallback)(e=>{s.value.includes(e)?S(e):I(e)},[s]),D=signals_module_y(()=>o.value||E.value?[]:n.value.filter(e=>f.value.includes(e))),N=signals_module_y(()=>o.value||E.value?n.value:n.value.filter(e=>!f.value.includes(e))),M=signals_module_y(()=>n.value[t.value]);return R.a.createElement("nav",{className:classnames(fe.results,r.value!==K.IDLE&&fe.disabled),"data-testid":"CommandList",ref:A},D.value.length>0&&R.a.createElement(R.a.Fragment,null,R.a.createElement("h6",null,O("CommandList.suggestions","Recently used")),R.a.createElement("ul",null,D.value.map(t=>R.a.createElement(_e,{key:t,command:e.value[t],onItemSelect:T,highlightedId:M,onToggleFavourite:P})))),N.value.length>0&&R.a.createElement(R.a.Fragment,null,R.a.createElement("h6",null,O("CommandList.heading","Commands")),R.a.createElement("ul",null,N.value.map(t=>R.a.createElement(_e,{key:t,command:e.value[t],onItemSelect:T,highlightedId:M,onToggleFavourite:P})))),0===n.value.length&&R.a.createElement("small",{className:fe.noResults},O("CommandList.noCommandsMessage","No matching commands found")))}),pe=n(10);var CommandResultsView_CommandResultsView=()=>{var e;const{state:{result:t,highlightedOption:n,activeCommandId:r}}=useCommandBarState(),{executeCommand:o}=useCommandExecutor(),{translate:s}=useIntl(),f=R.a.useRef(null),E=signals_module_y(()=>t.value?Object.values(t.value.options)[n.value].id:null),C=null!==r.value;j(()=>{var e,t;const r=n.value;null===(t=null===(e=f.current)||void 0===e?void 0:e.querySelector(`li:nth-child(${r})`))||void 0===t||t.scrollIntoView({behavior:"smooth",block:"center"})});const{options:I,view:S,message:O}=null!==(e=t.value)&&void 0!==e?e:{};return R.a.createElement("div",{className:pe.commandResultsView},!C&&O&&R.a.createElement("h6",{className:pe.message},O),C?R.a.createElement("div",null,s("CommandResultsView.waitingForResults","Waiting for results…")):"",!C&&S?R.a.createElement("div",null,S):"",!C&&I&&R.a.createElement("nav",{className:pe.results,ref:f},R.a.createElement("ul",null,Object.keys(I).map(e=>R.a.createElement(_e,{key:e,command:I[e],onItemSelect:o,highlightedId:E})))))},ve=n(11);var ge=R.a.memo(({handleToggle:e,disabled:t=!1,label:n,title:r,active:o})=>R.a.createElement("button",{className:classnames(ve.toggleButton,o&&ve.toggleButtonActive),onClick:e,disabled:t,title:r},R.a.createElement("span",null,n),R.a.createElement("span",{className:ve.buttonIcon},"⌘K")));const Ee=Object(C.createContext)({}),useCommandBarState=()=>Object(C.useContext)(Ee);const CommandBarStateProvider=({commands:e,children:t,IconComponent:n,userPreferences:r})=>{const{state:o,dispatch:s}=Object(C.useMemo)(()=>function createAppState(e){const t=u(e);return{state:{activeCommandId:w(()=>t.value.activeCommandId),activeCommandMessage:w(()=>t.value.activeCommandMessage),availableCommandIds:w(()=>t.value.availableCommandIds),commandQuery:w(()=>t.value.commandQuery),commandQueryDirty:w(()=>t.value.commandQueryDirty),commands:w(()=>t.value.commands),expanded:w(()=>t.value.expanded),favouriteCommands:w(()=>t.value.favouriteCommands),highlightedItem:w(()=>t.value.highlightedItem),highlightedOption:w(()=>t.value.highlightedOption),recentCommands:w(()=>t.value.recentCommands),result:w(()=>t.value.result),resultCommandId:w(()=>t.value.resultCommandId),searchWord:w(()=>t.value.searchWord),selectedCommandGroup:w(()=>t.value.selectedCommandGroup),showBranding:w(()=>t.value.showBranding),status:w(()=>t.value.status)},dispatch:e=>{t.value=commandBarReducer(t.value,e)}}}({activeCommandId:null,activeCommandMessage:null,availableCommandIds:Object.keys(e),commandQuery:"",commandQueryDirty:!1,commands:flattenCommands(e),expanded:!1,favouriteCommands:r.favouriteCommands,highlightedItem:0,highlightedOption:0,recentCommands:r.recentCommands,result:null,resultCommandId:null,searchWord:"",selectedCommandGroup:null,showBranding:r.showBranding,status:K.COLLAPSED}),[]),f=Object(C.useMemo)(()=>({[Z.RESET_SEARCH]:()=>s({type:Z.RESET_SEARCH}),[Z.HIGHLIGHT_NEXT_ITEM]:()=>s({type:Z.HIGHLIGHT_NEXT_ITEM}),[Z.HIGHLIGHT_PREVIOUS_ITEM]:()=>s({type:Z.HIGHLIGHT_PREVIOUS_ITEM}),[Z.CANCEL]:()=>s({type:Z.CANCEL}),[Z.SELECT_GROUP]:e=>s({type:Z.SELECT_GROUP,commandId:e}),[Z.GO_TO_PARENT_GROUP]:()=>s({type:Z.GO_TO_PARENT_GROUP}),[Z.UPDATE_SEARCH]:e=>s({type:Z.UPDATE_SEARCH,searchWord:e}),[Z.UPDATE_COMMAND_QUERY]:e=>s({type:Z.UPDATE_COMMAND_QUERY,commandQuery:e}),[Z.EXECUTE_COMMAND]:async(e,t)=>(s({type:Z.EXECUTE_COMMAND,commandId:e,message:t}),r.addRecentCommand(e).catch(e=>q.error("Could not add recent command",e))),[Z.FINISH_COMMAND]:()=>s({type:Z.FINISH_COMMAND}),[Z.UPDATE_RESULT]:e=>s({type:Z.UPDATE_RESULT,result:e}),[Z.EXPAND]:()=>s({type:Z.EXPAND}),[Z.ADD_FAVOURITE]:e=>(s({type:Z.ADD_FAVOURITE,commandId:e}),r.setFavouriteCommands(o.favouriteCommands.value).catch(e=>q.error("Could not update favourite commands",e))),[Z.REMOVE_FAVOURITE]:e=>(s({type:Z.REMOVE_FAVOURITE,commandId:e}),r.setFavouriteCommands(o.favouriteCommands.value).catch(e=>q.error("Could not update favourite commands",e)))}),[]),E=Object(C.useCallback)(({icon:e,spin:t=!1})=>R.a.createElement(ne,null,R.a.createElement(n,{icon:e,spin:t})),[]);return R.a.createElement(Ee.Provider,{value:{state:o,actions:f,Icon:E}},t)},ye=R.a.createContext({}),useCommandExecutor=()=>R.a.useContext(ye),CommandBarExecutor=({children:e,toggleOpen:t,dialogRef:n,open:r})=>{const{state:o,actions:s}=useCommandBarState(),f=useFunctionRef(e=>{if(r&&!e.defaultPrevented)if("k"===e.key&&(e.metaKey||e.ctrlKey)&&(null==n?void 0:n.current.contains(e.target)))t(),e.stopPropagation(),e.preventDefault();else if("Escape"===e.key)e.stopPropagation(),e.preventDefault(),o.selectedCommandGroup.value||o.searchWord.value||o.commandQuery.value||o.result.value?s.CANCEL():t();else if("ArrowDown"===e.key)e.stopPropagation(),e.preventDefault(),s.HIGHLIGHT_NEXT_ITEM();else if("ArrowUp"===e.key)e.stopPropagation(),e.preventDefault(),s.HIGHLIGHT_PREVIOUS_ITEM();else if("Enter"===e.key){e.stopPropagation(),e.preventDefault();let t=o.availableCommandIds.value[o.highlightedItem.value];o.status.value===K.DISPLAYING_RESULT&&(t=!o.commandQueryDirty.value&&Object.values(o.result.value.options).length?Object.keys(o.result.value.options)[o.highlightedOption.value]:o.resultCommandId.value),t&&E(t)}}),E=Object(C.useCallback)(async e=>{var n,r,f;const E=null!==(r=null===(n=o.result.value)||void 0===n?void 0:n.options[e])&&void 0!==r?r:o.commands.value[e],{action:C,canHandleQueries:R,subCommandIds:I,name:S}=E;if((null==I?void 0:I.length)>0)return void s.SELECT_GROUP(e);if(assert(C,`Command ${e} has no action`),"string"==typeof C)return await s.EXECUTE_COMMAND(e,"Loading url"),0===C.indexOf("http")&&0!==C.indexOf(document.location.origin)?null===(f=window.open(C,"_blank","noopener,noreferrer"))||void 0===f||f.focus():window.location.href=C,s.FINISH_COMMAND();s.EXECUTE_COMMAND(e,"Running command");const O=C(R?o.commandQuery.value:void 0);if(O.then)O.then(e=>{if(e&&!e.success)throw new Error(`The command "${S}" failed`)}).catch(e=>{q.error("Command error",S,e)}).finally(()=>{s.FINISH_COMMAND()});else if(O.next){const e=O;for await(const t of e)s.UPDATE_RESULT(t);s.FINISH_COMMAND()}else q.error("Command result is not a promise or generator",O);E.closeOnExecute&&t()},[o.searchWord,o.commands,o.result]),I=useFunctionRef(e=>{E(e)});return Object(C.useEffect)(()=>{if(!r)return;const windowKeyEventHandler=e=>f.current(e);return window.addEventListener("keydown",windowKeyEventHandler),()=>window.removeEventListener("keydown",windowKeyEventHandler)},[r]),R.a.createElement(ye.Provider,{value:{executeCommand:I.current}},e)},Ce=Object(C.createContext)({}),useIntl=()=>Object(C.useContext)(Ce),IntlProvider=({translate:e,children:t})=>R.a.createElement(Ce.Provider,{value:{translate:e}},t);var be=n(8);var CommandBarDialog_CommandBarDialog=({onDrag:e,open:t,toggleOpen:n})=>{const{state:{expanded:r,result:o}}=useCommandBarState(),s=Object(C.useRef)(null),f=signals_module_h(!1),E=signals_module_h({left:window.innerWidth/2-300,top:window.innerHeight/2-20}),I=signals_module_h({offsetLeft:0,offsetTop:0}),S=signals_module_h(!1),O=signals_module_y(()=>{const{left:e,top:t}=E.value;return S.value?{left:e+"px",top:t+"px",translate:"none",visibility:f.value?"hidden":"visible"}:{}}),T=Object(C.useCallback)((e,t)=>{const n=s.current.getBoundingClientRect();E.value={left:clamp(e,0,window.innerWidth-n.width),top:clamp(t,0,window.innerHeight-n.height)}},[]),A=Object(C.useCallback)(t=>{"INPUT"!==t.target.tagName&&(console.debug("dragstart"),t.dataTransfer.setData("text/plain","CommandBar"),t.dataTransfer.dropEffect="move",t.dataTransfer.effectAllowed="move",h(()=>{I.value={offsetLeft:t.clientX-s.current.offsetLeft,offsetTop:t.clientY-s.current.offsetTop},S.value=!0}),e&&e(!0))},[s.current]),P=Object(C.useCallback)(t=>{const{clientX:n,clientY:r}=t;console.debug("dragdrop",n,r,I.value),h(()=>{f.value=!1,T(n-I.value.offsetLeft,r-I.value.offsetTop)}),e&&e(!1)},[s.current]),D=Object(C.useCallback)(()=>T(E.value.left,E.value.top),[]);return Object(C.useEffect)(()=>{var e,n;if(t)return null===(n=null===(e=s.current)||void 0===e?void 0:e.parentElement)||void 0===n||n.addEventListener("drop",P),window.addEventListener("resize",D),()=>{var e,t;null===(t=null===(e=s.current)||void 0===e?void 0:e.parentElement)||void 0===t||t.removeEventListener("drop",P),window.removeEventListener("resize",D)}},[t,D,P]),t?R.a.createElement("dialog",{ref:s,className:classnames(be.commandBar,o.value&&be.hasResults),open:t,draggable:!0,onDragStart:A,onDrag:()=>f.value=!0,style:O.value,"data-testid":"CommandBarDialog"},R.a.createElement(CommandBarExecutor,{toggleOpen:n,dialogRef:s,open:t},R.a.createElement(de,null),R.a.createElement("div",{className:classnames(be.resultsWrap,r.value&&be.expanded)},r.value&&!o.value&&R.a.createElement(he,null),o.value&&R.a.createElement(CommandResultsView_CommandResultsView,null)),R.a.createElement(se,null))):null};var src_CommandBar=({commands:e,open:t,toggleOpen:n,onDrag:r,IconComponent:o,userPreferences:s,translate:f})=>R.a.createElement(IntlProvider,{translate:f},R.a.createElement(CommandBarStateProvider,{commands:e,IconComponent:o,userPreferences:s},R.a.createElement(CommandBarDialog_CommandBarDialog,{onDrag:r,open:t,toggleOpen:n})));async function fetchData(e,t,n="GET"){return t&&"GET"===n&&(e=Object.keys(t).reduce((e,n)=>e+"&"+n+"="+encodeURIComponent(t[n]),e+"?")),fetch(e,{method:n,credentials:"include",body:t&&"POST"===n?JSON.stringify(t):void 0,headers:{"Content-Type":"application/json",Accept:"application/json"}}).then(e=>{var t;if(200!==e.status)throw new Error(`The request failed with code ${e.status}: "${e.statusText}"`);return(null===(t=e.headers.get("Content-Type"))||void 0===t?void 0:t.includes("application/json"))?e.json():e.text()})}async function setPreference(e,t){return fetchData(e,t,"POST")}async function getPreferences(){return fetchData("/neos/shel-neos-commandbar/preferences/getpreferences")}async function setFavouriteCommands(e){return setPreference("/neos/shel-neos-commandbar/preferences/setfavourites",{commandIds:e})}async function addRecentCommand(e){return setPreference("/neos/shel-neos-commandbar/preferences/addrecentcommand",{commandId:e})}async function addRecentDocument(e){return setPreference("/neos/shel-neos-commandbar/preferences/addrecentdocument",{nodeContextPath:e})}async function getCommands(){return fetchData("/neos/service/data-source/shel-neos-commandbar-commands")}async function searchNeosDocs(e){return e?fetchData("/neos/service/data-source/shel-neos-commandbar-search-neos-docs",{query:e}):{}}async function searchNeosPackages(e){return e?fetchData("/neos/service/data-source/shel-neos-commandbar-search-neos-packages",{query:e}):{}}async function searchNodes(e,t){return e?fetchData("service/data-source/shel-neos-commandbar-search-nodes",{query:e,node:t}):[]}var Re=n(5),Ie=n(12),Se=n(21);const CommandBarUiPlugin_IconComponent=({icon:e,spin:t=!1})=>C.createElement(P.Icon,{icon:e,spin:t});class CommandBarUiPlugin_CommandBarUiPlugin extends C.PureComponent{constructor(e){super(e),this.buildCommandsFromHotkeys=()=>{const{hotkeyRegistry:e,handleHotkeyAction:t,config:n}=this.props;return e.getAllAsList().reduce((e,{id:r,description:o,action:s})=>(n.hotkeys.filter.includes(r)||(e[r]={name:o,description:r,icon:this.mapHotkeyIdToIcon(r),action:async()=>{t(s())},closeOnExecute:!0}),e),{})},this.buildCommandsFromWorkspaces=()=>{const{allowedTargetWorkspaces:e}=this.props.neos.configuration;return Object.keys(e).reduce((t,n)=>{const r=e[n];return r.readonly||(t[n]={name:r.title,description:r.description,icon:"cube",action:async()=>{this.props.changeBaseWorkspaceAction(r.name)},closeOnExecute:!0}),t},{})},this.buildCommandsFromEditPreviewModes=()=>{const{setEditPreviewMode:e,editPreviewModes:t,i18nRegistry:n}=this.props;return Object.keys(t).reduce((r,o)=>{const{title:s,isEditingMode:f}=t[o];return r[o]={name:n.translate(s),description:()=>this.props.editPreviewMode===o?this.translate("CommandBarUiPlugin.command.switchEditPreviewMode.active","Currently active"):"",icon:f?"pencil":"eye",action:async()=>e(o)},r},{})},this.handleAddNode=async()=>{const{addNode:e,documentNode:t,focusedNodeContextPath:n,toggleCommandBar:r}=this.props;r(),e(n||t.contextPath,void 0,"after")},this.showRecentDocuments=async function*(){const{recentDocuments:e}=this.state,{setActiveContentCanvasContextPath:t,setActiveContentCanvasSrc:n}=this.props;e.length?yield{success:!0,message:this.translate("CommandBarUiPlugin.command.recentDocuments.options","Recent documents"),options:e.reduce((e,{name:r,contextPath:o,uri:s,icon:f})=>(e[o]={id:o,name:r,icon:f,action:async()=>{n(s),t(o)},closeOnExecute:!0},e),{})}:yield{success:!1,message:this.translate("CommandBarUiPlugin.command.searchDocuments.searchFailed","Search failed")}},this.handleSearchNode=async function*(e){const{siteNode:t,setActiveContentCanvasSrc:n}=this.props;let r;yield{success:!0,message:this.translate("CommandBarUiPlugin.command.searchDocuments.searching",{query:e})};const o=await E.searchNodes(e,t.contextPath).catch(e=>{q.error("Could not search nodes",e),r=e.message});o?yield{success:!0,message:this.translate("CommandBarUiPlugin.command.searchDocuments.matches",{matches:o.length}),options:o.reduce((e,{name:t,nodetype:r,contextPath:o,uri:s,icon:f})=>s?(e[o]={id:o,name:t,category:r,action:async()=>{n(s)},closeOnExecute:!0,icon:f},e):e,{})}:yield{success:!1,message:this.translate("CommandBarUiPlugin.command.searchDocuments.searchFailed","Search failed"),view:r}},this.handleSearchNeosDocs=async function*(e){let t;yield{success:!0,message:this.translate("CommandBarUiPlugin.command.documentation.searching",{query:e},`Search for "${e}"`)};const n=await s.searchNeosDocs(e).catch(e=>{q.error("Could not search Neos docs",e),t=e.message});t||!n?yield{success:!1,message:this.translate("CommandBarUiPlugin.command.documentation.error","Search failed"),view:t}:yield{success:!0,message:this.translate("CommandBarUiPlugin.command.documentation.matches",{matches:Object.keys(n).length},Object.values(n).length+" options match your query"),options:n}},this.handleSearchNeosPackages=async function*(e){let t;yield{success:!0,message:this.translate("CommandBarUiPlugin.command.packages.searching",{query:e},`Search for "${e}"`)};const n=await f.searchNeosPackages(e).catch(e=>{q.error("Could not search Neos packages",e),t=e.message});t||!n?yield{success:!1,message:this.translate("CommandBarUiPlugin.command.packages.error","Search failed"),view:t}:yield{success:!0,message:this.translate("CommandBarUiPlugin.command.packages.matches",{matches:Object.values(n).length},Object.values(n).length+" options match your query"),options:n}},this.handlePublish=async()=>{const{publishableNodesInDocument:e,publishAction:t,baseWorkspace:n}=this.props;return t(e.map(e=>e.contextPath),n),{success:!0,message:this.translate("CommandBarUiPlugin.command.publish.success",{count:e.length},`Published ${e.length} changes`)}},this.handlePublishAll=async()=>{const{publishableNodes:e,publishAction:t,baseWorkspace:n}=this.props;return t(e.map(e=>e.contextPath),n),{success:!0,message:this.translate("CommandBarUiPlugin.command.publishAll.success",{count:e.length},`Published ${e.length} changes`)}},this.handleDiscard=async()=>{const{publishableNodesInDocument:e,discardAction:t}=this.props;return t(e.map(e=>e.contextPath)),{success:!0,message:this.translate("CommandBarUiPlugin.command.discard.success",{count:e.length},`Discarded ${e.length} changes`)}},this.handleDiscardAll=async()=>{const{publishableNodes:e,discardAction:t}=this.props;return t(e.map(e=>e.contextPath)),{success:!0,message:this.translate("CommandBarUiPlugin.command.discardAll.success",{count:e.length},`Discarded ${e.length} changes`)}},this.setDragging=e=>{this.setState({...this.state,dragging:e})},this.translate=(e,t,n)=>("string"==typeof t&&(n=t,t={}),this.props.i18nRegistry.translate(e,n,t,"Shel.Neos.CommandBar","Main")),this.state={loaded:!1,dragging:!1,favouriteCommands:[],recentCommands:[],recentDocuments:[],showBranding:!0,commands:{addNode:{name:this.translate("CommandBarUiPlugin.command.addNode","Add content"),icon:"plus",description:this.translate("CommandBarUiPlugin.command.addNode.description","Add new content"),action:this.handleAddNode},searchDocuments:{name:this.translate("CommandBarUiPlugin.command.searchDocuments","Search documents"),icon:"search",description:this.translate("CommandBarUiPlugin.command.searchDocuments.description","Search and navigate to documents"),action:this.handleSearchNode.bind(this),canHandleQueries:!0},switchWorkspace:{name:this.translate("CommandBarUiPlugin.command.switchWorkspace","Switch workspace"),icon:"exchange-alt",description:this.translate("CommandBarUiPlugin.command.switchWorkspace.description","Switch to another workspace"),subCommands:this.buildCommandsFromWorkspaces()},publishDiscard:{name:this.translate("CommandBarUiPlugin.command.publishDiscard","Publish / discard"),description:this.translate("CommandBarUiPlugin.command.publishDiscard.description","Publish or discard changes"),icon:"check",subCommands:{publish:{name:this.translate("CommandBarUiPlugin.command.publish","Publish"),description:this.translate("CommandBarUiPlugin.command.publish.description","Publish changes in this document"),icon:"check",action:this.handlePublish},publishAll:{name:this.translate("CommandBarUiPlugin.command.publishAll","Publish all"),description:this.translate("CommandBarUiPlugin.command.publishAll.description","Publish changes in all documents"),icon:"check-double",action:this.handlePublishAll},discard:{name:this.translate("CommandBarUiPlugin.command.discard","Discard"),description:this.translate("CommandBarUiPlugin.command.discard.description","Discard changes in the current document"),icon:"ban",action:this.handleDiscard},discardAll:{name:this.translate("CommandBarUiPlugin.command.discardAll","Discard all"),description:this.translate("CommandBarUiPlugin.command.discardAll.description","Discard changes in all documents"),icon:"ban",action:this.handleDiscardAll}}},quickActions:{name:this.translate("CommandBarUiPlugin.command.quickActions","Quick actions"),icon:"keyboard",description:this.translate("CommandBarUiPlugin.command.quickActions.description","Execute hotkeys"),subCommands:this.buildCommandsFromHotkeys()},switchEditPreviewMode:{name:this.translate("CommandBarUiPlugin.command.switchEditPreviewMode","Switch edit/preview mode"),icon:"pencil",description:this.translate("CommandBarUiPlugin.command.switchEditPreviewMode.description","Switch between edit and preview modes"),subCommands:this.buildCommandsFromEditPreviewModes()},openPreview:{name:this.translate("CommandBarUiPlugin.command.openPreview","Open preview"),description:this.translate("CommandBarUiPlugin.command.openPreview.description","Open the preview for current document"),icon:"external-link-alt",action:async()=>{var e;this.props.previewUrl?null===(e=window.open(this.props.previewUrl,"_blank","noopener,noreferrer"))||void 0===e||e.focus():q.warn("No preview url to open")},closeOnExecute:!0},recentDocument:{name:this.translate("CommandBarUiPlugin.command.recentDocuments","Recent documents"),description:this.translate("CommandBarUiPlugin.command.recentDocuments.description","Open a recently visited documents"),icon:"history",action:this.showRecentDocuments.bind(this)}}},e.config.features.searchNeosDocs&&(this.state.commands.searchNeosDocs={name:this.translate("CommandBarUiPlugin.command.documentation","Documentation"),description:this.translate("CommandBarUiPlugin.command.documentation.description","Browse or search the Neos documentation"),icon:"book",canHandleQueries:!0,action:this.handleSearchNeosDocs.bind(this)}),e.config.features.searchNeosPackages&&(this.state.commands.searchNeosPackages={name:this.translate("CommandBarUiPlugin.command.packages","Packages"),description:this.translate("CommandBarUiPlugin.command.packages.description","Search for Neos packages"),icon:"boxes",canHandleQueries:!0,action:this.handleSearchNeosPackages.bind(this)})}mapHotkeyIdToIcon(e){let t=e.split(".").pop();switch(t.indexOf("toggle")>=0&&(t="toggle"),t){case"toggle":return"toggle-on";case"reload":return"redo";case"cancel":case"close":return"window-close";case"apply":return"check"}return"neos"}async componentDidMount(){const{plugins:e}=this.props;let t={};if(e)for(const n of Object.keys(e)){const r=e[n];try{const e=await r();Object.keys(e).length>0&&(t={...t,...e})}catch(e){q.warn("Could not load commands from plugin "+n,e)}}const n=await o.getCommands().catch(e=>{q.error("Failed to load commands",e)}),s=await r.getPreferences().catch(e=>{q.error("Failed to load user preferences",e)});s&&n&&(this.setState(e=>({loaded:!0,...s,commands:{...e.commands,...n,...t}})),document.addEventListener("keydown",e=>{"k"===e.key&&(e.metaKey||e.ctrlKey)&&(e.stopPropagation(),e.preventDefault(),this.props.toggleCommandBar())}))}async componentDidUpdate(e){var t,n;(null===(t=e.documentNode)||void 0===t?void 0:t.contextPath)!=(null===(n=this.props.documentNode)||void 0===n?void 0:n.contextPath)&&addRecentDocument(this.props.documentNode.contextPath).then(e=>{this.setState({recentDocuments:e})})}render(){const{commandBarOpen:e,toggleCommandBar:t}=this.props,{commands:n,loaded:o,dragging:s,favouriteCommands:f,recentCommands:E,recentDocuments:R,showBranding:I}=this.state;return C.createElement("div",{className:classnames(Ie.commandBarToolbarComponent,Se.commandBarTheme)},C.createElement(ge,{handleToggle:t,disabled:!o,label:this.translate("ToggleButton.label","Search…"),title:this.translate("ToggleButton.title","Search for commands"),active:e}),o&&C.createElement("div",{className:[Ie.fullScreenLayer,e&&Ie.open].join(" "),onDragOver:e=>e.preventDefault(),style:s?{pointerEvents:"all"}:null},C.createElement(src_CommandBar,{open:e,commands:n,toggleOpen:t,onDrag:this.setDragging,IconComponent:CommandBarUiPlugin_IconComponent,userPreferences:{favouriteCommands:f,recentCommands:E,recentDocuments:R,showBranding:I,addRecentCommand:r.addRecentCommand,addRecentDocument:r.addRecentDocument,setFavouriteCommands:r.setFavouriteCommands},translate:this.translate})))}}CommandBarUiPlugin_CommandBarUiPlugin.propTypes={addNode:O.a.func.isRequired,baseWorkspace:O.a.string.isRequired,commandBarOpen:O.a.bool,config:O.a.object.isRequired,discardAction:O.a.func.isRequired,documentNode:O.a.object,editPreviewMode:O.a.string.isRequired,editPreviewModes:O.a.object.isRequired,focusedNodeContextPath:O.a.string,handleHotkeyAction:O.a.func.isRequired,hotkeyRegistry:O.a.object.isRequired,i18nRegistry:O.a.object.isRequired,isWorkspaceReadOnly:O.a.bool,publishAction:O.a.func.isRequired,publishableNodes:O.a.array,publishableNodesInDocument:O.a.array,previewUrl:O.a.string,setActiveContentCanvasSrc:O.a.func.isRequired,setActiveContentCanvasContextPath:O.a.func.isRequired,setEditPreviewMode:O.a.func.isRequired,siteNode:O.a.object,toggleCommandBar:O.a.func.isRequired,neos:O.a.object.isRequired};const Oe=Object(T.neos)(e=>({i18nRegistry:e.get("i18n"),hotkeyRegistry:e.get("hotkeys"),config:e.get("frontendConfiguration").get("Shel.Neos.CommandBar:CommandBar"),nodeTypesRegistry:e.get("@neos-project/neos-ui-contentrepository"),editPreviewModes:e.get("frontendConfiguration").get("editPreviewModes"),plugins:e.get("Shel.Neos.CommandBar").getChildrenAsObject("plugins")}));t.default=Object(I.connect)(()=>({}),{toggleCommandBar:Re.actions.toggleCommandBar,addNode:A.actions.CR.Nodes.commenceCreation,setEditPreviewMode:A.actions.UI.EditPreviewMode.set,publishAction:A.actions.CR.Workspaces.publish,discardAction:A.actions.CR.Workspaces.commenceDiscard,setActiveContentCanvasSrc:A.actions.UI.ContentCanvas.setSrc,setActiveContentCanvasContextPath:A.actions.CR.Nodes.setDocumentNode,changeBaseWorkspaceAction:A.actions.CR.Workspaces.changeBaseWorkspace})(Object(I.connect)(e=>({siteNode:A.selectors.CR.Nodes.siteNodeSelector(e),documentNode:A.selectors.CR.Nodes.documentNodeSelector(e),focusedNodeContextPath:A.selectors.CR.Nodes.focusedNodePathSelector(e),publishableNodes:A.selectors.CR.Workspaces.publishableNodesSelector(e),publishableNodesInDocument:A.selectors.CR.Workspaces.publishableNodesInDocumentSelector(e),isWorkspaceReadOnly:A.selectors.CR.Workspaces.isWorkspaceReadOnlySelector(e),baseWorkspace:A.selectors.CR.Workspaces.baseWorkspaceSelector(e),commandBarOpen:Re.selectors.commandBarOpen(e),editPreviewMode:A.selectors.UI.EditPreviewMode.currentEditPreviewMode(e),previewUrl:Re.selectors.previewUrl(e)}),e=>({handleHotkeyAction:e}))(Oe(CommandBarUiPlugin_CommandBarUiPlugin)))}]);
//# sourceMappingURL=Plugin.js.map