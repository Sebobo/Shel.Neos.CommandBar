{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:////Users/sebastianhelzle/Workspace/1und1/access-shops-dist/app/Packages/Plugins/Shel.Neos.CommandBar/node_modules/@neos-project/neos-ui-extensibility/src/shims/vendor/react/index.js","webpack:////Users/sebastianhelzle/Workspace/1und1/access-shops-dist/app/Packages/Plugins/Shel.Neos.CommandBar/node_modules/@neos-project/neos-ui-extensibility/src/shims/vendor/prop-types/index.js","webpack:////Users/sebastianhelzle/Workspace/1und1/access-shops-dist/app/Packages/Plugins/Shel.Neos.CommandBar/node_modules/@neos-project/neos-ui-extensibility/src/shims/neosProjectPackages/neos-ui-redux-store/index.js","webpack:////Users/sebastianhelzle/Workspace/1und1/access-shops-dist/app/Packages/Plugins/Shel.Neos.CommandBar/node_modules/@neos-project/neos-ui-extensibility/dist/readFromConsumerApi.js","webpack:///../commandbar/src/components/CommandListItem/CommandListItem.module.css?723f","webpack:///../commandbar/src/components/CommandBarDialog/CommandBarDialog.module.css?1489","webpack:///./src/actions/index.ts","webpack:///../commandbar/src/components/SearchBox/SearchBox.module.css?0a5b","webpack:///../commandbar/src/components/CommandBarFooter/CommandBarFooter.module.css?04f4","webpack:///../commandbar/src/components/CommandList/CommandListing.module.css?1951","webpack:///../commandbar/src/components/CommandResultsView/CommandResultsView.module.css?c238","webpack:///../commandbar/src/components/ToggleButton/ToggleButton.module.css?c05f","webpack:///./src/CommandBarUiPlugin.module.css?b5cb","webpack:////Users/sebastianhelzle/Workspace/1und1/access-shops-dist/app/Packages/Plugins/Shel.Neos.CommandBar/node_modules/@neos-project/neos-ui-extensibility/src/shims/vendor/redux-actions/index.js","webpack:////Users/sebastianhelzle/Workspace/1und1/access-shops-dist/app/Packages/Plugins/Shel.Neos.CommandBar/node_modules/@neos-project/neos-ui-extensibility/src/shims/vendor/react-redux/index.js","webpack:///../commandbar/src/components/CommandBarHeader/CommandBarHeader.module.css?71c1","webpack:////Users/sebastianhelzle/Workspace/1und1/access-shops-dist/app/Packages/Plugins/Shel.Neos.CommandBar/node_modules/@neos-project/neos-ui-extensibility/dist/registry/SynchronousRegistry.js","webpack:////Users/sebastianhelzle/Workspace/1und1/access-shops-dist/app/Packages/Plugins/Shel.Neos.CommandBar/node_modules/@neos-project/neos-ui-extensibility/src/shims/neosProjectPackages/neos-ui-decorators/index.js","webpack:////Users/sebastianhelzle/Workspace/1und1/access-shops-dist/app/Packages/Plugins/Shel.Neos.CommandBar/node_modules/@neos-project/neos-ui-extensibility/src/shims/neosProjectPackages/react-ui-components/index.js","webpack:///../commandbar/src/components/IconWrapper/IconWrapper.module.css?2df3","webpack:///../commandbar/src/components/CommandBarFooter/Branding.module.css?63c0","webpack:///../commandbar/src/Theme.module.css?9f41","webpack:///./src/index.js","webpack:///./src/manifest.js","webpack:////Users/sebastianhelzle/Workspace/1und1/access-shops-dist/app/Packages/Plugins/Shel.Neos.CommandBar/node_modules/@neos-project/neos-ui-extensibility/dist/index.js","webpack:////Users/sebastianhelzle/Workspace/1und1/access-shops-dist/app/Packages/Plugins/Shel.Neos.CommandBar/node_modules/@neos-project/neos-ui-extensibility/dist/createConsumerApi.js","webpack:////Users/sebastianhelzle/Workspace/1und1/access-shops-dist/app/Packages/Plugins/Shel.Neos.CommandBar/node_modules/@neos-project/neos-ui-extensibility/dist/manifest.js","webpack:////Users/sebastianhelzle/Workspace/1und1/access-shops-dist/app/Packages/Plugins/Shel.Neos.CommandBar/node_modules/@neos-project/neos-ui-extensibility/dist/registry/index.js","webpack:////Users/sebastianhelzle/Workspace/1und1/access-shops-dist/app/Packages/Plugins/Shel.Neos.CommandBar/node_modules/@neos-project/neos-ui-extensibility/dist/registry/AbstractRegistry.js","webpack:////Users/sebastianhelzle/Workspace/1und1/access-shops-dist/app/Packages/Plugins/Shel.Neos.CommandBar/node_modules/@neos-project/positional-array-sorter/dist/positionalArraySorter.js","webpack:////Users/sebastianhelzle/Workspace/1und1/access-shops-dist/app/Packages/Plugins/Shel.Neos.CommandBar/node_modules/tslib/tslib.es6.js","webpack:////Users/sebastianhelzle/Workspace/1und1/access-shops-dist/app/Packages/Plugins/Shel.Neos.CommandBar/node_modules/@neos-project/neos-ui-extensibility/dist/registry/SynchronousMetaRegistry.js","webpack:///../commandbar/src/hooks/useFunctionRef.ts","webpack:////Users/sebastianhelzle/Workspace/1und1/access-shops-dist/app/Packages/Plugins/Shel.Neos.CommandBar/node_modules/@preact/signals-core/dist/signals-core.module.js","webpack:////Users/sebastianhelzle/Workspace/1und1/access-shops-dist/app/Packages/Plugins/Shel.Neos.CommandBar/node_modules/@preact/signals-react/dist/signals.module.js","webpack:///../commandbar/src/helpers/flattenCommands.ts","webpack:///../commandbar/src/helpers/logger.ts","webpack:///../commandbar/src/helpers/clamp.ts","webpack:////Users/sebastianhelzle/Workspace/1und1/access-shops-dist/app/Packages/Plugins/Shel.Neos.CommandBar/node_modules/@leeoniya/ufuzzy/dist/uFuzzy.esm.js","webpack:///../commandbar/src/helpers/filterCommands.ts","webpack:///../commandbar/src/helpers/asset.ts","webpack:///../commandbar/src/helpers/classnames.ts","webpack:///../commandbar/src/state/commandBarMachine.ts","webpack:///../commandbar/src/state/commandBarReducer.ts","webpack:///../commandbar/src/components/IconWrapper/IconWrapper.tsx","webpack:///../commandbar/src/components/CommandBarFooter/Branding.tsx","webpack:///../commandbar/src/components/Icons/IconBack.tsx","webpack:///../commandbar/src/components/Icons/IconNeos.tsx","webpack:///../commandbar/src/components/Icons/IconSpinner.tsx","webpack:///../commandbar/src/components/Icons/IconStar.tsx","webpack:///../commandbar/src/components/Icons/IconPlay.tsx","webpack:///../commandbar/src/components/Icons/IconRepeat.tsx","webpack:///../commandbar/src/components/CommandBarFooter/CommandBarFooter.tsx","webpack:///../commandbar/src/components/SearchBox/SearchBox.tsx","webpack:///../commandbar/src/components/CommandBarHeader/CommandBarHeader.tsx","webpack:///../commandbar/src/components/CommandListItem/CommandListItem.tsx","webpack:///../commandbar/src/components/CommandList/CommandList.tsx","webpack:///../commandbar/src/components/CommandResultsView/CommandResultsView.tsx","webpack:///../commandbar/src/components/ToggleButton/ToggleButton.tsx","webpack:///../commandbar/src/state/CommandBarStateProvider.tsx","webpack:///../commandbar/src/state/CommandBarExecutor.tsx","webpack:///../commandbar/src/state/IntlProvider.tsx","webpack:///../commandbar/src/components/CommandBarDialog/CommandBarDialog.tsx","webpack:///../commandbar/src/CommandBar.tsx","webpack:///../neos-api/src/fetch.ts","webpack:///../neos-api/src/preferences.ts","webpack:///../neos-api/src/commands.ts","webpack:///../neos-api/src/documentation.ts","webpack:///../neos-api/src/packages.ts","webpack:///../neos-api/src/nodes.ts","webpack:///./src/CommandBarUiPlugin.tsx"],"names":["installedModules","__webpack_require__","moduleId","exports","module","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","getDefault","getModuleExports","object","property","prototype","hasOwnProperty","p","s","React","PropTypes","NeosUiReduxStore","__read","iterator","e","ar","next","done","push","error","__spreadArray","to","from","pack","arguments","length","Array","slice","concat","readFromConsumerApi","_a","args","_i","window","apply","Error","actionTypes","TOGGLE_COMMAND_BAR","actions","toggleCommandBar","reducer","state","action","_b","_c","plugins","commandBar","open","undefined","payload","selectors","commandBarOpen","previewUrl","ui","contentCanvas","reduxActions","reactRedux","extendStatics","__extends","b","setPrototypeOf","__proto__","TypeError","String","__","this","constructor","__importDefault","mod","AbstractRegistry_1","require","positional_array_sorter_1","SynchronousRegistry","_super","description","_this","_registry","set","position","entry","indexOfItemWithTheSameKey","findIndex","item","console","result","find","_getChildrenWrapped","searchKey","unsortedChildren","filter","indexOf","getChildrenAsObject","forEach","getChildren","map","has","Boolean","_getAllWrapped","getAllAsObject","getAllAsList","assign","id","NeosUiDecorators","ReactUiComponents","globalRegistry","frontendConfiguration","enabled","CommandBarUiPlugin","SynchronousMetaRegistry","createConsumerApi","createConsumerApi_1","readFromConsumerApi_1","index_1","manifest_1","createReadOnlyValue","writable","configurable","manifests","exposureMap","api","keys","identifier","options","bootstrap","SynchronousRegistry_1","SynchronousMetaRegistry_1","AbstractRegistry","SERIAL_VERSION_UID","tslib_1","positionalArraySorter","subject","idKey","e_1","e_2","e_3","e_4","_d","e_5","_e","e_6","_f","e_7","_g","positionAccessor","indexMapping","middleKeys","startKeys","endKeys","beforeKeys","afterKeys","index","positionValue","invalid","startsWith","weight","weightMatch","match","Number","reference","numberPosition","parseFloat","isNaN","isFinite","resultStart","resultMiddle","resultEnd","processedKeys","sortedWeights","dict","asc","weights","x","sort","a","reverse","addToResults","e_8","e_9","beforeWeights","beforeWeights_1","__values","beforeWeights_1_1","e_8_1","afterWeights","afterWeights_1","afterWeights_1_1","e_9_1","_h","_j","e_1_1","_k","_l","e_2_1","_m","_o","e_3_1","_p","_q","_r","_s","e_5_1","e_4_1","_t","_u","_v","_w","e_7_1","e_6_1","__spread","__assign","__rest","getOwnPropertySymbols","propertyIsEnumerable","__decorate","decorators","target","desc","getOwnPropertyDescriptor","Reflect","decorate","__param","paramIndex","decorator","__metadata","metadataKey","metadataValue","metadata","__awaiter","thisArg","_arguments","P","generator","Promise","resolve","reject","fulfilled","step","rejected","adopt","then","__generator","body","f","y","g","_","label","sent","trys","ops","verb","v","op","pop","__createBinding","k","k2","__exportStar","__spreadArrays","il","j","jl","__await","__asyncGenerator","asyncIterator","q","resume","fulfill","settle","shift","__asyncDelegator","__asyncValues","__makeTemplateObject","cooked","raw","__importStar","default","__classPrivateFieldGet","receiver","privateMap","__classPrivateFieldSet","useFunctionRef","fn","fnRef","current","h","S","u","U","w","subscribe","valueOf","toString","peek","N","createElement","WeakMap","$$typeof","defineProperties","type","data","props","ref","ReactCurrentDispatcher","useCallback","test","useReducer","Map","flattenCommands","commands","parentId","reduce","commandList","commandId","icon","subCommands","canHandleQueries","closeOnExecute","category","executeManually","absoluteCommandId","subCommandIds","subCommandId","PREFIX","ok","message","log","warn","debug","clamp","min","max","Math","cmp","Intl","Collator","compare","NEGS_RE","OPTS","interSplit","intraSplit","intraBound","interLft","interRgt","interChars","interIns","Infinity","intraChars","intraIns","intraContr","intraMode","intraSlice","intraSub","intraTrn","intraDel","intraFilt","term","info","haystack","needle","idx","chars","terms","interLft2","interLft1","start","ia","ib","lazyRepeat","limit","uFuzzy","opts","_intraSplit","_interSplit","_intraBound","intraRules","_intraSlice","_intraIns","_intraSub","_intraTrn","_intraDel","plen","withIntraSplit","RegExp","trimRe","contrsRe","split","replace","toLowerCase","prepQuery","capt","interOR","parts","reTpl","contrs","fill","pi","lftIdx","rgtIdx","lftChar","rgtChar","numChars","variants","intraInsTpl","join","preTpl","sufTpl","interCharsTpl","idxs","out","query","withIntraBound","interBound","queryR","partsLen","len","field","interRgt2","interRgt1","ranges","mayDiscard","ii","mhstr","idxAcc","disc","lft2","lft1","rgt2","rgt1","inter","intra","refine","group","termLen","groupLen","fullMatch","idxOf","refineMatch","lftCharIdx","rgtCharIdx","isPre","isSuf","junk","junkIdx","m2","found","re","exec","charIdx","refLen","ri","lastRi","idxInNext","matchLen","offset","prepend","search","outOfOrder","infoThresh","preFiltered","negsRe","needles","matches","negs","trim","terms2","ti","permute","perm","matchedIdxs","Set","ni","size","preFiltered2","matched","add","retInfo","retOrder","acc","_info","order","_search","latinize","accents","A","E","I","O","C","accentsMap","accentsTpl","accentsRe","replacer","strings","arr","_mark","part","_append","highlight","str","mark","accum","append","tmp","substring","fr","uf","assert","condition","classnames","STATUS","TRANSITION","ACTION","machine","initial","COLLAPSED","states","collapsed","on","UPDATE_SEARCH","IDLE","EXPAND","SET_SEARCH_WORD","REFRESH_COMMANDS","HIGHLIGHT_NEXT_ITEM","idle","RESET_HIGHLIGHT","HIGHLIGHT_NEXT_COMMAND","HIGHLIGHT_PREVIOUS_ITEM","HIGHLIGHT_PREVIOUS_COMMAND","CANCEL","RESET_SEARCH_OR_LEAVE_GROUP","EXECUTE_COMMAND","EXECUTING_COMMAND","ADD_RECENTLY_USED","SET_ACTIVE_COMMAND","GO_TO_PARENT_GROUP","LEAVE_GROUP","SELECT_GROUP","RESET_SEARCH","SET_GROUP","ADD_FAVOURITE","REMOVE_FAVOURITE","executingCommand","UPDATE_RESULT","DISPLAYING_RESULT","FINISH_COMMAND","UNSET_ACTIVE_COMMAND","displayingResult","UPDATE_COMMAND_QUERY","SET_COMMAND_QUERY","RESET_OPTION_HIGHLIGHT","HIGHLIGHT_NEXT_OPTION","HIGHLIGHT_PREVIOUS_OPTION","UNSET_RESULT","runAction","nextState","event","searchWord","highlightedItem","availableCommandIds","filterCommands","selectedCommandGroup","favourites","recentCommands","availableCommands","values","command","includes","sortCommands","favouriteCommands","aIsRecent","bIsRecent","aIsFavourite","bIsFavourite","localeCompare","availableCommandNames","indices","highlightedOption","commandQuery","commandQueryDirty","expanded","activeCommandId","activeCommandMessage","success","view","resultCommandId","unshift","commandBarReducer","transition","actionCallback","nextStateNode","status","memo","children","className","showBranding","useCommandBarState","translate","useIntl","href","title","rel","xmlns","width","height","viewBox","gradientUnits","x1","y1","x2","y2","stopColor","transform","IconBack","IconNeos","IconSpinner","IconStar","IconPlay","IconRepeat","Icon","runningCommand","updateResultsTimer","executeCommand","useCommandExecutor","inputRef","activeCommand","handleChange","clearTimeout","setTimeout","handleKeyPress","preventDefault","stopPropagation","focus","Fragment","placeholder","disabled","autoFocus","onChange","onKeyUp","onClick","isDisplayingResults","CommandListItem","onItemSelect","highlightedId","onToggleFavourite","commandType","getCommandType","isHighlighted","isFavourite","navRef","useRef","querySelector","scrollIntoView","behavior","block","handleToggleFavourite","suggestions","highlightedCommand","isLoading","highlightedIndex","handleToggle","active","CommandBarContext","CommandBarStateProvider","IconComponent","userPreferences","dispatch","createAppState","initialState","commandBarState","async","addRecentCommand","catch","setFavouriteCommands","spin","Provider","CommandInputContext","createContext","useContext","CommandBarExecutor","toggleOpen","dialogRef","handleKeyEnteredRef","defaultPrevented","metaKey","ctrlKey","contains","document","location","origin","actionResult","finally","executeCommandRef","windowKeyEventHandler","addEventListener","removeEventListener","IntlContext","IntlProvider","onDrag","isDragging","dialogPosition","left","innerWidth","top","innerHeight","dragStateOffset","offsetLeft","offsetTop","hasBeenDragged","dialogStyle","visibility","reposition","dialogSize","getBoundingClientRect","handleDragStart","tagName","dataTransfer","setData","dropEffect","effectAllowed","clientX","clientY","handleDragDrop","onResize","parentElement","draggable","onDragStart","style","fetchData","endpoint","params","method","url","encodeURIComponent","fetch","credentials","JSON","stringify","headers","Accept","response","statusText","json","text","setPreference","getPreferences","commandIds","addRecentDocument","nodeContextPath","getCommands","searchNeosDocs","searchNeosPackages","searchNodes","node","super","buildCommandsFromHotkeys","hotkeyRegistry","handleHotkeyAction","config","carry","hotkeys","mapHotkeyIdToIcon","buildCommandsFromWorkspaces","allowedTargetWorkspaces","neos","configuration","workspaceName","workspace","readonly","changeBaseWorkspaceAction","buildCommandsFromEditPreviewModes","setEditPreviewMode","editPreviewModes","i18nRegistry","isEditingMode","editPreviewMode","handleAddNode","addNode","documentNode","focusedNodeContextPath","contextPath","showRecentDocuments","recentDocuments","setActiveContentCanvasContextPath","setActiveContentCanvasSrc","uri","handleSearchNode","siteNode","results","nodetype","handleSearchNeosDocs","handleSearchNeosPackages","handlePublish","publishableNodesInDocument","publishAction","baseWorkspace","count","handlePublishAll","publishableNodes","handleDiscard","discardAction","handleDiscardAll","setDragging","dragging","setState","paramsOrFallback","fallback","loaded","searchDocuments","switchWorkspace","publishDiscard","publish","publishAll","discard","discardAll","quickActions","switchEditPreviewMode","openPreview","recentDocument","features","actionName","pluginCommands","pluginName","plugin","pluginResult","preferences","prev","prevProps","onDragOver","pointerEvents","propTypes","func","isRequired","string","bool","isWorkspaceReadOnly","array","mapGlobalRegistryToProps","nodeTypesRegistry","CR","Nodes","commenceCreation","UI","EditPreviewMode","Workspaces","commenceDiscard","ContentCanvas","setSrc","setDocumentNode","changeBaseWorkspace","siteNodeSelector","documentNodeSelector","focusedNodePathSelector","publishableNodesSelector","publishableNodesInDocumentSelector","isWorkspaceReadOnlySelector","baseWorkspaceSelector","currentEditPreviewMode"],"mappings":"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","file":"Plugin.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 22);\n","import readFromConsumerApi from '../../../../dist/readFromConsumerApi';\n\nmodule.exports = readFromConsumerApi('vendor')().React;\n","import readFromConsumerApi from '../../../../dist/readFromConsumerApi';\n\nmodule.exports = readFromConsumerApi('vendor')().PropTypes;\n","import readFromConsumerApi from '../../../../dist/readFromConsumerApi';\n\nmodule.exports = readFromConsumerApi('NeosProjectPackages')().NeosUiReduxStore;\n","\"use strict\";\nvar __read = (this && this.__read) || function (o, n) {\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\n    if (!m) return o;\n    var i = m.call(o), r, ar = [], e;\n    try {\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\n    }\n    catch (error) { e = { error: error }; }\n    finally {\n        try {\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\n        }\n        finally { if (e) throw e.error; }\n    }\n    return ar;\n};\nvar __spreadArray = (this && this.__spreadArray) || function (to, from, pack) {\n    if (pack || arguments.length === 2) for (var i = 0, l = from.length, ar; i < l; i++) {\n        if (ar || !(i in from)) {\n            if (!ar) ar = Array.prototype.slice.call(from, 0, i);\n            ar[i] = from[i];\n        }\n    }\n    return to.concat(ar || Array.prototype.slice.call(from));\n};\nexports.__esModule = true;\nfunction readFromConsumerApi(key) {\n    return function () {\n        var _a;\n        var args = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            args[_i] = arguments[_i];\n        }\n        if (window['@Neos:HostPluginAPI'] && window['@Neos:HostPluginAPI'][\"@\".concat(key)]) {\n            return (_a = window['@Neos:HostPluginAPI'])[\"@\".concat(key)].apply(_a, __spreadArray([], __read(args), false));\n        }\n        throw new Error('You are trying to read from a consumer api that hasn\\'t been initialized yet!');\n    };\n}\nexports[\"default\"] = readFromConsumerApi;\n//# sourceMappingURL=readFromConsumerApi.js.map","// extracted by mini-css-extract-plugin\nmodule.exports = {\"commandListItem\":\"CommandListItem-module__commandListItem___2u7xD\",\"highlighted\":\"CommandListItem-module__highlighted___1LR6R\",\"disabled\":\"CommandListItem-module__disabled___7wCym\",\"label\":\"CommandListItem-module__label___1bznO\",\"description\":\"CommandListItem-module__description___2RTG3\",\"type\":\"CommandListItem-module__type___1C7PR\",\"favouriteButton\":\"CommandListItem-module__favouriteButton___3n3yV\",\"isFavourite\":\"CommandListItem-module__isFavourite___KSM9p\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"commandBar\":\"CommandBarDialog-module__commandBar___1Hb5s\",\"hasResults\":\"CommandBarDialog-module__hasResults___3iM8B\",\"resultsWrap\":\"CommandBarDialog-module__resultsWrap___2gd3U\",\"expanded\":\"CommandBarDialog-module__expanded___jby7g\",\"split\":\"CommandBarDialog-module__split___66TVs\"};","import { createAction, handleActions } from 'redux-actions';\nexport const actionTypes = {\n    TOGGLE_COMMAND_BAR: 'TOGGLE_COMMAND_BAR',\n};\nconst toggleCommandBar = createAction(actionTypes.TOGGLE_COMMAND_BAR);\nexport const actions = {\n    toggleCommandBar,\n};\nexport const reducer = handleActions({\n    TOGGLE_COMMAND_BAR: (state, action) => {\n        var _a, _b, _c;\n        return ({\n            ...state,\n            plugins: {\n                ...state.plugins,\n                commandBar: {\n                    open: ((_a = action.payload) === null || _a === void 0 ? void 0 : _a.open) !== undefined ? action.payload.open : !((_c = (_b = state.plugins) === null || _b === void 0 ? void 0 : _b.commandBar) === null || _c === void 0 ? void 0 : _c.open),\n                },\n            },\n        });\n    },\n}, {\n    plugins: {\n        commandBar: {\n            open: false,\n        },\n    },\n});\nexport const selectors = {\n    commandBarOpen: (state) => { var _a, _b; return (_b = (_a = state.plugins) === null || _a === void 0 ? void 0 : _a.commandBar) === null || _b === void 0 ? void 0 : _b.open; },\n    previewUrl: (state) => { var _a, _b; return (_b = (_a = state.ui) === null || _a === void 0 ? void 0 : _a.contentCanvas) === null || _b === void 0 ? void 0 : _b.previewUrl; },\n};\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"searchBox\":\"SearchBox-module__searchBox___1SEtn\",\"expandButton\":\"SearchBox-module__expandButton___B2jYv\",\"executeButton\":\"SearchBox-module__executeButton___3hg_l\",\"commandQueryDirty\":\"SearchBox-module__commandQueryDirty___s_CVX\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"commandBarFooter\":\"CommandBarFooter-module__commandBarFooter___2mcre\",\"breadcrumb\":\"CommandBarFooter-module__breadcrumb___1Ul24\",\"activity\":\"CommandBarFooter-module__activity___2GXJU\",\"spinner\":\"CommandBarFooter-module__spinner___1mRmX\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"results\":\"CommandListing-module__results___23Rve\",\"noResults\":\"CommandListing-module__noResults___Mb89V\",\"disabled\":\"CommandListing-module__disabled___6gpPj\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"commandResultsView\":\"CommandResultsView-module__commandResultsView___xLqwb\",\"message\":\"CommandResultsView-module__message___NhUkR\",\"results\":\"CommandResultsView-module__results___1t6jB\",\"noResults\":\"CommandResultsView-module__noResults___2ksIF\",\"disabled\":\"CommandResultsView-module__disabled___OmNvX\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"toggleButton\":\"ToggleButton-module__toggleButton___2wPs-\",\"toggleButtonActive\":\"ToggleButton-module__toggleButtonActive___3bWD5\",\"buttonIcon\":\"ToggleButton-module__buttonIcon___UjFjw\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"fullScreenLayer\":\"CommandBarUiPlugin-module__fullScreenLayer___1cUx4\",\"open\":\"CommandBarUiPlugin-module__open___1Bjxj\",\"commandBarToolbarComponent\":\"CommandBarUiPlugin-module__commandBarToolbarComponent___1agRY\"};","import readFromConsumerApi from '../../../../dist/readFromConsumerApi';\n\nmodule.exports = readFromConsumerApi('vendor')().reduxActions;\n","import readFromConsumerApi from '../../../../dist/readFromConsumerApi';\n\nmodule.exports = readFromConsumerApi('vendor')().reactRedux;\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"commandBarHeader\":\"CommandBarHeader-module__commandBarHeader___3Y2hR\",\"backButton\":\"CommandBarHeader-module__backButton___1qIGu\"};","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nexports.__esModule = true;\nvar AbstractRegistry_1 = __importDefault(require(\"./AbstractRegistry\"));\nvar positional_array_sorter_1 = __importDefault(require(\"@neos-project/positional-array-sorter\"));\nvar SynchronousRegistry = (function (_super) {\n    __extends(SynchronousRegistry, _super);\n    function SynchronousRegistry(description) {\n        var _this = _super.call(this, description) || this;\n        _this._registry = [];\n        return _this;\n    }\n    SynchronousRegistry.prototype.set = function (key, value, position) {\n        if (position === void 0) { position = 0; }\n        if (typeof key !== 'string') {\n            throw new Error('Key must be a string');\n        }\n        if (typeof position !== 'string' && typeof position !== 'number') {\n            throw new Error('Position must be a string or a number');\n        }\n        var entry = { key: key, value: value };\n        if (position) {\n            entry.position = position;\n        }\n        var indexOfItemWithTheSameKey = this._registry.findIndex(function (item) { return item.key === key; });\n        if (indexOfItemWithTheSameKey === -1) {\n            this._registry.push(entry);\n        }\n        else {\n            this._registry[indexOfItemWithTheSameKey] = entry;\n        }\n        return value;\n    };\n    SynchronousRegistry.prototype.get = function (key) {\n        if (typeof key !== 'string') {\n            console.error('Key must be a string');\n            return null;\n        }\n        var result = this._registry.find(function (item) { return item.key === key; });\n        return result ? result.value : null;\n    };\n    SynchronousRegistry.prototype._getChildrenWrapped = function (searchKey) {\n        var unsortedChildren = this._registry.filter(function (item) { return item.key.indexOf(searchKey + '/') === 0; });\n        return (0, positional_array_sorter_1[\"default\"])(unsortedChildren);\n    };\n    SynchronousRegistry.prototype.getChildrenAsObject = function (searchKey) {\n        var result = {};\n        this._getChildrenWrapped(searchKey).forEach(function (item) {\n            result[item.key] = item.value;\n        });\n        return result;\n    };\n    SynchronousRegistry.prototype.getChildren = function (searchKey) {\n        return this._getChildrenWrapped(searchKey).map(function (item) { return item.value; });\n    };\n    SynchronousRegistry.prototype.has = function (key) {\n        if (typeof key !== 'string') {\n            console.error('Key must be a string');\n            return false;\n        }\n        return Boolean(this._registry.find(function (item) { return item.key === key; }));\n    };\n    SynchronousRegistry.prototype._getAllWrapped = function () {\n        return (0, positional_array_sorter_1[\"default\"])(this._registry);\n    };\n    SynchronousRegistry.prototype.getAllAsObject = function () {\n        var result = {};\n        this._getAllWrapped().forEach(function (item) {\n            result[item.key] = item.value;\n        });\n        return result;\n    };\n    SynchronousRegistry.prototype.getAllAsList = function () {\n        return this._getAllWrapped().map(function (item) { return Object.assign({ id: item.key }, item.value); });\n    };\n    return SynchronousRegistry;\n}(AbstractRegistry_1[\"default\"]));\nexports[\"default\"] = SynchronousRegistry;\n//# sourceMappingURL=SynchronousRegistry.js.map","import readFromConsumerApi from '../../../../dist/readFromConsumerApi';\n\nmodule.exports = readFromConsumerApi('NeosProjectPackages')().NeosUiDecorators;\n","import readFromConsumerApi from '../../../../dist/readFromConsumerApi';\n\nmodule.exports = readFromConsumerApi('NeosProjectPackages')().ReactUiComponents;\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"iconWrap\":\"IconWrapper-module__iconWrap___1Z3nD\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"madeWithLove\":\"Branding-module__madeWithLove___2ibna\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"commandBarTheme\":\"Theme-module__commandBarTheme___1Z1-S\"};","require('./manifest');\n","import manifest, { SynchronousRegistry } from '@neos-project/neos-ui-extensibility';\n\nimport { reducer } from './actions';\nimport CommandBarUiPlugin from './CommandBarUiPlugin';\n\nmanifest('Shel.Neos.CommandBar:CommandBar', {}, (globalRegistry, { frontendConfiguration }) => {\n    /** @type {{ enabled: boolean, features: { loadTestCommands: boolean } }} pluginConfig */\n    const pluginConfig = frontendConfiguration['Shel.Neos.CommandBar:CommandBar'];\n    const { enabled } = pluginConfig;\n\n    if (!enabled) {\n        return;\n    }\n\n    // Create our new registry for 3rd party command bar plugins\n    globalRegistry.set(\n        'Shel.Neos.CommandBar',\n        new SynchronousRegistry(`\n        # Shel.Neos.CommandBar 3rd party commands\n    `)\n    );\n\n    // Register commandbar component in the primary toolbar\n    globalRegistry.get('containers').set('PrimaryToolbar/Middle/CommandBar', CommandBarUiPlugin);\n\n    // Register reducer\n    globalRegistry.get('reducers').set('Shel.Neos.CommandBar', { reducer });\n});\n","\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nexports.__esModule = true;\nexports.SynchronousMetaRegistry = exports.SynchronousRegistry = exports.readFromConsumerApi = exports.createConsumerApi = void 0;\nvar createConsumerApi_1 = __importDefault(require(\"./createConsumerApi\"));\nexports.createConsumerApi = createConsumerApi_1[\"default\"];\nvar readFromConsumerApi_1 = __importDefault(require(\"./readFromConsumerApi\"));\nexports.readFromConsumerApi = readFromConsumerApi_1[\"default\"];\nvar index_1 = require(\"./registry/index\");\nexports.SynchronousRegistry = index_1.SynchronousRegistry;\nexports.SynchronousMetaRegistry = index_1.SynchronousMetaRegistry;\nexports[\"default\"] = (0, readFromConsumerApi_1[\"default\"])('manifest');\n//# sourceMappingURL=index.js.map","\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nexports.__esModule = true;\nvar manifest_1 = __importDefault(require(\"./manifest\"));\nvar createReadOnlyValue = function (value) { return ({\n    value: value,\n    writable: false,\n    enumerable: false,\n    configurable: true\n}); };\nfunction createConsumerApi(manifests, exposureMap) {\n    var api = {};\n    Object.keys(exposureMap).forEach(function (key) {\n        Object.defineProperty(api, key, createReadOnlyValue(exposureMap[key]));\n    });\n    Object.defineProperty(api, '@manifest', createReadOnlyValue((0, manifest_1[\"default\"])(manifests)));\n    Object.defineProperty(window, '@Neos:HostPluginAPI', createReadOnlyValue(api));\n}\nexports[\"default\"] = createConsumerApi;\n//# sourceMappingURL=createConsumerApi.js.map","\"use strict\";\nexports.__esModule = true;\nexports[\"default\"] = (function (manifests) {\n    return function (identifier, options, bootstrap) {\n        var _a;\n        manifests.push((_a = {},\n            _a[identifier] = {\n                options: options,\n                bootstrap: bootstrap\n            },\n            _a));\n    };\n});\n//# sourceMappingURL=manifest.js.map","\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nexports.__esModule = true;\nexports.SynchronousMetaRegistry = exports.SynchronousRegistry = void 0;\nvar SynchronousRegistry_1 = __importDefault(require(\"./SynchronousRegistry\"));\nexports.SynchronousRegistry = SynchronousRegistry_1[\"default\"];\nvar SynchronousMetaRegistry_1 = __importDefault(require(\"./SynchronousMetaRegistry\"));\nexports.SynchronousMetaRegistry = SynchronousMetaRegistry_1[\"default\"];\n//# sourceMappingURL=index.js.map","\"use strict\";\nexports.__esModule = true;\nvar AbstractRegistry = (function () {\n    function AbstractRegistry(description) {\n        this.SERIAL_VERSION_UID = 'd8a5aa78-978e-11e6-ae22-56b6b6499611';\n        this.description = description;\n    }\n    return AbstractRegistry;\n}());\nexports[\"default\"] = AbstractRegistry;\n//# sourceMappingURL=AbstractRegistry.js.map","\"use strict\";\nexports.__esModule = true;\nvar tslib_1 = require(\"tslib\");\nvar positionalArraySorter = function (subject, position, idKey) {\n    var e_1, _a, e_2, _b, e_3, _c, e_4, _d, e_5, _e, e_6, _f, e_7, _g;\n    if (position === void 0) { position = 'position'; }\n    if (idKey === void 0) { idKey = 'key'; }\n    var positionAccessor = typeof position === 'string' ? function (value) { return value[position]; } : position;\n    var indexMapping = {};\n    var middleKeys = {};\n    var startKeys = {};\n    var endKeys = {};\n    var beforeKeys = {};\n    var afterKeys = {};\n    subject.forEach(function (item, index) {\n        var key = item[idKey] ? item[idKey] : String(index);\n        indexMapping[key] = index;\n        var positionValue = positionAccessor(item);\n        var position = String(positionValue ? positionValue : index);\n        var invalid = false;\n        if (position.startsWith('start')) {\n            var weightMatch = position.match(/start\\s+(\\d+)/);\n            var weight = weightMatch && weightMatch[1] ? Number(weightMatch[1]) : 0;\n            if (!startKeys[weight]) {\n                startKeys[weight] = [];\n            }\n            startKeys[weight].push(key);\n        }\n        else if (position.startsWith('end')) {\n            var weightMatch = position.match(/end\\s+(\\d+)/);\n            var weight = weightMatch && weightMatch[1] ? Number(weightMatch[1]) : 0;\n            if (!endKeys[weight]) {\n                endKeys[weight] = [];\n            }\n            endKeys[weight].push(key);\n        }\n        else if (position.startsWith('before')) {\n            var match = position.match(/before\\s+(\\S+)(\\s+(\\d+))?/);\n            if (!match) {\n                invalid = true;\n            }\n            else {\n                var reference = match[1];\n                var weight = match[3] ? Number(match[3]) : 0;\n                if (!beforeKeys[reference]) {\n                    beforeKeys[reference] = {};\n                }\n                if (!beforeKeys[reference][weight]) {\n                    beforeKeys[reference][weight] = [];\n                }\n                beforeKeys[reference][weight].push(key);\n            }\n        }\n        else if (position.startsWith('after')) {\n            var match = position.match(/after\\s+(\\S+)(\\s+(\\d+))?/);\n            if (!match) {\n                invalid = true;\n            }\n            else {\n                var reference = match[1];\n                var weight = match[3] ? Number(match[3]) : 0;\n                if (!afterKeys[reference]) {\n                    afterKeys[reference] = {};\n                }\n                if (!afterKeys[reference][weight]) {\n                    afterKeys[reference][weight] = [];\n                }\n                afterKeys[reference][weight].push(key);\n            }\n        }\n        else {\n            invalid = true;\n        }\n        if (invalid) {\n            var numberPosition = parseFloat(position);\n            if (isNaN(numberPosition) || !isFinite(numberPosition)) {\n                numberPosition = index;\n            }\n            if (!middleKeys[numberPosition]) {\n                middleKeys[numberPosition] = [];\n            }\n            middleKeys[numberPosition].push(key);\n        }\n    });\n    var resultStart = [];\n    var resultMiddle = [];\n    var resultEnd = [];\n    var processedKeys = [];\n    var sortedWeights = function (dict, asc) {\n        var weights = Object.keys(dict).map(function (x) { return Number(x); }).sort(function (a, b) { return a - b; });\n        return asc ? weights : weights.reverse();\n    };\n    var addToResults = function (keys, result) {\n        keys.forEach(function (key) {\n            var e_8, _a, e_9, _b;\n            if (processedKeys.indexOf(key) >= 0) {\n                return;\n            }\n            processedKeys.push(key);\n            if (beforeKeys[key]) {\n                var beforeWeights = sortedWeights(beforeKeys[key], true);\n                try {\n                    for (var beforeWeights_1 = tslib_1.__values(beforeWeights), beforeWeights_1_1 = beforeWeights_1.next(); !beforeWeights_1_1.done; beforeWeights_1_1 = beforeWeights_1.next()) {\n                        var i = beforeWeights_1_1.value;\n                        addToResults(beforeKeys[key][i], result);\n                    }\n                }\n                catch (e_8_1) { e_8 = { error: e_8_1 }; }\n                finally {\n                    try {\n                        if (beforeWeights_1_1 && !beforeWeights_1_1.done && (_a = beforeWeights_1[\"return\"])) _a.call(beforeWeights_1);\n                    }\n                    finally { if (e_8) throw e_8.error; }\n                }\n            }\n            result.push(key);\n            if (afterKeys[key]) {\n                var afterWeights = sortedWeights(afterKeys[key], false);\n                try {\n                    for (var afterWeights_1 = tslib_1.__values(afterWeights), afterWeights_1_1 = afterWeights_1.next(); !afterWeights_1_1.done; afterWeights_1_1 = afterWeights_1.next()) {\n                        var i = afterWeights_1_1.value;\n                        addToResults(afterKeys[key][i], result);\n                    }\n                }\n                catch (e_9_1) { e_9 = { error: e_9_1 }; }\n                finally {\n                    try {\n                        if (afterWeights_1_1 && !afterWeights_1_1.done && (_b = afterWeights_1[\"return\"])) _b.call(afterWeights_1);\n                    }\n                    finally { if (e_9) throw e_9.error; }\n                }\n            }\n        });\n    };\n    try {\n        for (var _h = tslib_1.__values(sortedWeights(startKeys, false)), _j = _h.next(); !_j.done; _j = _h.next()) {\n            var i = _j.value;\n            addToResults(startKeys[i], resultStart);\n        }\n    }\n    catch (e_1_1) { e_1 = { error: e_1_1 }; }\n    finally {\n        try {\n            if (_j && !_j.done && (_a = _h[\"return\"])) _a.call(_h);\n        }\n        finally { if (e_1) throw e_1.error; }\n    }\n    try {\n        for (var _k = tslib_1.__values(sortedWeights(middleKeys, true)), _l = _k.next(); !_l.done; _l = _k.next()) {\n            var i = _l.value;\n            addToResults(middleKeys[i], resultMiddle);\n        }\n    }\n    catch (e_2_1) { e_2 = { error: e_2_1 }; }\n    finally {\n        try {\n            if (_l && !_l.done && (_b = _k[\"return\"])) _b.call(_k);\n        }\n        finally { if (e_2) throw e_2.error; }\n    }\n    try {\n        for (var _m = tslib_1.__values(sortedWeights(endKeys, true)), _o = _m.next(); !_o.done; _o = _m.next()) {\n            var i = _o.value;\n            addToResults(endKeys[i], resultEnd);\n        }\n    }\n    catch (e_3_1) { e_3 = { error: e_3_1 }; }\n    finally {\n        try {\n            if (_o && !_o.done && (_c = _m[\"return\"])) _c.call(_m);\n        }\n        finally { if (e_3) throw e_3.error; }\n    }\n    try {\n        for (var _p = tslib_1.__values(Object.keys(beforeKeys)), _q = _p.next(); !_q.done; _q = _p.next()) {\n            var key = _q.value;\n            if (processedKeys.indexOf(key) >= 0) {\n                continue;\n            }\n            try {\n                for (var _r = (e_5 = void 0, tslib_1.__values(sortedWeights(beforeKeys[key], false))), _s = _r.next(); !_s.done; _s = _r.next()) {\n                    var i = _s.value;\n                    addToResults(beforeKeys[key][i], resultStart);\n                }\n            }\n            catch (e_5_1) { e_5 = { error: e_5_1 }; }\n            finally {\n                try {\n                    if (_s && !_s.done && (_e = _r[\"return\"])) _e.call(_r);\n                }\n                finally { if (e_5) throw e_5.error; }\n            }\n        }\n    }\n    catch (e_4_1) { e_4 = { error: e_4_1 }; }\n    finally {\n        try {\n            if (_q && !_q.done && (_d = _p[\"return\"])) _d.call(_p);\n        }\n        finally { if (e_4) throw e_4.error; }\n    }\n    try {\n        for (var _t = tslib_1.__values(Object.keys(afterKeys)), _u = _t.next(); !_u.done; _u = _t.next()) {\n            var key = _u.value;\n            if (processedKeys.indexOf(key) >= 0) {\n                continue;\n            }\n            try {\n                for (var _v = (e_7 = void 0, tslib_1.__values(sortedWeights(afterKeys[key], false))), _w = _v.next(); !_w.done; _w = _v.next()) {\n                    var i = _w.value;\n                    addToResults(afterKeys[key][i], resultMiddle);\n                }\n            }\n            catch (e_7_1) { e_7 = { error: e_7_1 }; }\n            finally {\n                try {\n                    if (_w && !_w.done && (_g = _v[\"return\"])) _g.call(_v);\n                }\n                finally { if (e_7) throw e_7.error; }\n            }\n        }\n    }\n    catch (e_6_1) { e_6 = { error: e_6_1 }; }\n    finally {\n        try {\n            if (_u && !_u.done && (_f = _t[\"return\"])) _f.call(_t);\n        }\n        finally { if (e_6) throw e_6.error; }\n    }\n    var sortedKeys = tslib_1.__spread(resultStart, resultMiddle, resultEnd);\n    return sortedKeys.map(function (key) { return indexMapping[key]; }).map(function (i) { return subject[i]; });\n};\nexports[\"default\"] = positionalArraySorter;\n//# sourceMappingURL=positionalArraySorter.js.map","/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation.\r\n\r\nPermission to use, copy, modify, and/or distribute this software for any\r\npurpose with or without fee is hereby granted.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\r\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\r\nAND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\r\nINDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\r\nLOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\r\nOTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\r\nPERFORMANCE OF THIS SOFTWARE.\r\n***************************************************************************** */\r\n/* global Reflect, Promise */\r\n\r\nvar extendStatics = function(d, b) {\r\n    extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n    return extendStatics(d, b);\r\n};\r\n\r\nexport function __extends(d, b) {\r\n    extendStatics(d, b);\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n}\r\n\r\nexport var __assign = function() {\r\n    __assign = Object.assign || function __assign(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n        }\r\n        return t;\r\n    }\r\n    return __assign.apply(this, arguments);\r\n}\r\n\r\nexport function __rest(s, e) {\r\n    var t = {};\r\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\r\n        t[p] = s[p];\r\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\r\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\r\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\r\n                t[p[i]] = s[p[i]];\r\n        }\r\n    return t;\r\n}\r\n\r\nexport function __decorate(decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n}\r\n\r\nexport function __param(paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n}\r\n\r\nexport function __metadata(metadataKey, metadataValue) {\r\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(metadataKey, metadataValue);\r\n}\r\n\r\nexport function __awaiter(thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n}\r\n\r\nexport function __generator(thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n}\r\n\r\nexport function __createBinding(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    o[k2] = m[k];\r\n}\r\n\r\nexport function __exportStar(m, exports) {\r\n    for (var p in m) if (p !== \"default\" && !exports.hasOwnProperty(p)) exports[p] = m[p];\r\n}\r\n\r\nexport function __values(o) {\r\n    var s = typeof Symbol === \"function\" && Symbol.iterator, m = s && o[s], i = 0;\r\n    if (m) return m.call(o);\r\n    if (o && typeof o.length === \"number\") return {\r\n        next: function () {\r\n            if (o && i >= o.length) o = void 0;\r\n            return { value: o && o[i++], done: !o };\r\n        }\r\n    };\r\n    throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\r\n}\r\n\r\nexport function __read(o, n) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\r\n    if (!m) return o;\r\n    var i = m.call(o), r, ar = [], e;\r\n    try {\r\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\r\n    }\r\n    catch (error) { e = { error: error }; }\r\n    finally {\r\n        try {\r\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\r\n        }\r\n        finally { if (e) throw e.error; }\r\n    }\r\n    return ar;\r\n}\r\n\r\nexport function __spread() {\r\n    for (var ar = [], i = 0; i < arguments.length; i++)\r\n        ar = ar.concat(__read(arguments[i]));\r\n    return ar;\r\n}\r\n\r\nexport function __spreadArrays() {\r\n    for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\r\n    for (var r = Array(s), k = 0, i = 0; i < il; i++)\r\n        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\r\n            r[k] = a[j];\r\n    return r;\r\n};\r\n\r\nexport function __await(v) {\r\n    return this instanceof __await ? (this.v = v, this) : new __await(v);\r\n}\r\n\r\nexport function __asyncGenerator(thisArg, _arguments, generator) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var g = generator.apply(thisArg, _arguments || []), i, q = [];\r\n    return i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i;\r\n    function verb(n) { if (g[n]) i[n] = function (v) { return new Promise(function (a, b) { q.push([n, v, a, b]) > 1 || resume(n, v); }); }; }\r\n    function resume(n, v) { try { step(g[n](v)); } catch (e) { settle(q[0][3], e); } }\r\n    function step(r) { r.value instanceof __await ? Promise.resolve(r.value.v).then(fulfill, reject) : settle(q[0][2], r); }\r\n    function fulfill(value) { resume(\"next\", value); }\r\n    function reject(value) { resume(\"throw\", value); }\r\n    function settle(f, v) { if (f(v), q.shift(), q.length) resume(q[0][0], q[0][1]); }\r\n}\r\n\r\nexport function __asyncDelegator(o) {\r\n    var i, p;\r\n    return i = {}, verb(\"next\"), verb(\"throw\", function (e) { throw e; }), verb(\"return\"), i[Symbol.iterator] = function () { return this; }, i;\r\n    function verb(n, f) { i[n] = o[n] ? function (v) { return (p = !p) ? { value: __await(o[n](v)), done: n === \"return\" } : f ? f(v) : v; } : f; }\r\n}\r\n\r\nexport function __asyncValues(o) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var m = o[Symbol.asyncIterator], i;\r\n    return m ? m.call(o) : (o = typeof __values === \"function\" ? __values(o) : o[Symbol.iterator](), i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i);\r\n    function verb(n) { i[n] = o[n] && function (v) { return new Promise(function (resolve, reject) { v = o[n](v), settle(resolve, reject, v.done, v.value); }); }; }\r\n    function settle(resolve, reject, d, v) { Promise.resolve(v).then(function(v) { resolve({ value: v, done: d }); }, reject); }\r\n}\r\n\r\nexport function __makeTemplateObject(cooked, raw) {\r\n    if (Object.defineProperty) { Object.defineProperty(cooked, \"raw\", { value: raw }); } else { cooked.raw = raw; }\r\n    return cooked;\r\n};\r\n\r\nexport function __importStar(mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (Object.hasOwnProperty.call(mod, k)) result[k] = mod[k];\r\n    result.default = mod;\r\n    return result;\r\n}\r\n\r\nexport function __importDefault(mod) {\r\n    return (mod && mod.__esModule) ? mod : { default: mod };\r\n}\r\n\r\nexport function __classPrivateFieldGet(receiver, privateMap) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to get private field on non-instance\");\r\n    }\r\n    return privateMap.get(receiver);\r\n}\r\n\r\nexport function __classPrivateFieldSet(receiver, privateMap, value) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to set private field on non-instance\");\r\n    }\r\n    privateMap.set(receiver, value);\r\n    return value;\r\n}\r\n","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nexports.__esModule = true;\nvar SynchronousRegistry_1 = __importDefault(require(\"./SynchronousRegistry\"));\nvar SynchronousMetaRegistry = (function (_super) {\n    __extends(SynchronousMetaRegistry, _super);\n    function SynchronousMetaRegistry() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    SynchronousMetaRegistry.prototype.set = function (key, value) {\n        if (value.SERIAL_VERSION_UID !== 'd8a5aa78-978e-11e6-ae22-56b6b6499611') {\n            throw new Error('You can only add registries to a meta registry');\n        }\n        return _super.prototype.set.call(this, key, value);\n    };\n    return SynchronousMetaRegistry;\n}(SynchronousRegistry_1[\"default\"]));\nexports[\"default\"] = SynchronousMetaRegistry;\n//# sourceMappingURL=SynchronousMetaRegistry.js.map","import { useRef } from 'react';\n/**\n * A custom hook that creates a ref for a function, and updates it on every render.\n * The new value is always the same function, but the function's context changes on every render.\n */\nexport default function useFunctionRef(fn) {\n    const fnRef = useRef(fn);\n    fnRef.current = fn;\n    return fnRef;\n}\n","function i(){throw new Error(\"Cycle detected\")}function t(){if(!(s>1)){var i,t=!1;while(void 0!==r){var h=r;r=void 0;n++;while(void 0!==h){var o=h.o;h.o=void 0;h.f&=-3;if(!(8&h.f)&&d(h))try{h.c()}catch(h){if(!t){i=h;t=!0}}h=o}}n=0;s--;if(t)throw i}else s--}function h(i){if(s>0)return i();s++;try{return i()}finally{t()}}var o=void 0,r=void 0,s=0,n=0,f=0;function v(i){if(void 0!==o){var t=i.n;if(void 0===t||t.t!==o){t={i:0,S:i,p:o.s,n:void 0,t:o,e:void 0,x:void 0,r:t};if(void 0!==o.s)o.s.n=t;o.s=t;i.n=t;if(32&o.f)i.S(t);return t}else if(-1===t.i){t.i=0;if(void 0!==t.n){t.n.p=t.p;if(void 0!==t.p)t.p.n=t.n;t.p=o.s;t.n=void 0;o.s.n=t;o.s=t}return t}}}function e(i){this.v=i;this.i=0;this.n=void 0;this.t=void 0}e.prototype.h=function(){return!0};e.prototype.S=function(i){if(this.t!==i&&void 0===i.e){i.x=this.t;if(void 0!==this.t)this.t.e=i;this.t=i}};e.prototype.U=function(i){if(void 0!==this.t){var t=i.e,h=i.x;if(void 0!==t){t.x=h;i.e=void 0}if(void 0!==h){h.e=t;i.x=void 0}if(i===this.t)this.t=h}};e.prototype.subscribe=function(i){var t=this;return p(function(){var h=t.value,o=32&this.f;this.f&=-33;try{i(h)}finally{this.f|=o}})};e.prototype.valueOf=function(){return this.value};e.prototype.toString=function(){return this.value+\"\"};e.prototype.peek=function(){return this.v};Object.defineProperty(e.prototype,\"value\",{get:function(){var i=v(this);if(void 0!==i)i.i=this.i;return this.v},set:function(h){if(h!==this.v){if(n>100)i();this.v=h;this.i++;f++;s++;try{for(var o=this.t;void 0!==o;o=o.x)o.t.N()}finally{t()}}}});function u(i){return new e(i)}function d(i){for(var t=i.s;void 0!==t;t=t.n)if(t.S.i!==t.i||!t.S.h()||t.S.i!==t.i)return!0;return!1}function c(i){for(var t=i.s;void 0!==t;t=t.n){var h=t.S.n;if(void 0!==h)t.r=h;t.S.n=t;t.i=-1;if(void 0===t.n){i.s=t;break}}}function a(i){var t=i.s,h=void 0;while(void 0!==t){var o=t.p;if(-1===t.i){t.S.U(t);if(void 0!==o)o.n=t.n;if(void 0!==t.n)t.n.p=o}else h=t;t.S.n=t.r;if(void 0!==t.r)t.r=void 0;t=o}i.s=h}function l(i){e.call(this,void 0);this.x=i;this.s=void 0;this.g=f-1;this.f=4}(l.prototype=new e).h=function(){this.f&=-3;if(1&this.f)return!1;if(32==(36&this.f))return!0;this.f&=-5;if(this.g===f)return!0;this.g=f;this.f|=1;if(this.i>0&&!d(this)){this.f&=-2;return!0}var i=o;try{c(this);o=this;var t=this.x();if(16&this.f||this.v!==t||0===this.i){this.v=t;this.f&=-17;this.i++}}catch(i){this.v=i;this.f|=16;this.i++}o=i;a(this);this.f&=-2;return!0};l.prototype.S=function(i){if(void 0===this.t){this.f|=36;for(var t=this.s;void 0!==t;t=t.n)t.S.S(t)}e.prototype.S.call(this,i)};l.prototype.U=function(i){if(void 0!==this.t){e.prototype.U.call(this,i);if(void 0===this.t){this.f&=-33;for(var t=this.s;void 0!==t;t=t.n)t.S.U(t)}}};l.prototype.N=function(){if(!(2&this.f)){this.f|=6;for(var i=this.t;void 0!==i;i=i.x)i.t.N()}};l.prototype.peek=function(){if(!this.h())i();if(16&this.f)throw this.v;return this.v};Object.defineProperty(l.prototype,\"value\",{get:function(){if(1&this.f)i();var t=v(this);this.h();if(void 0!==t)t.i=this.i;if(16&this.f)throw this.v;return this.v}});function w(i){return new l(i)}function y(i){var h=i.u;i.u=void 0;if(\"function\"==typeof h){s++;var r=o;o=void 0;try{h()}catch(t){i.f&=-2;i.f|=8;_(i);throw t}finally{o=r;t()}}}function _(i){for(var t=i.s;void 0!==t;t=t.n)t.S.U(t);i.x=void 0;i.s=void 0;y(i)}function g(i){if(o!==this)throw new Error(\"Out-of-order effect\");a(this);o=i;this.f&=-2;if(8&this.f)_(this);t()}function b(i){this.x=i;this.u=void 0;this.s=void 0;this.o=void 0;this.f=32}b.prototype.c=function(){var i=this.S();try{if(!(8&this.f)&&void 0!==this.x)this.u=this.x()}finally{i()}};b.prototype.S=function(){if(1&this.f)i();this.f|=1;this.f&=-9;y(this);c(this);s++;var t=o;o=this;return g.bind(this,t)};b.prototype.N=function(){if(!(2&this.f)){this.f|=2;this.o=r;r=this}};b.prototype.d=function(){this.f|=8;if(!(1&this.f))_(this)};function p(i){var t=new b(i);try{t.c()}catch(i){t.d();throw i}return t.d.bind(t)}export{e as Signal,h as batch,w as computed,p as effect,u as signal};//# sourceMappingURL=signals-core.module.js.map\n","import n,{__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED as r,useMemo as t,useRef as e,useEffect as i}from\"react\";import{Signal as u,effect as f,signal as o,computed as a}from\"@preact/signals-core\";export{Signal,batch,computed,effect,signal}from\"@preact/signals-core\";var c,v=n.createElement;n.createElement=function(n,r){if(\"string\"==typeof n&&r)for(var t in r){var e=r[t];if(\"children\"!==t&&e instanceof u)r[t]=e.value}return v.apply(this,arguments)};var l=new WeakMap;function p(n){if(c)c();c=n&&n.S()}var s=v(\"a\").$$typeof;Object.defineProperties(u.prototype,{$$typeof:{configurable:!0,value:s},type:{configurable:!0,value:function(n){return n.data.value}},props:{configurable:!0,get:function(){return{data:this}}},ref:{configurable:!0,value:null}});var g,b=!1,m=function(){return{}};Object.defineProperty(r.ReactCurrentDispatcher,\"current\",{get:function(){return g},set:function(n){g=n;if(!b)if(n&&!function(n){var r=d.get(n);if(void 0!==r)return r;var t=n.useCallback.length<2||/Invalid/.test(n.useCallback);d.set(n,t);return t}(n)){b=!0;var r=n.useReducer(m,{})[1];b=!1;var t=l.get(r);if(!t){t=function(n){var r;f(function(){r=this});r.c=n;return r}(r);l.set(r,t)}else t.c=r;p(t)}else p()}});var d=new Map;function h(n){return t(function(){return o(n)},[])}function y(n){var r=e(n);r.current=n;return t(function(){return a(function(){return r.current()})},[])}function j(n){var r=e(n);r.current=n;i(function(){return f(function(){return r.current()})},[])}export{y as useComputed,h as useSignal,j as useSignalEffect};//# sourceMappingURL=signals.module.js.map\n","/**\n * This method converts the hierarchical command list into a flat list of commands which is more convenient\n * for internal processing, whereas the hierarchical command list is more convenient for the user.\n */\nexport default function flattenCommands(commands, parentId = null) {\n    return Object.keys(commands).reduce((commandList, commandId) => {\n        const { icon, description, name, subCommands, action, canHandleQueries, closeOnExecute, category, executeManually, } = commands[commandId];\n        // Create an uniquely identifiable command id for the flat command list\n        const absoluteCommandId = parentId ? `${parentId}.${commandId}` : commandId;\n        // Create list of available subcommand names\n        const subCommandIds = subCommands\n            ? Object.keys(subCommands).map((subCommandId) => `${absoluteCommandId}.${subCommandId}`)\n            : [];\n        // Insert the processed command into the flat command list\n        commandList[absoluteCommandId] = {\n            id: absoluteCommandId,\n            name,\n            icon,\n            description,\n            action,\n            canHandleQueries,\n            subCommandIds,\n            parentId,\n            closeOnExecute,\n            category,\n            executeManually,\n        };\n        // Insert subcommands into the list\n        if (subCommandIds.length > 0) {\n            return {\n                ...commandList,\n                ...flattenCommands(subCommands, absoluteCommandId),\n            };\n        }\n        return commandList;\n    }, {});\n}\n","const PREFIX = '%c[COMMANDBAR]';\nconst logger = {\n    ok: (message, ...args) => console.log(PREFIX, 'color: green', message, ...args),\n    error: (message, ...args) => console.log(PREFIX, 'color: red', message, ...args),\n    warn: (message, ...args) => console.warn(PREFIX, 'color: orange', message, ...args),\n    debug: \n    // @ts-ignore\n    process.env.NODE_ENV === 'production'\n        ? () => null\n        : (message, ...args) => console.debug(PREFIX, 'color: lightblue', message, ...args),\n};\nexport default logger;\n","export default function clamp(value, min, max) {\n    return Math.max(min, Math.min(max, value));\n}\n","/**\n* Copyright (c) 2023, Leon Sorokin\n* All rights reserved. (MIT Licensed)\n*\n* uFuzzy.js (μFuzzy)\n* A tiny, efficient fuzzy matcher that doesn't suck\n* https://github.com/leeoniya/uFuzzy (v1.0.3)\n*/\n\nconst cmp = new Intl.Collator('en').compare;\n\nconst inf = Infinity;\n\nconst NEGS_RE = /(?:\\s+|^)-[a-z\\d]+/ig;\n\nconst OPTS = {\n\t// term segmentation & punct/whitespace merging\n\tinterSplit: \"[^A-Za-z0-9']+\",\n\tintraSplit: '[a-z][A-Z]',\n\n\t// intra bounds that will be used to increase lft1/rgt1 info counters\n\tintraBound: '[A-Za-z][0-9]|[0-9][A-Za-z]|[a-z][A-Z]',\n\n\t// inter-bounds mode\n\t// 2 = strict (will only match 'man' on whitepace and punct boundaries: Mega Man, Mega_Man, mega.man)\n\t// 1 = loose  (plus allowance for alpha-num and case-change boundaries: MegaMan, 0007man)\n\t// 0 = any    (will match 'man' as any substring: megamaniac)\n\tinterLft: 0,\n\tinterRgt: 0,\n\n\t// allowance between terms\n\tinterChars: '.',\n\tinterIns: inf,\n\n\t// allowance between chars in terms\n\tintraChars: \"[a-z\\\\d']\", // internally case-insensitive\n\tintraIns: 0,\n\n\tintraContr: \"'[a-z]{1,2}\\\\b\",\n\n\t// multi-insert or single-error mode\n\tintraMode: 0,\n\n\t// single-error bounds for errors within terms, default requires exact first char\n\tintraSlice: [1, inf],\n\n\t// single-error tolerance toggles\n\tintraSub: 0,\n\tintraTrn: 0,\n\tintraDel: 0,\n\n\t// can post-filter matches that are too far apart in distance or length\n\t// (since intraIns is between each char, it can accum to nonsense matches)\n\tintraFilt: (term, match, index) => true, // should this also accept WIP info?\n\n\t// final sorting fn\n\tsort: (info, haystack, needle) => {\n\t\tlet {\n\t\t\tidx,\n\t\t\tchars,\n\t\t\tterms,\n\t\t\tinterLft2,\n\t\t\tinterLft1,\n\t\t//\tinterRgt2,\n\t\t//\tinterRgt1,\n\t\t\tstart,\n\t\t\tintraIns,\n\t\t\tinterIns,\n\t\t} = info;\n\n\t\treturn idx.map((v, i) => i).sort((ia, ib) => (\n\t\t\t// most contig chars matched\n\t\t\tchars[ib] - chars[ia] ||\n\t\t\t// least char intra-fuzz (most contiguous)\n\t\t\tintraIns[ia] - intraIns[ib] ||\n\t\t\t// most prefix bounds, boosted by full term matches\n\t\t\t(\n\t\t\t\t(terms[ib] + interLft2[ib] + 0.5 * interLft1[ib]) -\n\t\t\t\t(terms[ia] + interLft2[ia] + 0.5 * interLft1[ia])\n\t\t\t) ||\n\t\t\t// highest density of match (least span)\n\t\t//\tspan[ia] - span[ib] ||\n\t\t\t// highest density of match (least term inter-fuzz)\n\t\t\tinterIns[ia] - interIns[ib] ||\n\t\t\t// earliest start of match\n\t\t\tstart[ia] - start[ib] ||\n\t\t\t// alphabetic\n\t\t\tcmp(haystack[idx[ia]], haystack[idx[ib]])\n\t\t));\n\t},\n};\n\nconst lazyRepeat = (chars, limit) => (\n\tlimit == 0   ? ''           :\n\tlimit == 1   ? chars + '??' :\n\tlimit == inf ? chars + '*?' :\n\t               chars + `{0,${limit}}?`\n);\n\nconst mode2Tpl = '(?:\\\\b|_)';\n\nfunction uFuzzy(opts) {\n\topts = Object.assign({}, OPTS, opts);\n\n\tconst {\n\t\tinterLft,\n\t\tinterRgt,\n\t\tintraMode,\n\t\tintraSlice,\n\t\tintraIns,\n\t\tintraSub,\n\t\tintraTrn,\n\t\tintraDel,\n\t\tintraContr,\n\t\tintraSplit: _intraSplit,\n\t\tinterSplit: _interSplit,\n\t\tintraBound: _intraBound,\n\t\tintraChars,\n\t} = opts;\n\n\tlet { intraRules } = opts;\n\n\tif (intraRules == null) {\n\t\tintraRules = p => {\n\t\t\t// default is exact term matches only\n\t\t\tlet _intraSlice = OPTS.intraSlice, // requires first char\n\t\t\t\t_intraIns = 0,\n\t\t\t\t_intraSub = 0,\n\t\t\t\t_intraTrn = 0,\n\t\t\t\t_intraDel = 0;\n\n\t\t\tlet plen = p.length;\n\n\t\t\t// prevent junk matches by requiring stricter rules for short terms\n\t\t\tif (plen <= 4) {\n\t\t\t\tif (plen >= 3) {\n\t\t\t\t\t// one swap in non-first char when 3-4 chars\n\t\t\t\t\t_intraTrn = Math.min(intraTrn, 1);\n\n\t\t\t\t\t// or one insertion when 4 chars\n\t\t\t\t\tif (plen == 4)\n\t\t\t\t\t\t_intraIns = Math.min(intraIns, 1);\n\t\t\t\t}\n\t\t\t\t// else exact match when 1-2 chars\n\t\t\t}\n\t\t\t// use supplied opts\n\t\t\telse {\n\t\t\t\t_intraSlice = intraSlice;\n\t\t\t\t_intraIns = intraIns,\n\t\t\t\t_intraSub = intraSub,\n\t\t\t\t_intraTrn = intraTrn,\n\t\t\t\t_intraDel = intraDel;\n\t\t\t}\n\n\t\t\treturn {\n\t\t\t\tintraSlice: _intraSlice,\n\t\t\t\tintraIns: _intraIns,\n\t\t\t\tintraSub: _intraSub,\n\t\t\t\tintraTrn: _intraTrn,\n\t\t\t\tintraDel: _intraDel,\n\t\t\t};\n\t\t};\n\t}\n\n\tlet withIntraSplit = !!_intraSplit;\n\n\tlet intraSplit = new RegExp(_intraSplit, 'g');\n\tlet interSplit = new RegExp(_interSplit, 'g');\n\n\tlet trimRe = new RegExp('^' + _interSplit + '|' + _interSplit + '$', 'g');\n\tlet contrsRe = new RegExp(intraContr, 'gi');\n\n\tconst split = needle => {\n\t\tneedle = needle.replace(trimRe, '').toLowerCase();\n\n\t\tif (withIntraSplit)\n\t\t\tneedle = needle.replace(intraSplit, m => m[0] + ' ' + m[1]);\n\n\t\treturn needle.split(interSplit).filter(t => t != '');\n\t};\n\n\tconst prepQuery = (needle, capt = 0, interOR = false) => {\n\t\t// split on punct, whitespace, num-alpha, and upper-lower boundaries\n\t\tlet parts = split(needle);\n\n\t\tif (parts.length == 0)\n\t\t\tthrow `Empty needle!`;\n\n\t\t// split out any detected contractions for each term that become required suffixes\n\t\tlet contrs = Array(parts.length).fill('');\n\t\tparts = parts.map((p, pi) => p.replace(contrsRe, m => {\n\t\t\tcontrs[pi] = m;\n\t\t\treturn '';\n\t\t}));\n\n\t\t// array of regexp tpls for each term\n\t\tlet reTpl;\n\n\t\t// allows single mutations within each term\n\t\tif (intraMode == 1) {\n\t\t\treTpl = parts.map((p, pi) => {\n\t\t\t\tlet {\n\t\t\t\t\tintraSlice,\n\t\t\t\t\tintraIns,\n\t\t\t\t\tintraSub,\n\t\t\t\t\tintraTrn,\n\t\t\t\t\tintraDel,\n\t\t\t\t} = intraRules(p);\n\n\t\t\t\tif (intraIns + intraSub + intraTrn + intraDel == 0)\n\t\t\t\t\treturn p + contrs[pi];\n\n\t\t\t\tlet [lftIdx, rgtIdx] = intraSlice;\n\t\t\t\tlet lftChar = p.slice(0, lftIdx); // prefix\n\t\t\t\tlet rgtChar = p.slice(rgtIdx);    // suffix\n\n\t\t\t\tlet chars = p.slice(lftIdx, rgtIdx);\n\n\t\t\t\t// neg lookahead to prefer matching 'Test' instead of 'tTest' in ManifestTest or fittest\n\t\t\t\t// but skip when search term contains leading repetition (aardvark, aaa)\n\t\t\t\tif (intraIns == 1 && lftChar.length == 1 && lftChar != chars[0])\n\t\t\t\t\tlftChar += '(?!' + lftChar + ')';\n\n\t\t\t\tlet numChars = chars.length;\n\n\t\t\t\tlet variants = [];\n\n\t\t\t\t// variants with single char substitutions\n\t\t\t\tif (intraSub) {\n\t\t\t\t\tfor (let i = 0; i < numChars; i++)\n\t\t\t\t\t\tvariants.push(lftChar + chars.slice(0, i) + intraChars + chars.slice(i + 1) + rgtChar);\n\t\t\t\t}\n\n\t\t\t\t// variants with single transpositions\n\t\t\t\tif (intraTrn) {\n\t\t\t\t\tfor (let i = 0; i < numChars - 1; i++) {\n\t\t\t\t\t\tif (chars[i] != chars[i+1])\n\t\t\t\t\t\t\tvariants.push(lftChar + chars.slice(0, i) + chars[i+1] + chars[i] + chars.slice(i + 2) + rgtChar);\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\t// variants with single char omissions\n\t\t\t\tif (intraDel) {\n\t\t\t\t\tfor (let i = 0; i < numChars; i++)\n\t\t\t\t\t\tvariants.push(lftChar + chars.slice(0, i + 1) + '?' + chars.slice(i + 1) + rgtChar);\n\t\t\t\t}\n\n\t\t\t\t// variants with single char insertions\n\t\t\t\tif (intraIns) {\n\t\t\t\t\tlet intraInsTpl = lazyRepeat(intraChars, 1);\n\n\t\t\t\t\tfor (let i = 0; i < numChars; i++)\n\t\t\t\t\t\tvariants.push(lftChar + chars.slice(0, i) + intraInsTpl + chars.slice(i) + rgtChar);\n\t\t\t\t}\n\n\t\t\t\tlet reTpl = '(?:' + p + '|' + variants.join('|') + ')' + contrs[pi];\n\n\t\t\t//\tconsole.log(reTpl);\n\n\t\t\t\treturn reTpl;\n\t\t\t});\n\t\t}\n\t\telse {\n\t\t\tlet intraInsTpl = lazyRepeat(intraChars, intraIns);\n\n\t\t\t// capture at char level\n\t\t\tif (capt == 2 && intraIns > 0) {\n\t\t\t\t// sadly, we also have to capture the inter-term junk via parenth-wrapping .*?\n\t\t\t\t// to accum other capture groups' indices for \\b boosting during scoring\n\t\t\t\tintraInsTpl = ')(' + intraInsTpl + ')(';\n\t\t\t}\n\n\t\t\treTpl = parts.map((p, pi) => p.split('').map((c, i, chars) => {\n\t\t\t\t// neg lookahead to prefer matching 'Test' instead of 'tTest' in ManifestTest or fittest\n\t\t\t\t// but skip when search term contains leading repetition (aardvark, aaa)\n\t\t\t\tif (intraIns == 1 && i == 0 && chars.length > 1 && c[i] != c[i+1])\n\t\t\t\t\tc += '(?!' + c + ')';\n\n\t\t\t\treturn c;\n\t\t\t}).join(intraInsTpl) + contrs[pi]);\n\t\t}\n\n\t//\tconsole.log(reTpl);\n\n\t\t// this only helps to reduce initial matches early when they can be detected\n\t\t// TODO: might want a mode 3 that excludes _\n\t\tlet preTpl = interLft == 2 ? mode2Tpl : '';\n\t\tlet sufTpl = interRgt == 2 ? mode2Tpl : '';\n\n\t\tlet interCharsTpl = sufTpl + lazyRepeat(opts.interChars, opts.interIns) + preTpl;\n\n\t\t// capture at word level\n\t\tif (capt > 0) {\n\t\t\tif (interOR) {\n\t\t\t\t// this is basically for doing .matchAll() occurence counting and highlighting without needing permuted ooo needles\n\t\t\t\treTpl = preTpl + '(' + reTpl.join(')' + sufTpl + '|' + preTpl + '(') + ')' + sufTpl;\n\t\t\t}\n\t\t\telse {\n\t\t\t\t// sadly, we also have to capture the inter-term junk via parenth-wrapping .*?\n\t\t\t\t// to accum other capture groups' indices for \\b boosting during scoring\n\t\t\t\treTpl = '(' + reTpl.join(')(' + interCharsTpl + ')(') + ')';\n\t\t\t\treTpl = '(.?' + preTpl + ')' + reTpl + '(' + sufTpl + '.*)'; // nit: trailing capture here assumes interIns = Inf\n\t\t\t}\n\t\t}\n\t\telse {\n\t\t\treTpl = reTpl.join(interCharsTpl);\n\t\t\treTpl = preTpl + reTpl + sufTpl;\n\t\t}\n\n\t//\tconsole.log(reTpl);\n\n\t\treturn [new RegExp(reTpl, 'i'), parts, contrs];\n\t};\n\n\tconst filter = (haystack, needle, idxs) => {\n\n\t\tlet out = [];\n\t\tlet [query] = prepQuery(needle);\n\n\t\tif (idxs != null) {\n\t\t\tfor (let i = 0; i < idxs.length; i++) {\n\t\t\t\tlet idx = idxs[i];\n\t\t\t\tquery.test(haystack[idx]) && out.push(idx);\n\t\t\t}\n\t\t}\n\t\telse {\n\t\t\tfor (let i = 0; i < haystack.length; i++)\n\t\t\t\tquery.test(haystack[i]) && out.push(i);\n\t\t}\n\n\t\treturn out;\n\t};\n\n\tlet withIntraBound = !!_intraBound;\n\n\tlet interBound = new RegExp(_interSplit);\n\tlet intraBound = new RegExp(_intraBound);\n\n\tconst info = (idxs, haystack, needle) => {\n\n\t\tlet [query, parts, contrs] = prepQuery(needle, 1);\n\t\tlet [queryR] = prepQuery(needle, 2);\n\t\tlet partsLen = parts.length;\n\n\t\tlet len = idxs.length;\n\n\t\tlet field = Array(len).fill(0);\n\n\t\tlet info = {\n\t\t\t// idx in haystack\n\t\t\tidx: Array(len),\n\n\t\t\t// start of match\n\t\t\tstart: field.slice(),\n\t\t\t// length of match\n\t\t//\tspan: field.slice(),\n\n\t\t\t// contiguous chars matched\n\t\t\tchars: field.slice(),\n\n\t\t\t// contiguous (no fuzz) and bounded terms (intra=0, lft2/1, rgt2/1)\n\t\t\t// excludes terms that are contiguous but have < 2 bounds (substrings)\n\t\t\tterms: field.slice(),\n\n\t\t\t// cumulative length of unmatched chars (fuzz) within span\n\t\t\tinterIns: field.slice(), // between terms\n\t\t\tintraIns: field.slice(), // within terms\n\n\t\t\t// interLft/interRgt counters\n\t\t\tinterLft2: field.slice(),\n\t\t\tinterRgt2: field.slice(),\n\t\t\tinterLft1: field.slice(),\n\t\t\tinterRgt1: field.slice(),\n\n\t\t\tranges: Array(len),\n\t\t};\n\n\t\t// might discard idxs based on bounds checks\n\t\tlet mayDiscard = interLft == 1 || interRgt == 1;\n\n\t\tlet ii = 0;\n\n\t\tfor (let i = 0; i < idxs.length; i++) {\n\t\t\tlet mhstr = haystack[idxs[i]];\n\n\t\t\t// the matched parts are [full, junk, term, junk, term, junk]\n\t\t\tlet m = mhstr.match(query);\n\n\t\t\t// leading junk\n\t\t\tlet start = m.index + m[1].length;\n\n\t\t\tlet idxAcc = start;\n\t\t//\tlet span = m[0].length;\n\n\t\t\tlet disc = false;\n\t\t\tlet lft2 = 0;\n\t\t\tlet lft1 = 0;\n\t\t\tlet rgt2 = 0;\n\t\t\tlet rgt1 = 0;\n\t\t\tlet chars = 0;\n\t\t\tlet terms = 0;\n\t\t\tlet inter = 0;\n\t\t\tlet intra = 0;\n\n\t\t\tlet refine = [];\n\n\t\t\tfor (let j = 0, k = 2; j < partsLen; j++, k+=2) {\n\t\t\t\tlet group = m[k].toLowerCase();\n\t\t\t\tlet term = parts[j] + contrs[j];\n\t\t\t\tlet termLen = term.length;\n\t\t\t\tlet groupLen = group.length;\n\t\t\t\tlet fullMatch = group == term;\n\n\t\t\t\t// this won't handle the case when an exact match exists across the boundary of the current group and the next junk\n\t\t\t\t// e.g. blob,ob when searching for 'bob' but finding the earlier `blob` (with extra insertion)\n\t\t\t\tif (!fullMatch && m[k+1].length >= termLen) {\n\t\t\t\t\t// probe for exact match in inter junk\n\t\t\t\t\tlet idxOf = m[k+1].toLowerCase().indexOf(term);\n\n\t\t\t\t\tif (idxOf > -1) {\n\t\t\t\t\t\trefine.push(idxAcc, idxOf, termLen);\n\t\t\t\t\t\tidxAcc += refineMatch(m, k, idxOf, termLen);\n\t\t\t\t\t\tgroup = term;\n\t\t\t\t\t\tgroupLen = termLen;\n\t\t\t\t\t\tfullMatch = true;\n\n\t\t\t\t\t\tif (j == 0)\n\t\t\t\t\t\t\tstart = idxAcc;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tif (mayDiscard || fullMatch) {\n\t\t\t\t\t// does group's left and/or right land on \\b\n\t\t\t\t\tlet lftCharIdx = idxAcc - 1;\n\t\t\t\t\tlet rgtCharIdx = idxAcc + groupLen;\n\n\t\t\t\t\tlet isPre = true;\n\t\t\t\t\tlet isSuf = true;\n\n\t\t\t\t\t// prefix info\n\t\t\t\t\tif (lftCharIdx == -1           || interBound.test(mhstr[lftCharIdx]))\n\t\t\t\t\t\tfullMatch && lft2++;\n\t\t\t\t\telse {\n\t\t\t\t\t\tif (interLft == 2) {\n\t\t\t\t\t\t\tdisc = true;\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif (withIntraBound && intraBound.test(mhstr[lftCharIdx] + mhstr[lftCharIdx + 1]))\n\t\t\t\t\t\t\tfullMatch && lft1++;\n\t\t\t\t\t\telse {\n\t\t\t\t\t\t\tif (interLft == 1) {\n\t\t\t\t\t\t\t\t// regexps are eager, so try to improve the match by probing forward inter junk for exact match at a boundary\n\t\t\t\t\t\t\t\tlet junk = m[k+1];\n\t\t\t\t\t\t\t\tlet junkIdx = idxAcc + groupLen;\n\n\t\t\t\t\t\t\t\tif (junk.length >= termLen) {\n\t\t\t\t\t\t\t\t\tlet idxOf = 0;\n\t\t\t\t\t\t\t\t\tlet found = false;\n\t\t\t\t\t\t\t\t\tlet re = new RegExp(term, 'ig');\n\n\t\t\t\t\t\t\t\t\tlet m2;\n\t\t\t\t\t\t\t\t\twhile (m2 = re.exec(junk)) {\n\t\t\t\t\t\t\t\t\t\tidxOf = m2.index;\n\n\t\t\t\t\t\t\t\t\t\tlet charIdx = junkIdx + idxOf;\n\t\t\t\t\t\t\t\t\t\tlet lftCharIdx = charIdx - 1;\n\n\n\t\t\t\t\t\t\t\t\t\tif (lftCharIdx == -1 || interBound.test(mhstr[lftCharIdx])) {\n\t\t\t\t\t\t\t\t\t\t\tlft2++;\n\t\t\t\t\t\t\t\t\t\t\tfound = true;\n\t\t\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\telse if (intraBound.test(mhstr[lftCharIdx] + mhstr[charIdx])) {\n\t\t\t\t\t\t\t\t\t\t\tlft1++;\n\t\t\t\t\t\t\t\t\t\t\tfound = true;\n\t\t\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\tif (found) {\n\t\t\t\t\t\t\t\t\t\t// identical to exact term refinement pass above\n\t\t\t\t\t\t\t\t\t\trefine.push(idxAcc, idxOf, termLen);\n\t\t\t\t\t\t\t\t\t\tidxAcc += refineMatch(m, k, idxOf, termLen);\n\t\t\t\t\t\t\t\t\t\tgroup = term;\n\t\t\t\t\t\t\t\t\t\tgroupLen = termLen;\n\t\t\t\t\t\t\t\t\t\tfullMatch = true;\n\t\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\tdisc = true;\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tisPre = false;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\t// suffix info\n\t\t\t\t\tif (rgtCharIdx == mhstr.length || interBound.test(mhstr[rgtCharIdx]))\n\t\t\t\t\t\tfullMatch && rgt2++;\n\t\t\t\t\telse {\n\t\t\t\t\t\tif (interRgt == 2) {\n\t\t\t\t\t\t\tdisc = true;\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif (withIntraBound && intraBound.test(mhstr[rgtCharIdx - 1] + mhstr[rgtCharIdx]))\n\t\t\t\t\t\t\tfullMatch && rgt1++;\n\t\t\t\t\t\telse {\n\t\t\t\t\t\t\tif (interRgt == 1) {\n\t\t\t\t\t\t\t\tdisc = true;\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tisSuf = false;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\tif (fullMatch) {\n\t\t\t\t\t\tchars += termLen;\n\n\t\t\t\t\t\tif (isPre && isSuf)\n\t\t\t\t\t\t\tterms++;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tif (groupLen > termLen)\n\t\t\t\t\tintra += groupLen - termLen; // intraFuzz\n\n\t\t\t\tif (j > 0)\n\t\t\t\t\tinter += m[k-1].length; // interFuzz\n\n\t\t\t\t// TODO: group here is lowercased, which is okay for length cmp, but not more case-sensitive filts\n\t\t\t\tif (!opts.intraFilt(term, group, idxAcc)) {\n\t\t\t\t\tdisc = true;\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\n\t\t\t\tif (j < partsLen - 1)\n\t\t\t\t\tidxAcc += groupLen + m[k+1].length;\n\t\t\t}\n\n\t\t\tif (!disc) {\n\t\t\t\tinfo.idx[ii]       = idxs[i];\n\t\t\t\tinfo.interLft2[ii] = lft2;\n\t\t\t\tinfo.interLft1[ii] = lft1;\n\t\t\t\tinfo.interRgt2[ii] = rgt2;\n\t\t\t\tinfo.interRgt1[ii] = rgt1;\n\t\t\t\tinfo.chars[ii]     = chars;\n\t\t\t\tinfo.terms[ii]     = terms;\n\t\t\t\tinfo.interIns[ii]  = inter;\n\t\t\t\tinfo.intraIns[ii]  = intra;\n\n\t\t\t\tinfo.start[ii] = start;\n\t\t\t//\tinfo.span[ii] = span;\n\n\t\t\t\t// ranges\n\t\t\t\tlet m = mhstr.match(queryR);\n\t\t\t\tlet ranges = info.ranges[ii] = [];\n\n\t\t\t\tlet idxAcc = m.index + m[1].length;\n\t\t\t\tlet from = idxAcc;\n\t\t\t\tlet to = idxAcc;\n\n\t\t\t\tlet refLen = refine.length;\n\t\t\t\tlet ri = refLen > 0 ? 0 : Infinity;\n\t\t\t\tlet lastRi = refLen - 3;\n\n\t\t\t\tfor (let i = 2; i < m.length; i++) {\n\t\t\t\t\tlet len = m[i].length;\n\n\t\t\t\t\tif (ri <= lastRi && refine[ri] == idxAcc) {\n\t\t\t\t\t\tlet idxInNext = refine[ri+1];\n\t\t\t\t\t\tlet matchLen = refine[ri+2];\n\t\t\t\t\t\tlet offset = idxInNext + matchLen;\n\n\t\t\t\t\t\tidxAcc += len + offset;\n\t\t\t\t\t\tfrom = idxAcc - matchLen;\n\t\t\t\t\t\tm[i+1] = m[i+1].slice(offset);\n\n\t\t\t\t\t\tri+=3;\n\t\t\t\t\t}\n\t\t\t\t\telse\n\t\t\t\t\t\tidxAcc += len;\n\n\t\t\t\t\tif (i % 2 == 0)\n\t\t\t\t\t\tto = idxAcc;\n\t\t\t\t\telse if (len > 0) {\n\t\t\t\t\t\tranges.push(from, to);\n\t\t\t\t\t\tfrom = to = idxAcc;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tif (to > from)\n\t\t\t\t\tranges.push(from, to);\n\n\t\t\t\tii++;\n\t\t\t}\n\t\t}\n\n\t\t// trim arrays\n\t\tif (ii < idxs.length) {\n\t\t\tfor (let k in info)\n\t\t\t\tinfo[k] = info[k].slice(0, ii);\n\t\t}\n\n\t\treturn info;\n\t};\n\n\tconst refineMatch = (m, k, idxInNext, termLen) => {\n\t\t// shift the current group into the prior junk\n\t\tlet prepend = m[k] + m[k+1].slice(0, idxInNext);\n\t\tm[k-1] += prepend;\n\t\tm[k]    = m[k+1].slice(idxInNext, idxInNext + termLen);\n\t\tm[k+1]  = m[k+1].slice(idxInNext + termLen);\n\t\treturn prepend.length;\n\t};\n\n\t// returns [idxs, info, order]\n\tconst _search = (haystack, needle, outOfOrder = false, infoThresh = 1e3, preFiltered) => {\n\t\tlet needles = null;\n\t\tlet matches = null;\n\n\t\tlet negs = [];\n\n\t\tneedle = needle.replace(NEGS_RE, m => {\n\t\t\tnegs.push(m.trim().slice(1));\n\t\t\treturn '';\n\t\t});\n\n\t\tlet negsRe;\n\n\t\tif (negs.length > 0) {\n\t\t\tnegsRe = new RegExp(negs.join('|'), 'i');\n\n\t\t\tif (needle.trim() == '') {\n\t\t\t\tlet idxs = [];\n\n\t\t\t\tfor (let i = 0; i < haystack.length; i++) {\n\t\t\t\t\tif (!negsRe.test(haystack[i]))\n\t\t\t\t\t\tidxs.push(i);\n\t\t\t\t}\n\n\t\t\t\treturn [idxs, null, null];\n\t\t\t}\n\t\t}\n\n\t//\tconsole.log(negs);\n\t//\tconsole.log(needle);\n\n\t\tif (outOfOrder) {\n\t\t\t// since uFuzzy is an AND-based search, we can iteratively pre-reduce the haystack by searching\n\t\t\t// for each term in isolation before running permutations on what's left.\n\t\t\t// this is a major perf win. e.g. searching \"test man ger pp a\" goes from 570ms -> 14ms\n\t\t\tlet terms = split(needle);\n\n\t\t\tif (terms.length > 1) {\n\t\t\t\t// longest -> shortest\n\t\t\t\tlet terms2 = terms.slice().sort((a, b) => b.length - a.length);\n\n\t\t\t\tfor (let ti = 0; ti < terms2.length; ti++) {\n\t\t\t\t\t// no haystack item contained all terms\n\t\t\t\t\tif (preFiltered && preFiltered.length == 0)\n\t\t\t\t\t\treturn [[], null, null];\n\n\t\t\t\t\tpreFiltered = filter(haystack, terms2[ti], preFiltered);\n\t\t\t\t}\n\n\t\t\t\tneedles = permute(terms).map(perm => perm.join(' '));\n\n\t\t\t\t// filtered matches for each needle excluding same matches for prior needles\n\t\t\t\tmatches = [];\n\n\t\t\t\t// keeps track of already-matched idxs to skip in follow-up permutations\n\t\t\t\tlet matchedIdxs = new Set();\n\n\t\t\t\tfor (let ni = 0; ni < needles.length; ni++) {\n\t\t\t\t\tif (matchedIdxs.size < preFiltered.length) {\n\t\t\t\t\t\t// filter further for this needle, exclude already-matched\n\t\t\t\t\t\tlet preFiltered2 = preFiltered.filter(idx => !matchedIdxs.has(idx));\n\n\t\t\t\t\t\tlet matched = filter(haystack, needles[ni], preFiltered2);\n\n\t\t\t\t\t\tfor (let j = 0; j < matched.length; j++)\n\t\t\t\t\t\t\tmatchedIdxs.add(matched[j]);\n\n\t\t\t\t\t\tmatches.push(matched);\n\t\t\t\t\t}\n\t\t\t\t\telse\n\t\t\t\t\t\tmatches.push([]);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\t// interOR\n\t//\tconsole.log(prepQuery(needle, 1, null, true));\n\n\t\t// non-ooo or ooo w/single term\n\t\tif (needles == null) {\n\t\t\tneedles = [needle];\n\t\t\tmatches = [preFiltered && preFiltered.length > 0 ? preFiltered : filter(haystack, needle)];\n\t\t}\n\n\t\tlet retInfo = null;\n\t\tlet retOrder = null;\n\n\t\tif (negs.length > 0)\n\t\t\tmatches = matches.map(idxs => idxs.filter(idx => !negsRe.test(haystack[idx])));\n\n\t\tlet matchCount = matches.reduce((acc, idxs) => acc + idxs.length, 0);\n\n\t\t// rank, sort, concat\n\t\tif (matchCount <= infoThresh) {\n\t\t\tretInfo = {};\n\t\t\tretOrder = [];\n\n\t\t\tfor (let ni = 0; ni < matches.length; ni++) {\n\t\t\t\tlet idxs = matches[ni];\n\n\t\t\t\tif (idxs == null || idxs.length == 0)\n\t\t\t\t\tcontinue;\n\n\t\t\t\tlet needle = needles[ni];\n\t\t\t\tlet _info = info(idxs, haystack, needle);\n\t\t\t\tlet order = opts.sort(_info, haystack, needle);\n\n\t\t\t\t// offset idxs for concat'ing infos\n\t\t\t\tif (ni > 0) {\n\t\t\t\t\tfor (let i = 0; i < order.length; i++)\n\t\t\t\t\t\torder[i] += retOrder.length;\n\t\t\t\t}\n\n\t\t\t\tfor (let k in _info) {\n\t\t\t\t\tretInfo[k] = (retInfo[k] ? retInfo[k] : []).concat(_info[k]);\n                }\n\n\t\t\t\tretOrder = retOrder.concat(order);\n\t\t\t}\n\t\t}\n\n\t\treturn [\n\t\t\t[].concat(...matches),\n\t\t\tretInfo,\n\t\t\tretOrder,\n\t\t];\n\t};\n\n\treturn {\n\t\tsearch: (...args) => {\n\t\t\tlet out = _search(...args);\n\t\t\treturn out;\n\t\t},\n\t\tsplit,\n\t\tfilter,\n\t\tinfo,\n\t\tsort: opts.sort,\n\t};\n}\n\nconst latinize = (() => {\n\tlet accents = {\n\t\tA: 'ÁÀÃÂÄĄ',\n\t\ta: 'áàãâäą',\n\t\tE: 'ÉÈÊËĖ',\n\t\te: 'éèêëę',\n\t\tI: 'ÍÌÎÏĮ',\n\t\ti: 'íìîïį',\n\t\tO: 'ÓÒÔÕÖ',\n\t\to: 'óòôõö',\n\t\tU: 'ÚÙÛÜŪŲ',\n\t\tu: 'úùûüūų',\n\t\tC: 'ÇČ',\n\t\tc: 'çč',\n\t\tN: 'Ñ',\n\t\tn: 'ñ',\n\t\tS: 'Š',\n\t\ts: 'š'\n\t};\n\n\tlet accentsMap = new Map();\n\tlet accentsTpl = '';\n\n\tfor (let r in accents) {\n\t\taccents[r].split('').forEach(a => {\n\t\t\taccentsTpl += a;\n\t\t\taccentsMap.set(a, r);\n\t\t});\n\t}\n\n\tlet accentsRe = new RegExp(`[${accentsTpl}]`, 'g');\n\tlet replacer = m => accentsMap.get(m);\n\n\treturn strings => {\n\t\tif (typeof strings == 'string')\n\t\t\treturn strings.replace(accentsRe, replacer);\n\n\t\tlet out = Array(strings.length);\n\t\tfor (let i = 0; i < strings.length; i++)\n\t\t\tout[i] = strings[i].replace(accentsRe, replacer);\n\t\treturn out;\n\t};\n})();\n\n// https://stackoverflow.com/questions/9960908/permutations-in-javascript/37580979#37580979\nfunction permute(arr) {\n\tarr = arr.slice();\n\n\tlet length = arr.length,\n\t\tresult = [arr.slice()],\n\t\tc = new Array(length).fill(0),\n\t\ti = 1, k, p;\n\n\twhile (i < length) {\n\t\tif (c[i] < i) {\n\t\t\tk = i % 2 && c[i];\n\t\t\tp = arr[i];\n\t\t\tarr[i] = arr[k];\n\t\t\tarr[k] = p;\n\t\t\t++c[i];\n\t\t\ti = 1;\n\t\t\tresult.push(arr.slice());\n\t\t} else {\n\t\t\tc[i] = 0;\n\t\t\t++i;\n\t\t}\n\t}\n\n\treturn result;\n}\n\nconst _mark = (part, matched) => matched ? `<mark>${part}</mark>` : part;\nconst _append = (acc, part) => acc + part;\n\nfunction highlight(str, ranges, mark = _mark, accum = '', append = _append) {\n    let tmp = append(accum, mark(str.substring(0, ranges[0]), false));\n\taccum = tmp !== null ? tmp : accum;\n\n\tfor (let i = 0; i < ranges.length; i+=2) {\n\t\tlet fr = ranges[i];\n\t\tlet to = ranges[i+1];\n\n        tmp = append(accum, mark(str.substring(fr, to), true));\n\t\taccum = tmp !== null ? tmp : accum;\n\n\t\tif (i < ranges.length - 3) {\n            tmp = append(accum, mark(str.substring(ranges[i + 1], ranges[i + 2]), false));\n            accum = tmp !== null ? tmp : accum;\n        }\n\t}\n\n    tmp = append(accum, mark(str.substring(ranges[ranges.length - 1]), false));\n\taccum = tmp !== null ? tmp : accum;\n\n\treturn accum;\n}\n\nuFuzzy.latinize = latinize;\nuFuzzy.permute = arr => {\n\tlet idxs = permute([...Array(arr.length).keys()]).sort((a,b) => {\n\t\tfor (let i = 0; i < a.length; i++) {\n\t\t\tif (a[i] != b[i])\n\t\t\t\treturn a[i] - b[i];\n\t\t}\n\t\treturn 0;\n\t});\n\n\treturn idxs.map(pi => pi.map(i => arr[i]));\n};\nuFuzzy.highlight = highlight;\n\nexport { uFuzzy as default };\n","import uFuzzy from '@leeoniya/ufuzzy';\n// See https://github.com/leeoniya/uFuzzy#options\nconst uf = new uFuzzy({\n    intraMode: 1,\n    intraIns: 1,\n    intraSub: 1,\n    intraTrn: 1,\n    intraDel: 1,\n});\nfunction sortCommands(a, b, favouriteCommands, recentCommands) {\n    // Sort by recent first\n    const aIsRecent = recentCommands.includes(a.id);\n    const bIsRecent = recentCommands.includes(b.id);\n    if (aIsRecent && !bIsRecent) {\n        return -1;\n    }\n    if (!aIsRecent && bIsRecent) {\n        return 1;\n    }\n    if (aIsRecent && bIsRecent) {\n        return recentCommands.indexOf(a.id) - recentCommands.indexOf(b.id);\n    }\n    // Sort by favourites second\n    const aIsFavourite = favouriteCommands.includes(a.id);\n    const bIsFavourite = favouriteCommands.includes(b.id);\n    if (aIsFavourite && !bIsFavourite) {\n        return -1;\n    }\n    if (!aIsFavourite && bIsFavourite) {\n        return 1;\n    }\n    // Sort by name third\n    return a.name.localeCompare(b.name);\n}\nexport default function filterCommands(selectedCommandGroup, searchWord, commands, favourites, recentCommands) {\n    // If there is a search word, return all commands to allow deep search\n    // If no search word is given, return all commands in the currently selected group or all recent commands if no group is selected\n    let availableCommands = Object.values(commands);\n    availableCommands = searchWord\n        ? availableCommands\n        : availableCommands.filter((command) => command.parentId === selectedCommandGroup ||\n            (!selectedCommandGroup && recentCommands.includes(command.id)));\n    // If there is no search word, return all commands in the current context with favourites first, the recent commands will only be prioritised if we are at the top level\n    if (!searchWord) {\n        return availableCommands\n            .sort((a, b) => sortCommands(a, b, favourites, selectedCommandGroup ? [] : recentCommands))\n            .map((command) => command.id);\n    }\n    // Create a list of all available commands with their name and description as haystack for the search\n    const availableCommandNames = availableCommands.map(({ name, description }) => name + ' ' + description);\n    const [indices, , order] = uf.search(availableCommandNames, searchWord.toLowerCase());\n    const matchingIds = order.map((i) => availableCommands[indices[i]].id);\n    // Add all commands that can handle queries to the result, the Set removes duplicates\n    return matchingIds;\n}\n","export default function assert(condition, message = 'Assertion failed') {\n    if (condition === false)\n        throw Error(message);\n}\n","export default function classnames(...args) {\n    return args.filter(Boolean).join(' ');\n}\n","import { logger } from '../helpers';\nexport var STATUS;\n(function (STATUS) {\n    STATUS[\"COLLAPSED\"] = \"collapsed\";\n    STATUS[\"IDLE\"] = \"idle\";\n    STATUS[\"EXECUTING_COMMAND\"] = \"executingCommand\";\n    STATUS[\"DISPLAYING_RESULT\"] = \"displayingResult\";\n})(STATUS || (STATUS = {}));\nexport var TRANSITION;\n(function (TRANSITION) {\n    TRANSITION[\"RESET_SEARCH\"] = \"RESET_SEARCH\";\n    TRANSITION[\"HIGHLIGHT_NEXT_ITEM\"] = \"HIGHLIGHT_NEXT_ITEM\";\n    TRANSITION[\"HIGHLIGHT_PREVIOUS_ITEM\"] = \"HIGHLIGHT_PREVIOUS_ITEM\";\n    TRANSITION[\"CANCEL\"] = \"CANCEL\";\n    TRANSITION[\"SELECT_GROUP\"] = \"SELECT_GROUP\";\n    TRANSITION[\"GO_TO_PARENT_GROUP\"] = \"GO_TO_PARENT_GROUP\";\n    TRANSITION[\"UPDATE_SEARCH\"] = \"UPDATE_SEARCH\";\n    TRANSITION[\"UPDATE_COMMAND_QUERY\"] = \"UPDATE_COMMAND_QUERY\";\n    TRANSITION[\"EXECUTE_COMMAND\"] = \"EXECUTE_COMMAND\";\n    TRANSITION[\"FINISH_COMMAND\"] = \"FINISH_COMMAND\";\n    TRANSITION[\"UPDATE_RESULT\"] = \"UPDATE_RESULT\";\n    TRANSITION[\"EXPAND\"] = \"EXPAND\";\n    TRANSITION[\"ADD_FAVOURITE\"] = \"ADD_FAVOURITE\";\n    TRANSITION[\"REMOVE_FAVOURITE\"] = \"REMOVE_FAVOURITE\";\n})(TRANSITION || (TRANSITION = {}));\nexport var ACTION;\n(function (ACTION) {\n    ACTION[\"ADD_FAVOURITE\"] = \"ADD_FAVOURITE\";\n    ACTION[\"ADD_RECENTLY_USED\"] = \"ADD_RECENTLY_USED\";\n    ACTION[\"EXPAND\"] = \"EXPAND\";\n    ACTION[\"HIGHLIGHT_NEXT_COMMAND\"] = \"HIGHLIGHT_NEXT_COMMAND\";\n    ACTION[\"HIGHLIGHT_NEXT_OPTION\"] = \"HIGHLIGHT_NEXT_OPTION\";\n    ACTION[\"HIGHLIGHT_PREVIOUS_COMMAND\"] = \"HIGHLIGHT_PREVIOUS_COMMAND\";\n    ACTION[\"HIGHLIGHT_PREVIOUS_OPTION\"] = \"HIGHLIGHT_PREVIOUS_OPTION\";\n    ACTION[\"LEAVE_GROUP\"] = \"LEAVE_GROUP\";\n    ACTION[\"REFRESH_COMMANDS\"] = \"REFRESH_COMMANDS\";\n    ACTION[\"REMOVE_FAVOURITE\"] = \"REMOVE_FAVOURITE\";\n    ACTION[\"RESET_HIGHLIGHT\"] = \"RESET_HIGHLIGHT\";\n    ACTION[\"RESET_OPTION_HIGHLIGHT\"] = \"RESET_OPTION_HIGHLIGHT\";\n    ACTION[\"RESET_SEARCH\"] = \"RESET_SEARCH\";\n    ACTION[\"RESET_SEARCH_OR_LEAVE_GROUP\"] = \"RESET_SEARCH_OR_LEAVE_GROUP\";\n    ACTION[\"SET_ACTIVE_COMMAND\"] = \"SET_ACTIVE_COMMAND\";\n    ACTION[\"SET_COMMAND_QUERY\"] = \"SET_COMMAND_QUERY\";\n    ACTION[\"SET_GROUP\"] = \"SET_GROUP\";\n    ACTION[\"SET_SEARCH_WORD\"] = \"SET_SEARCH_WORD\";\n    ACTION[\"UNSET_ACTIVE_COMMAND\"] = \"UNSET_ACTIVE_COMMAND\";\n    ACTION[\"UNSET_RESULT\"] = \"UNSET_RESULT\";\n    ACTION[\"UPDATE_RESULT\"] = \"UPDATE_RESULT\";\n})(ACTION || (ACTION = {}));\nexport const machine = {\n    initial: STATUS.COLLAPSED,\n    states: {\n        collapsed: {\n            on: {\n                UPDATE_SEARCH: {\n                    target: STATUS.IDLE,\n                    actions: [ACTION.EXPAND, ACTION.SET_SEARCH_WORD, ACTION.REFRESH_COMMANDS],\n                },\n                HIGHLIGHT_NEXT_ITEM: {\n                    target: STATUS.IDLE,\n                    actions: [ACTION.REFRESH_COMMANDS, ACTION.EXPAND],\n                },\n                EXPAND: {\n                    target: STATUS.IDLE,\n                    actions: [ACTION.REFRESH_COMMANDS, ACTION.EXPAND],\n                },\n            },\n        },\n        idle: {\n            on: {\n                UPDATE_SEARCH: {\n                    target: STATUS.IDLE,\n                    actions: [ACTION.SET_SEARCH_WORD, ACTION.RESET_HIGHLIGHT, ACTION.REFRESH_COMMANDS],\n                },\n                HIGHLIGHT_NEXT_ITEM: {\n                    target: STATUS.IDLE,\n                    actions: [ACTION.HIGHLIGHT_NEXT_COMMAND],\n                },\n                HIGHLIGHT_PREVIOUS_ITEM: {\n                    target: STATUS.IDLE,\n                    actions: [ACTION.HIGHLIGHT_PREVIOUS_COMMAND],\n                },\n                CANCEL: {\n                    target: STATUS.IDLE,\n                    actions: [ACTION.RESET_HIGHLIGHT, ACTION.RESET_SEARCH_OR_LEAVE_GROUP, ACTION.REFRESH_COMMANDS],\n                },\n                EXECUTE_COMMAND: {\n                    target: STATUS.EXECUTING_COMMAND,\n                    actions: [ACTION.ADD_RECENTLY_USED, ACTION.SET_ACTIVE_COMMAND, ACTION.REFRESH_COMMANDS],\n                },\n                GO_TO_PARENT_GROUP: {\n                    target: STATUS.IDLE,\n                    actions: [ACTION.RESET_HIGHLIGHT, ACTION.LEAVE_GROUP, ACTION.REFRESH_COMMANDS],\n                },\n                SELECT_GROUP: {\n                    target: STATUS.IDLE,\n                    actions: [ACTION.RESET_SEARCH, ACTION.RESET_HIGHLIGHT, ACTION.SET_GROUP, ACTION.REFRESH_COMMANDS],\n                },\n                ADD_FAVOURITE: {\n                    target: STATUS.IDLE,\n                    actions: [ACTION.ADD_FAVOURITE, ACTION.REFRESH_COMMANDS],\n                },\n                REMOVE_FAVOURITE: {\n                    target: STATUS.IDLE,\n                    actions: [ACTION.REMOVE_FAVOURITE, ACTION.REFRESH_COMMANDS],\n                },\n            },\n        },\n        executingCommand: {\n            on: {\n                UPDATE_RESULT: {\n                    target: STATUS.DISPLAYING_RESULT,\n                    actions: [ACTION.UPDATE_RESULT],\n                },\n                FINISH_COMMAND: {\n                    target: STATUS.IDLE,\n                    actions: [ACTION.UNSET_ACTIVE_COMMAND],\n                },\n            },\n        },\n        displayingResult: {\n            on: {\n                UPDATE_COMMAND_QUERY: {\n                    target: STATUS.DISPLAYING_RESULT,\n                    actions: [ACTION.SET_COMMAND_QUERY],\n                },\n                UPDATE_RESULT: {\n                    target: STATUS.DISPLAYING_RESULT,\n                    actions: [ACTION.UPDATE_RESULT, ACTION.RESET_OPTION_HIGHLIGHT],\n                },\n                HIGHLIGHT_NEXT_ITEM: {\n                    target: STATUS.DISPLAYING_RESULT,\n                    actions: [ACTION.HIGHLIGHT_NEXT_OPTION],\n                },\n                HIGHLIGHT_PREVIOUS_ITEM: {\n                    target: STATUS.DISPLAYING_RESULT,\n                    actions: [ACTION.HIGHLIGHT_PREVIOUS_OPTION],\n                },\n                EXECUTE_COMMAND: {\n                    target: STATUS.DISPLAYING_RESULT,\n                    actions: [ACTION.SET_ACTIVE_COMMAND],\n                },\n                CANCEL: {\n                    target: STATUS.IDLE,\n                    actions: [ACTION.UNSET_RESULT, ACTION.UNSET_ACTIVE_COMMAND, ACTION.RESET_OPTION_HIGHLIGHT],\n                },\n                FINISH_COMMAND: {\n                    target: STATUS.DISPLAYING_RESULT,\n                    actions: [ACTION.UNSET_ACTIVE_COMMAND],\n                },\n            },\n        },\n    },\n};\nexport function transition(state, event, actionCallback) {\n    var _a, _b, _c;\n    let nextStateNode = (_b = (_a = machine.states[state.status].on) === null || _a === void 0 ? void 0 : _a[event.type]) !== null && _b !== void 0 ? _b : null;\n    if (!nextStateNode) {\n        logger.error(`No transition found for event \"${event.type}\" in state \"${state.status}\"`);\n        nextStateNode = { target: state.status };\n    }\n    const nextState = {\n        ...state,\n        status: typeof nextStateNode == 'string' ? nextStateNode : nextStateNode.target,\n    };\n    if (actionCallback && typeof nextStateNode == 'object') {\n        (_c = nextStateNode.actions) === null || _c === void 0 ? void 0 : _c.forEach((action) => actionCallback(action, nextState, event));\n    }\n    logger.debug(`Transitioned from \"${state.status}\" to \"${nextState.status}\" with event \"${event.type}\"`);\n    return nextState;\n}\n","import { assert, clamp, filterCommands } from '../helpers';\nimport { ACTION, TRANSITION, transition } from './commandBarMachine';\nconst MAX_RECENTLY_USED = 5;\nfunction runAction(action, nextState, event) {\n    switch (action) {\n        case ACTION.RESET_SEARCH:\n            nextState.searchWord = '';\n            break;\n        case ACTION.RESET_HIGHLIGHT:\n            nextState.highlightedItem = 0;\n            break;\n        case ACTION.REFRESH_COMMANDS:\n            nextState.availableCommandIds = filterCommands(nextState.selectedCommandGroup, nextState.searchWord, nextState.commands, nextState.favouriteCommands, nextState.recentCommands);\n            break;\n        case ACTION.HIGHLIGHT_NEXT_COMMAND:\n            nextState.highlightedItem = clamp(nextState.highlightedItem + 1, 0, nextState.availableCommandIds.length - 1);\n            break;\n        case ACTION.HIGHLIGHT_PREVIOUS_COMMAND:\n            nextState.highlightedItem = clamp(nextState.highlightedItem - 1, 0, nextState.availableCommandIds.length - 1);\n            break;\n        case ACTION.HIGHLIGHT_NEXT_OPTION:\n            nextState.highlightedOption = clamp(nextState.highlightedOption + 1, 0, Object.keys(nextState.result.options).length - 1);\n            break;\n        case ACTION.HIGHLIGHT_PREVIOUS_OPTION:\n            nextState.highlightedOption = clamp(nextState.highlightedOption - 1, 0, Object.keys(nextState.result.options).length - 1);\n            break;\n        case ACTION.SET_SEARCH_WORD:\n            assert(event.type === TRANSITION.UPDATE_SEARCH);\n            nextState.searchWord = event.searchWord;\n            break;\n        case ACTION.SET_COMMAND_QUERY:\n            assert(event.type === TRANSITION.UPDATE_COMMAND_QUERY);\n            nextState.commandQuery = event.commandQuery;\n            nextState.commandQueryDirty = true;\n            break;\n        case ACTION.EXPAND:\n            nextState.expanded = true;\n            break;\n        case ACTION.SET_ACTIVE_COMMAND:\n            assert(event.type === TRANSITION.EXECUTE_COMMAND);\n            nextState.activeCommandId = event.commandId;\n            nextState.activeCommandMessage = event.message;\n            break;\n        case ACTION.UNSET_ACTIVE_COMMAND:\n            nextState.activeCommandId = null;\n            nextState.activeCommandMessage = null;\n            break;\n        case ACTION.UPDATE_RESULT:\n            assert(event.type === TRANSITION.UPDATE_RESULT);\n            assert(typeof event.result.success === 'boolean');\n            nextState.result = {\n                options: {},\n                message: 'Command executed',\n                view: null,\n                success: false,\n                ...event.result,\n            };\n            nextState.resultCommandId = nextState.activeCommandId;\n            nextState.commandQueryDirty = false;\n            break;\n        case ACTION.RESET_OPTION_HIGHLIGHT:\n            nextState.highlightedOption = 0;\n            break;\n        case ACTION.RESET_SEARCH_OR_LEAVE_GROUP:\n            if (nextState.commandQuery) {\n                nextState.commandQuery = '';\n            }\n            else if (nextState.searchWord) {\n                nextState.searchWord = '';\n            }\n            else {\n                nextState.selectedCommandGroup = nextState.selectedCommandGroup\n                    ? nextState.commands[nextState.selectedCommandGroup].parentId\n                    : null;\n            }\n            break;\n        case ACTION.UNSET_RESULT:\n            nextState.result = null;\n            nextState.resultCommandId = null;\n            nextState.commandQuery = '';\n            break;\n        case ACTION.LEAVE_GROUP:\n            nextState.selectedCommandGroup = nextState.selectedCommandGroup\n                ? nextState.commands[nextState.selectedCommandGroup].parentId\n                : null;\n            break;\n        case ACTION.SET_GROUP:\n            assert(event.type === TRANSITION.SELECT_GROUP);\n            nextState.selectedCommandGroup = event.commandId;\n            break;\n        case ACTION.ADD_FAVOURITE:\n            assert(event.type === TRANSITION.ADD_FAVOURITE);\n            if (!nextState.favouriteCommands.includes(event.commandId)) {\n                nextState.favouriteCommands = [...nextState.favouriteCommands, event.commandId];\n            }\n            break;\n        case ACTION.REMOVE_FAVOURITE:\n            assert(event.type === TRANSITION.REMOVE_FAVOURITE);\n            nextState.favouriteCommands = nextState.favouriteCommands.filter((id) => id !== event.commandId);\n            break;\n        case ACTION.ADD_RECENTLY_USED:\n            assert(event.type === TRANSITION.EXECUTE_COMMAND);\n            // Only add to recently used if the command has an action\n            if (!nextState.commands[event.commandId].action) {\n                break;\n            }\n            if (nextState.recentCommands.includes(event.commandId)) {\n                nextState.recentCommands = nextState.recentCommands.filter((id) => id !== event.commandId);\n            }\n            nextState.recentCommands.unshift(event.commandId);\n            if (nextState.recentCommands.length > MAX_RECENTLY_USED) {\n                nextState.recentCommands.pop();\n            }\n            break;\n        default:\n            throw Error(`Action ${action} not implemented`);\n    }\n}\nconst commandBarReducer = (state, event) => {\n    return transition(state, event, runAction);\n};\nexport { commandBarReducer };\n","import React from 'react';\nimport * as styles from './IconWrapper.module.css';\nconst IconWrapper = ({ children }) => {\n    return React.createElement(\"span\", { className: styles.iconWrap }, children);\n};\nexport default React.memo(IconWrapper);\n","import React from 'react';\nimport { useCommandBarState, useIntl } from '../../state';\nimport * as styles from './Branding.module.css';\nconst Branding = () => {\n    const { state: { showBranding }, } = useCommandBarState();\n    const { translate } = useIntl();\n    if (!showBranding)\n        return null;\n    return (React.createElement(\"a\", { href: \"https://helzle.it/projects?source=commandbar\", title: translate('CommandBarFooter.branding', 'Made with love by Sebastian Helzle'), target: \"_blank\", rel: \"noreferrer noopener\", className: styles.madeWithLove },\n        React.createElement(\"small\", null, translate('CommandBarFooter.brandingSmall', 'Made with love by')),\n        React.createElement(\"svg\", { xmlns: \"http://www.w3.org/2000/svg\", width: \"18\", height: \"18\", viewBox: \"0 0 180 180\" },\n            React.createElement(\"defs\", null,\n                React.createElement(\"linearGradient\", { id: \"a\", gradientUnits: \"userSpaceOnUse\", x1: \"280.25\", y1: \"377.003\", x2: \"373.261\", y2: \"377.003\" },\n                    React.createElement(\"stop\", { offset: \"0\", stopColor: \"#297AAC\" }),\n                    React.createElement(\"stop\", { offset: \"1\", stopColor: \"#53AADA\" }))),\n            React.createElement(\"path\", { d: \"M0 180.017h37.287L71.35 52.898H34.061zM48.717 0l-9.083 33.898h36.675L85.392 0z\", fill: \"#B9B7B3\" }),\n            React.createElement(\"path\", { d: \"M335.972 313.444H288.25l-8 28.306h47.691l-28.03 98.813h39.287l34.063-127.119z\", fill: \"url(#a)\", transform: \"translate(-195.462 -260.325)\" }))));\n};\nexport default React.memo(Branding);\n","import React from 'react';\nexport function IconBack() {\n    return (React.createElement(\"svg\", { viewBox: \"0 0 448 512\" },\n        React.createElement(\"path\", { fill: \"currentColor\", d: \"m257.5 445.1-22.2 22.2c-9.4 9.4-24.6 9.4-33.9 0L7 273c-9.4-9.4-9.4-24.6 0-33.9L201.4 44.7c9.4-9.4 24.6-9.4 33.9 0l22.2 22.2c9.5 9.5 9.3 25-.4 34.3L136.6 216H424c13.3 0 24 10.7 24 24v32c0 13.3-10.7 24-24 24H136.6l120.5 114.8c9.8 9.3 10 24.8.4 34.3z\" })));\n}\n","import React from 'react';\nexport function IconNeos() {\n    return (React.createElement(\"svg\", { viewBox: \"0 0 512 512\" },\n        React.createElement(\"path\", { fill: \"currentColor\", d: \"M415.44 512h-95.11L212.12 357.46v91.1L125.69 512H28V29.82L68.47 0h108.05l123.74 176.13V63.45L386.69 0h97.69v461.5zM38.77 35.27V496l72-52.88V194l215.5 307.64h84.79l52.35-38.17h-78.27L69 13zm82.54 466.61 80-58.78v-101l-79.76-114.4v220.94L49 501.89h72.34zM80.63 10.77l310.6 442.57h82.37V10.77h-79.75v317.56L170.91 10.77zM311 191.65l72 102.81V15.93l-72 53v122.72z\" })));\n}\n","import React from 'react';\nexport function IconSpinner() {\n    return (React.createElement(\"svg\", { viewBox: \"0 0 512 512\" },\n        React.createElement(\"path\", { fill: \"currentColor\", d: \"M288 39.056v16.659c0 10.804 7.281 20.159 17.686 23.066C383.204 100.434 440 171.518 440 256c0 101.689-82.295 184-184 184-101.689 0-184-82.295-184-184 0-84.47 56.786-155.564 134.312-177.219C216.719 75.874 224 66.517 224 55.712V39.064c0-15.709-14.834-27.153-30.046-23.234C86.603 43.482 7.394 141.206 8.003 257.332c.72 137.052 111.477 246.956 248.531 246.667C393.255 503.711 504 392.788 504 256c0-115.633-79.14-212.779-186.211-240.236C302.678 11.889 288 23.456 288 39.056z\" })));\n}\n","import React from 'react';\nexport function IconStar() {\n    return (React.createElement(\"svg\", { viewBox: \"0 0 576 512\" },\n        React.createElement(\"path\", { fill: \"currentColor\", d: \"M528.1 171.5 382 150.2 316.7 17.8c-11.7-23.6-45.6-23.9-57.4 0L194 150.2 47.9 171.5c-26.2 3.8-36.7 36.1-17.7 54.6l105.7 103-25 145.5c-4.5 26.3 23.2 46 46.4 33.7L288 439.6l130.7 68.7c23.2 12.2 50.9-7.4 46.4-33.7l-25-145.5 105.7-103c19-18.5 8.5-50.8-17.7-54.6zM388.6 312.3l23.7 138.4L288 385.4l-124.3 65.3 23.7-138.4-100.6-98 139-20.2 62.2-126 62.2 126 139 20.2-100.6 98z\" })));\n}\n","import React from 'react';\nexport function IconPlay() {\n    return (React.createElement(\"svg\", { viewBox: \"0 0 512 512\" },\n        React.createElement(\"path\", { fill: \"currentColor\", d: \"M256 8C119 8 8 119 8 256s111 248 248 248 248-111 248-248S393 8 256 8zm115.7 272l-176 101c-15.8 8.8-35.7-2.5-35.7-21V152c0-18.4 19.8-29.8 35.7-21l176 107c16.4 9.2 16.4 32.9 0 42z\" })));\n}\n","import React from 'react';\nexport function IconRepeat() {\n    return (React.createElement(\"svg\", { xmlns: \"http://www.w3.org/2000/svg\", viewBox: \"0 0 512 512\" },\n        React.createElement(\"path\", { fill: \"currentColor\", d: \"M0 224c0 17.7 14.3 32 32 32s32-14.3 32-32c0-53 43-96 96-96H320v32c0 12.9 7.8 24.6 19.8 29.6s25.7 2.2 34.9-6.9l64-64c12.5-12.5 12.5-32.8 0-45.3l-64-64c-9.2-9.2-22.9-11.9-34.9-6.9S320 19.1 320 32V64H160C71.6 64 0 135.6 0 224zm512 64c0-17.7-14.3-32-32-32s-32 14.3-32 32c0 53-43 96-96 96H192V352c0-12.9-7.8-24.6-19.8-29.6s-25.7-2.2-34.9 6.9l-64 64c-12.5 12.5-12.5 32.8 0 45.3l64 64c9.2 9.2 22.9 11.9 34.9 6.9s19.8-16.6 19.8-29.6V448H352c88.4 0 160-71.6 160-160z\" })));\n}\n","import React from 'react';\nimport { useComputed } from '@preact/signals';\nimport { useCommandBarState } from '../../state';\nimport IconWrapper from '../IconWrapper/IconWrapper';\nimport Branding from './Branding';\nimport { IconNeos, IconSpinner } from '../Icons';\nimport * as styles from './CommandBarFooter.module.css';\nconst CommandBarFooter = () => {\n    const { state: { activeCommandId, activeCommandMessage, commands, result, selectedCommandGroup, expanded }, Icon, } = useCommandBarState();\n    const runningCommand = useComputed(() => {\n        var _a;\n        if (!activeCommandId.value)\n            return null;\n        // FIXME: This will not be correct when a command and an option in the result have the same id\n        return activeCommandId.value\n            ? (_a = commands.value[activeCommandId.value]) !== null && _a !== void 0 ? _a : result.value.options[activeCommandId.value]\n            : null;\n    });\n    if (!expanded.value)\n        return null;\n    return (React.createElement(\"footer\", { className: styles.commandBarFooter },\n        activeCommandId.value ? (React.createElement(\"span\", { className: styles.activity },\n            React.createElement(IconWrapper, null,\n                React.createElement(IconSpinner, null)),\n            React.createElement(\"em\", null,\n                runningCommand.value.name,\n                \" \\u2012 \",\n                activeCommandMessage))) : selectedCommandGroup.value ? (React.createElement(\"span\", { className: styles.breadcrumb },\n            React.createElement(Icon, { icon: commands.value[selectedCommandGroup.value].icon }),\n            React.createElement(\"small\", null, commands.value[selectedCommandGroup.value].name))) : (React.createElement(IconWrapper, null,\n            React.createElement(IconNeos, null))),\n        React.createElement(Branding, null)));\n};\nexport default React.memo(CommandBarFooter);\n","import React, { useCallback, useRef } from 'react';\nimport { useSignalEffect } from '@preact/signals';\nimport { useCommandBarState, STATUS, useIntl, useCommandExecutor } from '../../state';\nimport IconWrapper from '../IconWrapper/IconWrapper';\nimport { IconPlay, IconRepeat } from '../Icons';\nimport * as styles from './SearchBox.module.css';\n// Timer helper for debouncing updates of command query results\nlet updateResultsTimer = null;\nconst RESULT_UPDATE_DEBOUNCE_TIME = 500;\nconst SearchBox = () => {\n    var _a;\n    const { state, actions } = useCommandBarState();\n    const { executeCommand } = useCommandExecutor();\n    const { translate } = useIntl();\n    const inputRef = useRef();\n    const activeCommand = state.commands.value[state.activeCommandId.value || state.resultCommandId.value];\n    const handleChange = useCallback((e) => {\n        var _a;\n        if (state.status.value === STATUS.DISPLAYING_RESULT) {\n            actions.UPDATE_COMMAND_QUERY(e.target.value);\n            // Execute command after a delay if it's not a manual command\n            if (!((_a = state.commands.value[state.resultCommandId.value]) === null || _a === void 0 ? void 0 : _a.executeManually)) {\n                if (updateResultsTimer) {\n                    clearTimeout(updateResultsTimer);\n                }\n                updateResultsTimer = setTimeout(() => executeCommand(state.resultCommandId.value), RESULT_UPDATE_DEBOUNCE_TIME);\n            }\n        }\n        else {\n            actions.UPDATE_SEARCH(e.target.value);\n        }\n    }, []);\n    const handleKeyPress = useCallback((e) => {\n        // Prevent escape event from bubbling up if the input is focused and the native reset should be used\n        if (e.key === 'Escape') {\n            if (inputRef.current.value) {\n                e.preventDefault();\n                e.stopPropagation();\n            }\n        }\n    }, [inputRef.current]);\n    // Focus input when the command bar is ready for input\n    useSignalEffect(() => {\n        var _a;\n        if (state.status.value !== STATUS.EXECUTING_COMMAND) {\n            (_a = inputRef.current) === null || _a === void 0 ? void 0 : _a.focus();\n        }\n    });\n    return (React.createElement(React.Fragment, null,\n        React.createElement(\"input\", { ref: inputRef, className: styles.searchBox, type: \"search\", placeholder: state.status.value === STATUS.DISPLAYING_RESULT\n                ? translate('SearchBox.commandQuery.placeholder', 'Enter the query for the command')\n                : translate('SearchBox.placeholder', 'What do you want to do today?'), disabled: state.status.value === STATUS.DISPLAYING_RESULT && !(activeCommand === null || activeCommand === void 0 ? void 0 : activeCommand.canHandleQueries), autoFocus: true, onChange: handleChange, onKeyUp: handleKeyPress, value: (state.status.value === STATUS.DISPLAYING_RESULT\n                ? state.commandQuery\n                : state.searchWord), \"data-testid\": \"SearchBox\" }),\n        !state.expanded.value && (React.createElement(\"button\", { className: styles.expandButton, onClick: actions.EXPAND, title: translate('SearchBox.expand.title', 'Expand to show all commands') },\n            React.createElement(IconWrapper, null,\n                React.createElement(\"svg\", { xmlns: \"http://www.w3.org/2000/svg\", viewBox: \"0 0 320 512\" },\n                    React.createElement(\"path\", { fill: \"currentColor\", d: \"M31.3 192h257.3c17.8 0 26.7 21.5 14.1 34.1L174.1 354.8c-7.8 7.8-20.5 7.8-28.3 0L17.2 226.1C4.6 213.5 13.5 192 31.3 192z\" }))))),\n        state.status.value === STATUS.DISPLAYING_RESULT &&\n            ((_a = state.commands.value[state.resultCommandId.value]) === null || _a === void 0 ? void 0 : _a.executeManually) &&\n            !state.activeCommandId.value && (React.createElement(\"button\", { className: [\n                styles.executeButton,\n                state.commandQueryDirty.value ? styles.commandQueryDirty : '',\n            ].join(' '), onClick: () => executeCommand(state.resultCommandId.value), title: translate('SearchBox.execute.title', 'Execute the command') },\n            React.createElement(IconWrapper, null, state.commandQueryDirty.value ? React.createElement(IconPlay, null) : React.createElement(IconRepeat, null))))));\n};\nexport default React.memo(SearchBox);\n","import React from 'react';\nimport { useComputed } from '@preact/signals';\nimport { useCommandBarState, STATUS } from '../../state';\nimport IconWrapper from '../IconWrapper/IconWrapper';\nimport SearchBox from '../SearchBox/SearchBox';\nimport { IconBack } from '../Icons';\nimport * as styles from './CommandBarHeader.module.css';\nconst CommandBarHeader = () => {\n    const { state, actions } = useCommandBarState();\n    const isDisplayingResults = useComputed(() => state.status.value == STATUS.DISPLAYING_RESULT);\n    return (React.createElement(\"header\", { className: styles.commandBarHeader },\n        (isDisplayingResults.value || state.selectedCommandGroup.value) && (React.createElement(\"button\", { type: \"button\", onClick: isDisplayingResults.value ? actions.CANCEL : actions.GO_TO_PARENT_GROUP, className: styles.backButton, title: \"Back\" },\n            React.createElement(IconWrapper, null,\n                React.createElement(IconBack, null)))),\n        React.createElement(SearchBox, null)));\n};\nexport default React.memo(CommandBarHeader);\n","import React from 'react';\nimport { useComputed } from '@preact/signals';\nimport { IconWrapper } from '../index';\nimport { classnames } from '../../helpers';\nimport { IconStar } from '../Icons';\nimport * as styles from './CommandListItem.module.css';\nimport { useCommandBarState, useIntl } from '../../state';\nfunction getCommandType({ subCommandIds, category, canHandleQueries, action }, translate) {\n    let type = 'command';\n    if (category) {\n        return category;\n    }\n    else if ((subCommandIds === null || subCommandIds === void 0 ? void 0 : subCommandIds.length) > 0) {\n        type = 'category';\n    }\n    else if (canHandleQueries) {\n        type = 'query';\n    }\n    else if (typeof action == 'string') {\n        type = 'link';\n    }\n    return translate(`CommandListItem.type.${type}`, type);\n}\nfunction CommandListItem({ command, onItemSelect, highlightedId, onToggleFavourite }) {\n    const { state: { favouriteCommands }, Icon, } = useCommandBarState();\n    const { translate } = useIntl();\n    const { id, name, description, icon, action } = command;\n    const commandType = getCommandType(command, translate);\n    const isHighlighted = useComputed(() => highlightedId.value === id);\n    const isFavourite = useComputed(() => favouriteCommands.value.includes(id));\n    return (React.createElement(\"li\", { className: classnames(styles.commandListItem, isHighlighted.value && styles.highlighted), onClick: () => onItemSelect(id), \"data-testid\": \"CommandListItem\" },\n        React.createElement(Icon, { icon: icon }),\n        React.createElement(\"span\", { className: styles.label },\n            React.createElement(\"span\", null, name),\n            description && (React.createElement(\"span\", { className: styles.description }, typeof description == 'string' ? description : description()))),\n        onToggleFavourite && action && (React.createElement(\"button\", { type: \"button\", className: classnames(styles.favouriteButton, isFavourite.value && styles.isFavourite), title: translate('CommandListItem.toggleFavourite', 'Toggle favourite'), onClick: (e) => {\n                e.stopPropagation();\n                onToggleFavourite(id);\n            } },\n            React.createElement(IconWrapper, null,\n                React.createElement(IconStar, null)))),\n        React.createElement(\"small\", { className: styles.type }, commandType)));\n}\n// Use memo to prevent rerendering of all items when the parent list is updated\nexport default React.memo(CommandListItem);\n","import React, { useCallback } from 'react';\nimport { useComputed, useSignalEffect } from '@preact/signals';\nimport CommandListItem from '../CommandListItem/CommandListItem';\nimport { useCommandBarState, useCommandExecutor, useIntl, STATUS } from '../../state';\nimport { classnames } from '../../helpers';\nimport * as styles from './CommandListing.module.css';\nconst CommandList = () => {\n    const { state: { commands, highlightedItem, availableCommandIds, status, searchWord, favouriteCommands, recentCommands, selectedCommandGroup, }, actions: { ADD_FAVOURITE, REMOVE_FAVOURITE }, } = useCommandBarState();\n    const { translate } = useIntl();\n    const { executeCommand } = useCommandExecutor();\n    const navRef = React.useRef(null);\n    useSignalEffect(() => {\n        var _a, _b;\n        (_b = (_a = navRef.current) === null || _a === void 0 ? void 0 : _a.querySelector(`li:nth-child(${highlightedItem.value})`)) === null || _b === void 0 ? void 0 : _b.scrollIntoView({ behavior: 'smooth', block: 'center' });\n    });\n    const handleToggleFavourite = useCallback((commandId) => {\n        if (favouriteCommands.value.includes(commandId)) {\n            REMOVE_FAVOURITE(commandId);\n        }\n        else {\n            ADD_FAVOURITE(commandId);\n        }\n    }, [favouriteCommands]);\n    const suggestions = useComputed(() => {\n        return searchWord.value || selectedCommandGroup.value\n            ? []\n            : availableCommandIds.value.filter((commandId) => recentCommands.value.includes(commandId));\n    });\n    const availableCommands = useComputed(() => {\n        return searchWord.value || selectedCommandGroup.value\n            ? availableCommandIds.value\n            : availableCommandIds.value.filter((commandId) => !recentCommands.value.includes(commandId));\n    });\n    const highlightedCommand = useComputed(() => availableCommandIds.value[highlightedItem.value]);\n    return (React.createElement(\"nav\", { className: classnames(styles.results, status.value !== STATUS.IDLE && styles.disabled), \"data-testid\": \"CommandList\", ref: navRef },\n        suggestions.value.length > 0 && (React.createElement(React.Fragment, null,\n            React.createElement(\"h6\", null, translate('CommandList.suggestions', 'Recently used')),\n            React.createElement(\"ul\", null, suggestions.value.map((commandId) => (React.createElement(CommandListItem, { key: commandId, command: commands.value[commandId], onItemSelect: executeCommand, highlightedId: highlightedCommand, onToggleFavourite: handleToggleFavourite })))))),\n        availableCommands.value.length > 0 && (React.createElement(React.Fragment, null,\n            React.createElement(\"h6\", null, translate('CommandList.heading', 'Commands')),\n            React.createElement(\"ul\", null, availableCommands.value.map((commandId) => (React.createElement(CommandListItem, { key: commandId, command: commands.value[commandId], onItemSelect: executeCommand, highlightedId: highlightedCommand, onToggleFavourite: handleToggleFavourite })))))),\n        availableCommandIds.value.length === 0 && (React.createElement(\"small\", { className: styles.noResults }, translate('CommandList.noCommandsMessage', 'No matching commands found')))));\n};\nexport default React.memo(CommandList);\n","import React from 'react';\nimport { useComputed, useSignalEffect } from '@preact/signals';\nimport { useCommandBarState, useCommandExecutor, useIntl } from '../../state';\nimport CommandListItem from '../CommandListItem/CommandListItem';\nimport * as styles from './CommandResultsView.module.css';\nconst CommandResultsView = () => {\n    var _a;\n    const { state: { result, highlightedOption, activeCommandId }, } = useCommandBarState();\n    const { executeCommand } = useCommandExecutor();\n    const { translate } = useIntl();\n    const navRef = React.useRef(null);\n    const highlightedId = useComputed(() => result.value ? Object.values(result.value.options)[highlightedOption.value].id : null);\n    const isLoading = activeCommandId.value !== null;\n    useSignalEffect(() => {\n        var _a, _b;\n        const highlightedIndex = highlightedOption.value;\n        (_b = (_a = navRef.current) === null || _a === void 0 ? void 0 : _a.querySelector(`li:nth-child(${highlightedIndex})`)) === null || _b === void 0 ? void 0 : _b.scrollIntoView({ behavior: 'smooth', block: 'center' });\n    });\n    const { options, view, message } = (_a = result.value) !== null && _a !== void 0 ? _a : {};\n    return (React.createElement(\"div\", { className: styles.commandResultsView },\n        message && React.createElement(\"h6\", { className: styles.message }, message),\n        isLoading ? React.createElement(\"div\", null, translate('CommandResultsView.waitingForResults', 'Waiting for results…')) : '',\n        !isLoading && view ? React.createElement(\"div\", null, view) : '',\n        !isLoading && options && (React.createElement(\"nav\", { className: styles.results, ref: navRef },\n            React.createElement(\"ul\", null, Object.keys(options).map((commandId) => (React.createElement(CommandListItem, { key: commandId, command: options[commandId], onItemSelect: executeCommand, highlightedId: highlightedId }))))))));\n};\nexport default CommandResultsView;\n","import React from 'react';\nimport * as styles from './ToggleButton.module.css';\nimport { classnames } from '../../helpers';\nconst ToggleButton = ({ handleToggle, disabled = false, label, title, active }) => {\n    return (React.createElement(\"button\", { className: classnames(styles.toggleButton, active && styles.toggleButtonActive), onClick: handleToggle, disabled: disabled, title: title },\n        React.createElement(\"span\", null, label),\n        React.createElement(\"span\", { className: styles.buttonIcon }, \"\\u2318K\")));\n};\nexport default React.memo(ToggleButton);\n","import React, { createContext, useCallback, useContext, useMemo } from 'react';\nimport { signal, computed } from '@preact/signals';\nimport { commandBarReducer } from './commandBarReducer';\nimport { flattenCommands, logger } from '../helpers';\nimport { STATUS, TRANSITION } from './commandBarMachine';\nimport { IconWrapper } from '../components';\nconst CommandBarContext = createContext({});\nexport const useCommandBarState = () => useContext(CommandBarContext);\n/**\n * Create the app state and initialize it if it does not exist yet\n */\nfunction createAppState(initialState) {\n    // Define a signal to hold the state\n    const commandBarState = signal(initialState);\n    // Define a function to dispatch events to the reducer and its state machine and update the state with the result\n    const dispatch = (event) => {\n        commandBarState.value = commandBarReducer(commandBarState.value, event);\n    };\n    // Derive readonly selectors for partial state values\n    const activeCommandId = computed(() => commandBarState.value.activeCommandId);\n    const activeCommandMessage = computed(() => commandBarState.value.activeCommandMessage);\n    const availableCommandIds = computed(() => commandBarState.value.availableCommandIds);\n    const commandQuery = computed(() => commandBarState.value.commandQuery);\n    const commandQueryDirty = computed(() => commandBarState.value.commandQueryDirty);\n    const commands = computed(() => commandBarState.value.commands);\n    const expanded = computed(() => commandBarState.value.expanded);\n    const favouriteCommands = computed(() => commandBarState.value.favouriteCommands);\n    const highlightedItem = computed(() => commandBarState.value.highlightedItem);\n    const highlightedOption = computed(() => commandBarState.value.highlightedOption);\n    const recentCommands = computed(() => commandBarState.value.recentCommands);\n    const result = computed(() => commandBarState.value.result);\n    const resultCommandId = computed(() => commandBarState.value.resultCommandId);\n    const searchWord = computed(() => commandBarState.value.searchWord);\n    const selectedCommandGroup = computed(() => commandBarState.value.selectedCommandGroup);\n    const showBranding = computed(() => commandBarState.value.showBranding);\n    const status = computed(() => commandBarState.value.status);\n    return {\n        state: {\n            activeCommandId,\n            activeCommandMessage,\n            availableCommandIds,\n            commandQuery,\n            commandQueryDirty,\n            commands,\n            expanded,\n            favouriteCommands,\n            highlightedItem,\n            highlightedOption,\n            recentCommands,\n            result,\n            resultCommandId,\n            searchWord,\n            selectedCommandGroup,\n            showBranding,\n            status,\n        },\n        dispatch,\n    };\n}\nexport const CommandBarStateProvider = ({ commands, children, IconComponent, userPreferences, }) => {\n    const { state, dispatch } = useMemo(() => {\n        return createAppState({\n            activeCommandId: null,\n            activeCommandMessage: null,\n            availableCommandIds: Object.keys(commands),\n            commandQuery: '',\n            commandQueryDirty: false,\n            commands: flattenCommands(commands),\n            expanded: false,\n            favouriteCommands: userPreferences.favouriteCommands,\n            highlightedItem: 0,\n            highlightedOption: 0,\n            recentCommands: userPreferences.recentCommands,\n            result: null,\n            resultCommandId: null,\n            searchWord: '',\n            selectedCommandGroup: null,\n            showBranding: userPreferences.showBranding,\n            status: STATUS.COLLAPSED,\n        });\n    }, []);\n    // Provide all actions as shorthand functions\n    const actions = useMemo(() => {\n        return {\n            [TRANSITION.RESET_SEARCH]: () => dispatch({ type: TRANSITION.RESET_SEARCH }),\n            [TRANSITION.HIGHLIGHT_NEXT_ITEM]: () => dispatch({ type: TRANSITION.HIGHLIGHT_NEXT_ITEM }),\n            [TRANSITION.HIGHLIGHT_PREVIOUS_ITEM]: () => dispatch({ type: TRANSITION.HIGHLIGHT_PREVIOUS_ITEM }),\n            [TRANSITION.CANCEL]: () => dispatch({ type: TRANSITION.CANCEL }),\n            [TRANSITION.SELECT_GROUP]: (commandId) => dispatch({ type: TRANSITION.SELECT_GROUP, commandId }),\n            [TRANSITION.GO_TO_PARENT_GROUP]: () => dispatch({ type: TRANSITION.GO_TO_PARENT_GROUP }),\n            [TRANSITION.UPDATE_SEARCH]: (searchWord) => dispatch({ type: TRANSITION.UPDATE_SEARCH, searchWord }),\n            [TRANSITION.UPDATE_COMMAND_QUERY]: (commandQuery) => dispatch({ type: TRANSITION.UPDATE_COMMAND_QUERY, commandQuery }),\n            [TRANSITION.EXECUTE_COMMAND]: async (commandId, message) => {\n                dispatch({\n                    type: TRANSITION.EXECUTE_COMMAND,\n                    commandId,\n                    message,\n                });\n                // Update recent commands in the user preferences when a command is executed\n                return userPreferences\n                    .addRecentCommand(commandId)\n                    .catch((e) => logger.error('Could not add recent command', e));\n            },\n            [TRANSITION.FINISH_COMMAND]: () => dispatch({ type: TRANSITION.FINISH_COMMAND }),\n            [TRANSITION.UPDATE_RESULT]: (result) => dispatch({ type: TRANSITION.UPDATE_RESULT, result }),\n            [TRANSITION.EXPAND]: () => dispatch({ type: TRANSITION.EXPAND }),\n            [TRANSITION.ADD_FAVOURITE]: (commandId) => {\n                dispatch({ type: TRANSITION.ADD_FAVOURITE, commandId });\n                return userPreferences\n                    .setFavouriteCommands(state.favouriteCommands.value)\n                    .catch((e) => logger.error('Could not update favourite commands', e));\n            },\n            [TRANSITION.REMOVE_FAVOURITE]: (commandId) => {\n                dispatch({ type: TRANSITION.REMOVE_FAVOURITE, commandId });\n                return userPreferences\n                    .setFavouriteCommands(state.favouriteCommands.value)\n                    .catch((e) => logger.error('Could not update favourite commands', e));\n            },\n        };\n    }, []);\n    const Icon = useCallback(({ icon, spin = false }) => {\n        return (React.createElement(IconWrapper, null,\n            React.createElement(IconComponent, { icon: icon, spin: spin })));\n    }, []);\n    return React.createElement(CommandBarContext.Provider, { value: { state, actions, Icon } }, children);\n};\n","import React, { useCallback, useEffect } from 'react';\nimport useFunctionRef from '../hooks/useFunctionRef';\nimport { useCommandBarState } from './CommandBarStateProvider';\nimport { assert, logger } from '../helpers';\nimport { STATUS } from './commandBarMachine';\nconst CommandInputContext = React.createContext({});\nexport const useCommandExecutor = () => React.useContext(CommandInputContext);\n/**\n * Context provider for the command bar input and command execution\n */\nexport const CommandBarExecutor = ({ children, toggleOpen, dialogRef, open }) => {\n    const { state, actions } = useCommandBarState();\n    const handleKeyEnteredRef = useFunctionRef((e) => {\n        if (!open || e.defaultPrevented) {\n            return;\n        }\n        if (e.key === 'k' && (e.metaKey || e.ctrlKey) && (dialogRef === null || dialogRef === void 0 ? void 0 : dialogRef.current.contains(e.target))) {\n            // Close command bar\n            toggleOpen();\n            e.stopPropagation();\n            e.preventDefault();\n        }\n        else if (e.key === 'Escape') {\n            // Cancel search, or selection, or close command bar\n            e.stopPropagation();\n            e.preventDefault();\n            if (state.selectedCommandGroup.value ||\n                state.searchWord.value ||\n                state.commandQuery.value ||\n                state.result.value) {\n                actions.CANCEL();\n            }\n            else {\n                // Close command bar if cancel is noop\n                toggleOpen();\n            }\n        }\n        else if (e.key === 'ArrowDown') {\n            // Navigate to next command\n            e.stopPropagation();\n            e.preventDefault();\n            actions.HIGHLIGHT_NEXT_ITEM();\n        }\n        else if (e.key === 'ArrowUp') {\n            // Navigate to previous command\n            e.stopPropagation();\n            e.preventDefault();\n            actions.HIGHLIGHT_PREVIOUS_ITEM();\n        }\n        else if (e.key === 'Enter') {\n            // Execute highlighted command\n            e.stopPropagation();\n            e.preventDefault();\n            // Select the highlighted command by default\n            let commandId = state.availableCommandIds.value[state.highlightedItem.value];\n            if (state.status.value === STATUS.DISPLAYING_RESULT) {\n                // If there are options the command to execute is the highlighted option\n                if (!state.commandQueryDirty.value && Object.values(state.result.value.options).length) {\n                    commandId = Object.keys(state.result.value.options)[state.highlightedOption.value];\n                }\n                else {\n                    // If there are no options we run the command which generated the result again\n                    commandId = state.resultCommandId.value;\n                }\n            }\n            if (commandId) {\n                void executeCommand(commandId);\n            }\n        }\n    });\n    const executeCommand = useCallback(async (commandId) => {\n        var _a, _b, _c;\n        const command = (_b = (_a = state.result.value) === null || _a === void 0 ? void 0 : _a.options[commandId]) !== null && _b !== void 0 ? _b : state.commands.value[commandId];\n        const { action, canHandleQueries, subCommandIds, name } = command;\n        // If the command is a group, select it\n        if ((subCommandIds === null || subCommandIds === void 0 ? void 0 : subCommandIds.length) > 0) {\n            actions.SELECT_GROUP(commandId);\n            return;\n        }\n        assert(action, `Command ${commandId} has no action`);\n        // If the command is a url, open it\n        if (typeof action == 'string') {\n            // We wait for the state change to be finished before opening the url\n            await actions.EXECUTE_COMMAND(commandId, 'Loading url');\n            // We need to check if the url is in the same domain, otherwise we need to open it in a new tab\n            // TODO: We should add another option to a link command to define its target\n            if (action.indexOf('http') === 0 && action.indexOf(document.location.origin) !== 0) {\n                (_c = window.open(action, '_blank', 'noopener,noreferrer')) === null || _c === void 0 ? void 0 : _c.focus();\n            }\n            else {\n                window.location.href = action;\n            }\n            return actions.FINISH_COMMAND();\n        }\n        // If the command is a function, execute it\n        actions.EXECUTE_COMMAND(commandId, 'Running command');\n        const actionResult = action(canHandleQueries ? state.commandQuery.value : undefined);\n        if (actionResult.then) {\n            // Handle Promises\n            actionResult\n                .then((result) => {\n                if (result && !result.success) {\n                    throw new Error(`The command \"${name}\" failed`);\n                }\n            })\n                .catch((error) => {\n                // TODO: Show an error message to the user\n                logger.error('Command error', name, error);\n            })\n                .finally(() => {\n                actions.FINISH_COMMAND();\n            });\n        }\n        else if (actionResult.next) {\n            // Handle generators\n            const generator = actionResult;\n            // TODO: Handle errors / success === false\n            for await (const result of generator) {\n                actions.UPDATE_RESULT(result);\n            }\n            actions.FINISH_COMMAND();\n        }\n        else {\n            logger.error('Command result is not a promise or generator', actionResult);\n        }\n        if (command.closeOnExecute) {\n            toggleOpen();\n        }\n    }, [state.searchWord, state.commands, state.result]);\n    const executeCommandRef = useFunctionRef((commandId) => {\n        void executeCommand(commandId);\n    });\n    /**\n     * Add key event handler, needs to be updated when any parameter for the key event handler changes\n     */\n    useEffect(() => {\n        if (!open)\n            return;\n        // const guestFrame = document.getElementsByName('neos-content-main')[0] as HTMLIFrameElement;\n        // guestFrame.contentWindow?.addEventListener('keyup', (e) => {\n        //     log.debug('keypress in guestframe', e);\n        // });\n        // log.debug('guestFrame', guestFrame.contentWindow);\n        const windowKeyEventHandler = (e) => handleKeyEnteredRef.current(e);\n        window.addEventListener('keydown', windowKeyEventHandler);\n        return () => window.removeEventListener('keydown', windowKeyEventHandler);\n    }, [open]);\n    return (React.createElement(CommandInputContext.Provider, { value: { executeCommand: executeCommandRef.current } }, children));\n};\n","import React, { createContext, useContext } from 'react';\nexport const IntlContext = createContext({});\nexport const useIntl = () => useContext(IntlContext);\nexport const IntlProvider = ({ translate, children }) => {\n    return React.createElement(IntlContext.Provider, { value: { translate } }, children);\n};\n","import React, { useCallback, useEffect, useRef } from 'react';\nimport { batch, useComputed, useSignal } from '@preact/signals';\nimport { CommandBarFooter, CommandBarHeader, CommandList, CommandResultsView } from '../index';\nimport { CommandBarExecutor, useCommandBarState } from '../../state';\nimport { clamp, classnames } from '../../helpers';\nimport * as styles from './CommandBarDialog.module.css';\nconst CommandBarDialog = ({ onDrag, open, toggleOpen }) => {\n    const { state: { expanded, result }, } = useCommandBarState();\n    const dialogRef = useRef(null);\n    const isDragging = useSignal(false);\n    const dialogPosition = useSignal({\n        left: window.innerWidth / 2 - 300,\n        top: window.innerHeight / 2 - 20,\n    });\n    const dragStateOffset = useSignal({\n        offsetLeft: 0,\n        offsetTop: 0,\n    });\n    const hasBeenDragged = useSignal(false);\n    const dialogStyle = useComputed(() => {\n        const { left, top } = dialogPosition.value;\n        return (hasBeenDragged.value\n            ? {\n                left: left + 'px',\n                top: top + 'px',\n                translate: 'none',\n                visibility: isDragging.value ? 'hidden' : 'visible',\n            }\n            : {});\n    });\n    const reposition = useCallback((left, top) => {\n        const dialogSize = dialogRef.current.getBoundingClientRect();\n        dialogPosition.value = {\n            left: clamp(left, 0, window.innerWidth - dialogSize.width),\n            top: clamp(top, 0, window.innerHeight - dialogSize.height),\n        };\n    }, []);\n    const handleDragStart = useCallback((e) => {\n        // @ts-ignore\n        if (e.target.tagName === 'INPUT') {\n            return;\n        }\n        console.debug('dragstart');\n        e.dataTransfer.setData('text/plain', 'CommandBar');\n        e.dataTransfer.dropEffect = 'move';\n        e.dataTransfer.effectAllowed = 'move';\n        batch(() => {\n            dragStateOffset.value = {\n                offsetLeft: e.clientX - dialogRef.current.offsetLeft,\n                offsetTop: e.clientY - dialogRef.current.offsetTop,\n            };\n            hasBeenDragged.value = true;\n        });\n        onDrag && onDrag(true);\n    }, [dialogRef.current]);\n    const handleDragDrop = useCallback((e) => {\n        const { clientX, clientY } = e;\n        console.debug('dragdrop', clientX, clientY, dragStateOffset.value);\n        batch(() => {\n            isDragging.value = false;\n            reposition(clientX - dragStateOffset.value.offsetLeft, clientY - dragStateOffset.value.offsetTop);\n        });\n        onDrag && onDrag(false);\n    }, [dialogRef.current]);\n    const onResize = useCallback(() => reposition(dialogPosition.value.left, dialogPosition.value.top), []);\n    useEffect(() => {\n        var _a, _b;\n        if (!open)\n            return;\n        (_b = (_a = dialogRef.current) === null || _a === void 0 ? void 0 : _a.parentElement) === null || _b === void 0 ? void 0 : _b.addEventListener('drop', handleDragDrop);\n        window.addEventListener('resize', onResize);\n        return () => {\n            var _a, _b;\n            (_b = (_a = dialogRef.current) === null || _a === void 0 ? void 0 : _a.parentElement) === null || _b === void 0 ? void 0 : _b.removeEventListener('drop', handleDragDrop);\n            window.removeEventListener('resize', onResize);\n        };\n    }, [open, onResize, handleDragDrop]);\n    if (!open) {\n        return null;\n    }\n    return (React.createElement(\"dialog\", { ref: dialogRef, className: classnames(styles.commandBar, result.value && styles.hasResults), open: open, draggable: true, onDragStart: handleDragStart, onDrag: () => (isDragging.value = true), style: dialogStyle.value, \"data-testid\": \"CommandBarDialog\" },\n        React.createElement(CommandBarExecutor, { toggleOpen: toggleOpen, dialogRef: dialogRef, open: open },\n            React.createElement(CommandBarHeader, null),\n            React.createElement(\"div\", { className: classnames(styles.resultsWrap, expanded.value && styles.expanded, result.value && styles.split) },\n                expanded.value && React.createElement(CommandList, null),\n                result.value && React.createElement(CommandResultsView, null)),\n            React.createElement(CommandBarFooter, null))));\n};\nexport default CommandBarDialog;\n","import React from 'react';\nimport { CommandBarStateProvider, IntlProvider } from './state';\nimport CommandBarDialog from './components/CommandBarDialog/CommandBarDialog';\nconst CommandBar = ({ commands, open, toggleOpen, onDrag, IconComponent, userPreferences, translate, }) => {\n    return (React.createElement(IntlProvider, { translate: translate },\n        React.createElement(CommandBarStateProvider, { commands: commands, IconComponent: IconComponent, userPreferences: userPreferences },\n            React.createElement(CommandBarDialog, { onDrag: onDrag, open: open, toggleOpen: toggleOpen }))));\n};\nexport default CommandBar;\n","export async function fetchData(endpoint, params, method = 'GET') {\n    if (params && method === 'GET') {\n        endpoint = Object.keys(params).reduce((url, key) => {\n            return url + '&' + key + '=' + encodeURIComponent(params[key]);\n        }, endpoint + '?');\n    }\n    return fetch(endpoint, {\n        method,\n        credentials: 'include',\n        body: params && method === 'POST' ? JSON.stringify(params) : undefined,\n        headers: {\n            // FIXME: Include CSRF Token\n            // 'X-Flow-Csrftoken': csrfToken,\n            'Content-Type': 'application/json',\n            Accept: 'application/json',\n        },\n    }).then((response) => {\n        var _a;\n        if (response.status !== 200) {\n            throw new Error(`The request failed with code ${response.status}: \"${response.statusText}\"`);\n        }\n        if ((_a = response.headers.get('Content-Type')) === null || _a === void 0 ? void 0 : _a.includes('application/json')) {\n            return response.json();\n        }\n        return response.text();\n    });\n}\n","import { fetchData } from './fetch';\nconst ENDPOINT_GET_PREFERENCES = '/neos/shel-neos-commandbar/preferences/getpreferences';\nconst ENDPOINT_SET_FAVOURITE_COMMANDS = '/neos/shel-neos-commandbar/preferences/setfavourites';\nconst ENDPOINT_ADD_RECENT_COMMAND = '/neos/shel-neos-commandbar/preferences/addrecentcommand';\nconst ENDPOINT_ADD_RECENT_DOCUMENT = '/neos/shel-neos-commandbar/preferences/addrecentdocument';\nasync function setPreference(endpoint, data) {\n    return fetchData(endpoint, data, 'POST');\n}\nexport async function getPreferences() {\n    return fetchData(ENDPOINT_GET_PREFERENCES);\n}\nexport async function setFavouriteCommands(commandIds) {\n    return setPreference(ENDPOINT_SET_FAVOURITE_COMMANDS, { commandIds });\n}\nexport async function addRecentCommand(commandId) {\n    // TODO: Check if sendBeacon is a better option here to reduce the impact on the user\n    return setPreference(ENDPOINT_ADD_RECENT_COMMAND, { commandId });\n}\nexport async function addRecentDocument(nodeContextPath) {\n    // TODO: Check if sendBeacon is a better option here to reduce the impact on the user\n    return setPreference(ENDPOINT_ADD_RECENT_DOCUMENT, { nodeContextPath });\n}\n","import { fetchData } from './fetch';\nconst ENDPOINT_COMMANDS = '/neos/service/data-source/shel-neos-commandbar-commands';\nexport async function getCommands() {\n    return fetchData(ENDPOINT_COMMANDS);\n}\n","import { fetchData } from './fetch';\nconst ENDPOINT_SEARCH_NEOS_DOCS = '/neos/service/data-source/shel-neos-commandbar-search-neos-docs';\nexport async function searchNeosDocs(query) {\n    return query ? fetchData(ENDPOINT_SEARCH_NEOS_DOCS, { query }) : {};\n}\n","import { fetchData } from './fetch';\nconst ENDPOINT_SEARCH_NEOS_PACKAGES = '/neos/service/data-source/shel-neos-commandbar-search-neos-packages';\nexport async function searchNeosPackages(query) {\n    return query ? fetchData(ENDPOINT_SEARCH_NEOS_PACKAGES, { query }) : {};\n}\n","import { fetchData } from './fetch';\nconst ENDPOINT_SEARCH_NODES = 'service/data-source/shel-neos-commandbar-search-nodes';\nexport async function searchNodes(query, node) {\n    return query\n        ? fetchData(ENDPOINT_SEARCH_NODES, {\n            query,\n            node,\n        })\n        : [];\n}\n","import * as React from 'react';\nimport { connect } from 'react-redux';\nimport PropTypes from 'prop-types';\n// Neos dependencies are provided by the UI\n// @ts-ignore\nimport { neos } from '@neos-project/neos-ui-decorators';\n// @ts-ignore\nimport { selectors, actions } from '@neos-project/neos-ui-redux-store';\nimport { Icon } from '@neos-project/react-ui-components';\nimport { CommandBar, logger, ToggleButton, classnames } from '@neos-commandbar/commandbar';\nimport { CommandsApi, PreferencesApi, DocumentationApi, NodesApi, PackagesApi } from '@neos-commandbar/neos-api';\nimport { actions as commandBarActions, selectors as commandBarSelectors } from './actions';\nimport * as styles from './CommandBarUiPlugin.module.css';\nimport * as theme from '@neos-commandbar/commandbar/src/Theme.module.css';\nimport { addRecentDocument } from '@neos-commandbar/neos-api/src/preferences';\nconst IconComponent = ({ icon, spin = false }) => React.createElement(Icon, { icon: icon, spin: spin });\nclass CommandBarUiPlugin extends React.PureComponent {\n    constructor(props) {\n        super(props);\n        this.buildCommandsFromHotkeys = () => {\n            const { hotkeyRegistry, handleHotkeyAction, config } = this.props;\n            const hotkeys = hotkeyRegistry.getAllAsList();\n            return hotkeys.reduce((carry, { id, description, action }) => {\n                if (!config.hotkeys.filter.includes(id)) {\n                    carry[id] = {\n                        name: description,\n                        description: id,\n                        icon: this.mapHotkeyIdToIcon(id),\n                        action: async () => void handleHotkeyAction(action()),\n                        closeOnExecute: true,\n                    };\n                }\n                return carry;\n            }, {});\n        };\n        this.buildCommandsFromWorkspaces = () => {\n            const { allowedTargetWorkspaces } = this.props.neos.configuration;\n            return Object.keys(allowedTargetWorkspaces).reduce((carry, workspaceName) => {\n                const workspace = allowedTargetWorkspaces[workspaceName];\n                if (workspace.readonly) {\n                    return carry;\n                }\n                carry[workspaceName] = {\n                    name: workspace.title,\n                    description: workspace.description,\n                    icon: 'cube',\n                    action: async () => {\n                        this.props.changeBaseWorkspaceAction(workspace.name);\n                    },\n                    closeOnExecute: true,\n                };\n                return carry;\n            }, {});\n        };\n        this.buildCommandsFromEditPreviewModes = () => {\n            const { setEditPreviewMode, editPreviewModes, i18nRegistry } = this.props;\n            return Object.keys(editPreviewModes).reduce((carry, mode) => {\n                const { title, isEditingMode } = editPreviewModes[mode];\n                carry[mode] = {\n                    name: i18nRegistry.translate(title),\n                    description: () => this.props.editPreviewMode === mode\n                        ? this.translate('CommandBarUiPlugin.command.switchEditPreviewMode.active', 'Currently active')\n                        : '',\n                    icon: isEditingMode ? 'pencil' : 'eye',\n                    action: async () => setEditPreviewMode(mode),\n                };\n                return carry;\n            }, {});\n        };\n        this.handleAddNode = async () => {\n            const { addNode, documentNode, focusedNodeContextPath, toggleCommandBar } = this.props;\n            toggleCommandBar();\n            addNode(focusedNodeContextPath || documentNode.contextPath, undefined, 'after');\n        };\n        this.showRecentDocuments = async function* () {\n            const { recentDocuments } = this.state;\n            const { setActiveContentCanvasContextPath, setActiveContentCanvasSrc } = this.props;\n            if (!recentDocuments.length) {\n                yield {\n                    success: false,\n                    message: this.translate('CommandBarUiPlugin.command.searchDocuments.searchFailed', 'Search failed'),\n                };\n            }\n            else {\n                yield {\n                    success: true,\n                    message: this.translate('CommandBarUiPlugin.command.recentDocuments.options', 'Recent documents'),\n                    options: recentDocuments.reduce((carry, { name, contextPath, uri, icon }) => {\n                        carry[contextPath] = {\n                            id: contextPath,\n                            name,\n                            icon,\n                            action: async () => {\n                                setActiveContentCanvasSrc(uri);\n                                setActiveContentCanvasContextPath(contextPath);\n                            },\n                            closeOnExecute: true,\n                        };\n                        return carry;\n                    }, {}),\n                };\n            }\n        };\n        this.handleSearchNode = async function* (query) {\n            const { siteNode, setActiveContentCanvasSrc } = this.props;\n            yield {\n                success: true,\n                message: this.translate('CommandBarUiPlugin.command.searchDocuments.searching', { query }),\n            };\n            let error;\n            const results = await NodesApi.searchNodes(query, siteNode.contextPath).catch((e) => {\n                logger.error('Could not search nodes', e);\n                error = e.message;\n            });\n            if (!results) {\n                yield {\n                    success: false,\n                    message: this.translate('CommandBarUiPlugin.command.searchDocuments.searchFailed', 'Search failed'),\n                    view: error,\n                };\n            }\n            else {\n                yield {\n                    success: true,\n                    message: this.translate('CommandBarUiPlugin.command.searchDocuments.matches', {\n                        matches: results.length,\n                    }),\n                    options: results.reduce((carry, { name, nodetype, contextPath, uri, icon }) => {\n                        if (!uri) {\n                            // TODO: Show hint that document cannot be opened or filter them remotely already?\n                            return carry;\n                        }\n                        carry[contextPath] = {\n                            id: contextPath,\n                            name,\n                            category: nodetype,\n                            action: async () => {\n                                setActiveContentCanvasSrc(uri);\n                            },\n                            closeOnExecute: true,\n                            icon,\n                        };\n                        return carry;\n                    }, {}),\n                };\n            }\n        };\n        this.handleSearchNeosDocs = async function* (query) {\n            yield {\n                success: true,\n                message: this.translate('CommandBarUiPlugin.command.documentation.searching', { query }, `Search for \"${query}\"`),\n            };\n            let error;\n            const options = await DocumentationApi.searchNeosDocs(query).catch((e) => {\n                logger.error('Could not search Neos docs', e);\n                error = e.message;\n            });\n            if (error || !options) {\n                yield {\n                    success: false,\n                    message: this.translate('CommandBarUiPlugin.command.documentation.error', 'Search failed'),\n                    view: error,\n                };\n            }\n            else {\n                yield {\n                    success: true,\n                    message: this.translate('CommandBarUiPlugin.command.documentation.matches', { matches: Object.keys(options).length }, `${Object.values(options).length} options match your query`),\n                    options,\n                };\n            }\n        };\n        this.handleSearchNeosPackages = async function* (query) {\n            yield {\n                success: true,\n                message: this.translate('CommandBarUiPlugin.command.packages.searching', { query }, `Search for \"${query}\"`),\n            };\n            let error;\n            const options = await PackagesApi.searchNeosPackages(query).catch((e) => {\n                logger.error('Could not search Neos packages', e);\n                error = e.message;\n            });\n            if (error || !options) {\n                yield {\n                    success: false,\n                    message: this.translate('CommandBarUiPlugin.command.packages.error', 'Search failed'),\n                    view: error,\n                };\n            }\n            else {\n                yield {\n                    success: true,\n                    message: this.translate('CommandBarUiPlugin.command.packages.matches', { matches: Object.values(options).length }, `${Object.values(options).length} options match your query`),\n                    options,\n                };\n            }\n        };\n        this.handlePublish = async () => {\n            const { publishableNodesInDocument, publishAction, baseWorkspace } = this.props;\n            publishAction(publishableNodesInDocument.map((node) => node.contextPath), baseWorkspace);\n            return {\n                success: true,\n                message: this.translate('CommandBarUiPlugin.command.publish.success', { count: publishableNodesInDocument.length }, `Published ${publishableNodesInDocument.length} changes`),\n            };\n        };\n        this.handlePublishAll = async () => {\n            const { publishableNodes, publishAction, baseWorkspace } = this.props;\n            publishAction(publishableNodes.map((node) => node.contextPath), baseWorkspace);\n            return {\n                success: true,\n                message: this.translate('CommandBarUiPlugin.command.publishAll.success', { count: publishableNodes.length }, `Published ${publishableNodes.length} changes`),\n            };\n        };\n        this.handleDiscard = async () => {\n            const { publishableNodesInDocument, discardAction } = this.props;\n            discardAction(publishableNodesInDocument.map((node) => node.contextPath));\n            return {\n                success: true,\n                message: this.translate('CommandBarUiPlugin.command.discard.success', { count: publishableNodesInDocument.length }, `Discarded ${publishableNodesInDocument.length} changes`),\n            };\n        };\n        this.handleDiscardAll = async () => {\n            const { publishableNodes, discardAction } = this.props;\n            discardAction(publishableNodes.map((node) => node.contextPath));\n            return {\n                success: true,\n                message: this.translate('CommandBarUiPlugin.command.discardAll.success', { count: publishableNodes.length }, `Discarded ${publishableNodes.length} changes`),\n            };\n        };\n        this.setDragging = (dragging) => {\n            this.setState({ ...this.state, dragging });\n        };\n        this.translate = (id, paramsOrFallback, fallback) => {\n            if (typeof paramsOrFallback === 'string') {\n                fallback = paramsOrFallback;\n                paramsOrFallback = {};\n            }\n            return this.props.i18nRegistry.translate(id, fallback, paramsOrFallback, 'Shel.Neos.CommandBar', 'Main');\n        };\n        this.state = {\n            loaded: false,\n            dragging: false,\n            favouriteCommands: [],\n            recentCommands: [],\n            recentDocuments: [],\n            showBranding: true,\n            commands: {\n                addNode: {\n                    name: this.translate('CommandBarUiPlugin.command.addNode', 'Add content'),\n                    icon: 'plus',\n                    description: this.translate('CommandBarUiPlugin.command.addNode.description', 'Add new content'),\n                    action: this.handleAddNode,\n                },\n                searchDocuments: {\n                    name: this.translate('CommandBarUiPlugin.command.searchDocuments', 'Search documents'),\n                    icon: 'search',\n                    description: this.translate('CommandBarUiPlugin.command.searchDocuments.description', 'Search and navigate to documents'),\n                    action: this.handleSearchNode.bind(this),\n                    canHandleQueries: true,\n                },\n                switchWorkspace: {\n                    name: this.translate('CommandBarUiPlugin.command.switchWorkspace', 'Switch workspace'),\n                    icon: 'exchange-alt',\n                    description: this.translate('CommandBarUiPlugin.command.switchWorkspace.description', 'Switch to another workspace'),\n                    subCommands: this.buildCommandsFromWorkspaces(),\n                },\n                publishDiscard: {\n                    name: this.translate('CommandBarUiPlugin.command.publishDiscard', 'Publish / discard'),\n                    description: this.translate('CommandBarUiPlugin.command.publishDiscard.description', 'Publish or discard changes'),\n                    icon: 'check',\n                    subCommands: {\n                        publish: {\n                            name: this.translate('CommandBarUiPlugin.command.publish', 'Publish'),\n                            description: this.translate('CommandBarUiPlugin.command.publish.description', 'Publish changes in this document'),\n                            icon: 'check',\n                            action: this.handlePublish,\n                        },\n                        publishAll: {\n                            name: this.translate('CommandBarUiPlugin.command.publishAll', 'Publish all'),\n                            description: this.translate('CommandBarUiPlugin.command.publishAll.description', 'Publish changes in all documents'),\n                            icon: 'check-double',\n                            action: this.handlePublishAll,\n                        },\n                        discard: {\n                            name: this.translate('CommandBarUiPlugin.command.discard', 'Discard'),\n                            description: this.translate('CommandBarUiPlugin.command.discard.description', 'Discard changes in the current document'),\n                            icon: 'ban',\n                            action: this.handleDiscard,\n                        },\n                        discardAll: {\n                            name: this.translate('CommandBarUiPlugin.command.discardAll', 'Discard all'),\n                            description: this.translate('CommandBarUiPlugin.command.discardAll.description', 'Discard changes in all documents'),\n                            icon: 'ban',\n                            action: this.handleDiscardAll,\n                        },\n                    },\n                },\n                quickActions: {\n                    name: this.translate('CommandBarUiPlugin.command.quickActions', 'Quick actions'),\n                    icon: 'keyboard',\n                    description: this.translate('CommandBarUiPlugin.command.quickActions.description', 'Execute hotkeys'),\n                    subCommands: this.buildCommandsFromHotkeys(),\n                },\n                switchEditPreviewMode: {\n                    name: this.translate('CommandBarUiPlugin.command.switchEditPreviewMode', 'Switch edit/preview mode'),\n                    icon: 'pencil',\n                    description: this.translate('CommandBarUiPlugin.command.switchEditPreviewMode.description', 'Switch between edit and preview modes'),\n                    subCommands: this.buildCommandsFromEditPreviewModes(),\n                },\n                openPreview: {\n                    name: this.translate('CommandBarUiPlugin.command.openPreview', 'Open preview'),\n                    description: this.translate('CommandBarUiPlugin.command.openPreview.description', 'Open the preview for current document'),\n                    icon: 'external-link-alt',\n                    action: async () => {\n                        var _a;\n                        if (this.props.previewUrl) {\n                            (_a = window.open(this.props.previewUrl, '_blank', 'noopener,noreferrer')) === null || _a === void 0 ? void 0 : _a.focus();\n                        }\n                        else {\n                            logger.warn('No preview url to open');\n                        }\n                    },\n                    closeOnExecute: true,\n                },\n                recentDocument: {\n                    name: this.translate('CommandBarUiPlugin.command.recentDocuments', 'Recent documents'),\n                    description: this.translate('CommandBarUiPlugin.command.recentDocuments.description', 'Open a recently visited documents'),\n                    icon: 'history',\n                    action: this.showRecentDocuments.bind(this),\n                },\n            },\n        };\n        if (props.config.features.searchNeosDocs) {\n            this.state.commands.searchNeosDocs = {\n                name: this.translate('CommandBarUiPlugin.command.documentation', 'Documentation'),\n                description: this.translate('CommandBarUiPlugin.command.documentation.description', 'Browse or search the Neos documentation'),\n                icon: 'book',\n                canHandleQueries: true,\n                action: this.handleSearchNeosDocs.bind(this),\n            };\n        }\n        if (props.config.features.searchNeosPackages) {\n            this.state.commands.searchNeosPackages = {\n                name: this.translate('CommandBarUiPlugin.command.packages', 'Packages'),\n                description: this.translate('CommandBarUiPlugin.command.packages.description', 'Search for Neos packages'),\n                icon: 'boxes',\n                canHandleQueries: true,\n                action: this.handleSearchNeosPackages.bind(this),\n            };\n        }\n    }\n    mapHotkeyIdToIcon(id) {\n        let actionName = id.split('.').pop();\n        // Some actions have the name 'toggle' with a suffix, e.g. 'toggleFullScreen'\n        if (actionName.indexOf('toggle') >= 0) {\n            actionName = 'toggle';\n        }\n        switch (actionName) {\n            case 'toggle':\n                return 'toggle-on';\n            case 'reload':\n                return 'redo';\n            case 'cancel':\n            case 'close':\n                return 'window-close';\n            case 'apply':\n                return 'check';\n        }\n        return 'neos';\n    }\n    async componentDidMount() {\n        const { plugins } = this.props;\n        // Load 3rd party commands\n        let pluginCommands = {};\n        if (plugins) {\n            for (const pluginName of Object.keys(plugins)) {\n                const plugin = plugins[pluginName];\n                try {\n                    const pluginResult = await plugin();\n                    if (Object.keys(pluginResult).length > 0) {\n                        pluginCommands = { ...pluginCommands, ...pluginResult };\n                    }\n                }\n                catch (e) {\n                    logger.warn(`Could not load commands from plugin ${pluginName}`, e);\n                }\n            }\n        }\n        // Load commands from data source which are not available via the UI API\n        const commands = await CommandsApi.getCommands().catch((error) => {\n            logger.error('Failed to load commands', error);\n        });\n        // Load user preferences\n        const preferences = await PreferencesApi.getPreferences().catch((error) => {\n            logger.error('Failed to load user preferences', error);\n        });\n        if (!preferences || !commands)\n            return;\n        this.setState((prev) => ({\n            loaded: true,\n            ...preferences,\n            commands: { ...prev.commands, ...commands, ...pluginCommands },\n        }));\n        // add event-listener directly as the neos-ui hotkey-handling can't prevent defaults\n        document.addEventListener('keydown', (e) => {\n            if (e.key === 'k' && (e.metaKey || e.ctrlKey)) {\n                e.stopPropagation();\n                e.preventDefault();\n                this.props.toggleCommandBar();\n            }\n        });\n    }\n    async componentDidUpdate(prevProps) {\n        var _a, _b;\n        if (((_a = prevProps.documentNode) === null || _a === void 0 ? void 0 : _a.contextPath) != ((_b = this.props.documentNode) === null || _b === void 0 ? void 0 : _b.contextPath)) {\n            addRecentDocument(this.props.documentNode.contextPath).then((recentDocuments) => {\n                this.setState({ recentDocuments });\n            });\n        }\n    }\n    render() {\n        const { commandBarOpen, toggleCommandBar } = this.props;\n        const { commands, loaded, dragging, favouriteCommands, recentCommands, recentDocuments, showBranding } = this.state;\n        return (React.createElement(\"div\", { className: classnames(styles.commandBarToolbarComponent, theme.commandBarTheme) },\n            React.createElement(ToggleButton, { handleToggle: toggleCommandBar, disabled: !loaded, label: this.translate('ToggleButton.label', 'Search…'), title: this.translate('ToggleButton.title', 'Search for commands'), active: commandBarOpen }),\n            loaded && (React.createElement(\"div\", { className: [styles.fullScreenLayer, commandBarOpen && styles.open].join(' '), onDragOver: (e) => e.preventDefault(), style: dragging ? { pointerEvents: 'all' } : null },\n                React.createElement(CommandBar, { open: commandBarOpen, commands: commands, toggleOpen: toggleCommandBar, onDrag: this.setDragging, IconComponent: IconComponent, userPreferences: {\n                        favouriteCommands,\n                        recentCommands,\n                        recentDocuments,\n                        showBranding,\n                        addRecentCommand: PreferencesApi.addRecentCommand,\n                        addRecentDocument: PreferencesApi.addRecentDocument,\n                        setFavouriteCommands: PreferencesApi.setFavouriteCommands,\n                    }, translate: this.translate })))));\n    }\n}\nCommandBarUiPlugin.propTypes = {\n    addNode: PropTypes.func.isRequired,\n    baseWorkspace: PropTypes.string.isRequired,\n    commandBarOpen: PropTypes.bool,\n    config: PropTypes.object.isRequired,\n    discardAction: PropTypes.func.isRequired,\n    documentNode: PropTypes.object,\n    editPreviewMode: PropTypes.string.isRequired,\n    editPreviewModes: PropTypes.object.isRequired,\n    focusedNodeContextPath: PropTypes.string,\n    handleHotkeyAction: PropTypes.func.isRequired,\n    hotkeyRegistry: PropTypes.object.isRequired,\n    i18nRegistry: PropTypes.object.isRequired,\n    isWorkspaceReadOnly: PropTypes.bool,\n    publishAction: PropTypes.func.isRequired,\n    publishableNodes: PropTypes.array,\n    publishableNodesInDocument: PropTypes.array,\n    previewUrl: PropTypes.string,\n    setActiveContentCanvasSrc: PropTypes.func.isRequired,\n    setActiveContentCanvasContextPath: PropTypes.func.isRequired,\n    setEditPreviewMode: PropTypes.func.isRequired,\n    siteNode: PropTypes.object,\n    toggleCommandBar: PropTypes.func.isRequired,\n    neos: PropTypes.object.isRequired,\n};\nconst mapStateToProps = (state) => ({\n    siteNode: selectors.CR.Nodes.siteNodeSelector(state),\n    documentNode: selectors.CR.Nodes.documentNodeSelector(state),\n    focusedNodeContextPath: selectors.CR.Nodes.focusedNodePathSelector(state),\n    publishableNodes: selectors.CR.Workspaces.publishableNodesSelector(state),\n    publishableNodesInDocument: selectors.CR.Workspaces.publishableNodesInDocumentSelector(state),\n    isWorkspaceReadOnly: selectors.CR.Workspaces.isWorkspaceReadOnlySelector(state),\n    baseWorkspace: selectors.CR.Workspaces.baseWorkspaceSelector(state),\n    commandBarOpen: commandBarSelectors.commandBarOpen(state),\n    editPreviewMode: selectors.UI.EditPreviewMode.currentEditPreviewMode(state),\n    previewUrl: commandBarSelectors.previewUrl(state),\n});\nconst mapDispatchToProps = (dispatch) => ({\n    handleHotkeyAction: dispatch,\n});\nconst mapGlobalRegistryToProps = neos((globalRegistry) => ({\n    i18nRegistry: globalRegistry.get('i18n'),\n    hotkeyRegistry: globalRegistry.get('hotkeys'),\n    config: globalRegistry.get('frontendConfiguration').get('Shel.Neos.CommandBar:CommandBar'),\n    nodeTypesRegistry: globalRegistry.get('@neos-project/neos-ui-contentrepository'),\n    editPreviewModes: globalRegistry.get('frontendConfiguration').get('editPreviewModes'),\n    plugins: globalRegistry.get('Shel.Neos.CommandBar').getChildrenAsObject('plugins'),\n}));\nexport default connect(() => ({}), {\n    toggleCommandBar: commandBarActions.toggleCommandBar,\n    addNode: actions.CR.Nodes.commenceCreation,\n    setEditPreviewMode: actions.UI.EditPreviewMode.set,\n    publishAction: actions.CR.Workspaces.publish,\n    discardAction: actions.CR.Workspaces.commenceDiscard,\n    setActiveContentCanvasSrc: actions.UI.ContentCanvas.setSrc,\n    setActiveContentCanvasContextPath: actions.CR.Nodes.setDocumentNode,\n    changeBaseWorkspaceAction: actions.CR.Workspaces.changeBaseWorkspace,\n})(connect(mapStateToProps, mapDispatchToProps)(mapGlobalRegistryToProps(CommandBarUiPlugin)));\n"],"sourceRoot":""}