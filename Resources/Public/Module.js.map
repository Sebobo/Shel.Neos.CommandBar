{"mappings":"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","sources":["node_modules/preact/src/util.js","node_modules/preact/src/options.js","node_modules/preact/src/create-element.js","node_modules/preact/src/component.js","node_modules/preact/src/create-context.js","node_modules/preact/src/constants.js","node_modules/preact/src/diff/children.js","node_modules/preact/src/diff/props.js","node_modules/preact/src/diff/index.js","node_modules/preact/src/render.js","node_modules/preact/src/clone-element.js","node_modules/preact-custom-element/src/index.js","node_modules/preact/src/diff/catch-error.js","node_modules/preact/jsx-runtime/src/index.js","node_modules/preact/hooks/src/index.js","node_modules/preact/compat/src/util.js","node_modules/preact/compat/src/PureComponent.js","node_modules/preact/compat/src/forwardRef.js","node_modules/preact/compat/src/Children.js","node_modules/preact/compat/src/suspense.js","node_modules/preact/compat/src/suspense-list.js","node_modules/preact/compat/src/portals.js","node_modules/preact/compat/src/render.js","node_modules/preact/compat/src/index.js","node_modules/preact/compat/src/memo.js","packages/commandbar/src/hooks/useFunctionRef.ts","node_modules/@preact/signals-core/src/index.ts","node_modules/@preact/signals/src/index.ts","packages/commandbar/src/helpers/flattenCommands.ts","packages/commandbar/src/helpers/logger.ts","packages/commandbar/src/helpers/clamp.ts","node_modules/@leeoniya/ufuzzy/dist/uFuzzy.esm.js","packages/commandbar/src/helpers/filterCommands.ts","packages/commandbar/src/helpers/asset.ts","packages/commandbar/src/helpers/classnames.ts","packages/commandbar/src/state/commandBarMachine.ts","packages/commandbar/src/state/commandBarReducer.ts","packages/commandbar/src/components/IconWrapper/IconWrapper.tsx","packages/commandbar/src/components/IconWrapper/IconWrapper.module.css","packages/commandbar/src/components/CommandBarFooter/Branding.tsx","packages/commandbar/src/components/CommandBarFooter/Branding.module.css","packages/commandbar/src/components/Icons/IconBack.tsx","packages/commandbar/src/components/Icons/IconNeos.tsx","packages/commandbar/src/components/Icons/IconSpinner.tsx","packages/commandbar/src/components/Icons/IconStar.tsx","packages/commandbar/src/components/Icons/IconPlay.tsx","packages/commandbar/src/components/CommandBarFooter/CommandBarFooter.tsx","packages/commandbar/src/components/CommandBarFooter/CommandBarFooter.module.css","packages/commandbar/src/components/SearchBox/SearchBox.tsx","packages/commandbar/src/components/SearchBox/SearchBox.module.css","packages/commandbar/src/components/CommandBarHeader/CommandBarHeader.tsx","packages/commandbar/src/components/CommandBarHeader/CommandBarHeader.module.css","packages/commandbar/src/components/CommandListItem/CommandListItem.tsx","packages/commandbar/src/components/CommandListItem/CommandListItem.module.css","packages/commandbar/src/components/CommandList/CommandList.tsx","packages/commandbar/src/components/CommandList/CommandListing.module.css","packages/commandbar/src/components/CommandResultsView/CommandResultsView.module.css","packages/commandbar/src/components/CommandResultsView/CommandResultsView.tsx","packages/commandbar/src/components/ToggleButton/ToggleButton.tsx","packages/commandbar/src/components/ToggleButton/ToggleButton.module.css","packages/commandbar/src/state/CommandBarStateProvider.tsx","packages/commandbar/src/state/CommandBarExecutor.tsx","packages/commandbar/src/state/IntlProvider.tsx","packages/commandbar/src/components/CommandBarDialog/CommandBarDialog.module.css","packages/commandbar/src/components/CommandBarDialog/CommandBarDialog.tsx","packages/commandbar/src/CommandBar.tsx","packages/neos-api/src/fetch.ts","packages/neos-api/src/preferences.ts","packages/neos-api/src/commands.ts","packages/neos-api/src/documentation.ts","packages/neos-api/src/packages.ts","packages/module-plugin/src/ModulePlugin.module.css","packages/module-plugin/src/IconComponent.tsx","packages/module-plugin/src/App.tsx","packages/module-plugin/src/index.tsx"],"sourcesContent":["import { EMPTY_ARR } from \"./constants\";\n\n/**\n * Assign properties from `props` to `obj`\n * @template O, P The obj and props types\n * @param {O} obj The object to copy properties to\n * @param {P} props The object to copy properties from\n * @returns {O & P}\n */\nexport function assign(obj, props) {\n\t// @ts-ignore We change the type of `obj` to be `O & P`\n\tfor (let i in props) obj[i] = props[i];\n\treturn /** @type {O & P} */ (obj);\n}\n\n/**\n * Remove a child node from its parent if attached. This is a workaround for\n * IE11 which doesn't support `Element.prototype.remove()`. Using this function\n * is smaller than including a dedicated polyfill.\n * @param {Node} node The node to remove\n */\nexport function removeNode(node) {\n\tlet parentNode = node.parentNode;\n\tif (parentNode) parentNode.removeChild(node);\n}\n\nexport const slice = EMPTY_ARR.slice;\n","import { _catchError } from './diff/catch-error';\n\n/**\n * The `option` object can potentially contain callback functions\n * that are called during various stages of our renderer. This is the\n * foundation on which all our addons like `preact/debug`, `preact/compat`,\n * and `preact/hooks` are based on. See the `Options` type in `internal.d.ts`\n * for a full list of available option hooks (most editors/IDEs allow you to\n * ctrl+click or cmd+click on mac the type definition below).\n * @type {import('./internal').Options}\n */\nconst options = {\n\t_catchError\n};\n\nexport default options;\n","import { slice } from './util';\nimport options from './options';\n\nlet vnodeId = 0;\n\n/**\n * Create an virtual node (used for JSX)\n * @param {import('./internal').VNode[\"type\"]} type The node name or Component\n * constructor for this virtual node\n * @param {object | null | undefined} [props] The properties of the virtual node\n * @param {Array<import('.').ComponentChildren>} [children] The children of the virtual node\n * @returns {import('./internal').VNode}\n */\nexport function createElement(type, props, children) {\n\tlet normalizedProps = {},\n\t\tkey,\n\t\tref,\n\t\ti;\n\tfor (i in props) {\n\t\tif (i == 'key') key = props[i];\n\t\telse if (i == 'ref') ref = props[i];\n\t\telse normalizedProps[i] = props[i];\n\t}\n\n\tif (arguments.length > 2) {\n\t\tnormalizedProps.children =\n\t\t\targuments.length > 3 ? slice.call(arguments, 2) : children;\n\t}\n\n\t// If a Component VNode, check for and apply defaultProps\n\t// Note: type may be undefined in development, must never error here.\n\tif (typeof type == 'function' && type.defaultProps != null) {\n\t\tfor (i in type.defaultProps) {\n\t\t\tif (normalizedProps[i] === undefined) {\n\t\t\t\tnormalizedProps[i] = type.defaultProps[i];\n\t\t\t}\n\t\t}\n\t}\n\n\treturn createVNode(type, normalizedProps, key, ref, null);\n}\n\n/**\n * Create a VNode (used internally by Preact)\n * @param {import('./internal').VNode[\"type\"]} type The node name or Component\n * Constructor for this virtual node\n * @param {object | string | number | null} props The properties of this virtual node.\n * If this virtual node represents a text node, this is the text of the node (string or number).\n * @param {string | number | null} key The key for this virtual node, used when\n * diffing it against its children\n * @param {import('./internal').VNode[\"ref\"]} ref The ref property that will\n * receive a reference to its created child\n * @returns {import('./internal').VNode}\n */\nexport function createVNode(type, props, key, ref, original) {\n\t// V8 seems to be better at detecting type shapes if the object is allocated from the same call site\n\t// Do not inline into createElement and coerceToVNode!\n\tconst vnode = {\n\t\ttype,\n\t\tprops,\n\t\tkey,\n\t\tref,\n\t\t_children: null,\n\t\t_parent: null,\n\t\t_depth: 0,\n\t\t_dom: null,\n\t\t// _nextDom must be initialized to undefined b/c it will eventually\n\t\t// be set to dom.nextSibling which can return `null` and it is important\n\t\t// to be able to distinguish between an uninitialized _nextDom and\n\t\t// a _nextDom that has been set to `null`\n\t\t_nextDom: undefined,\n\t\t_component: null,\n\t\t_hydrating: null,\n\t\tconstructor: undefined,\n\t\t_original: original == null ? ++vnodeId : original\n\t};\n\n\t// Only invoke the vnode hook if this was *not* a direct copy:\n\tif (original == null && options.vnode != null) options.vnode(vnode);\n\n\treturn vnode;\n}\n\nexport function createRef() {\n\treturn { current: null };\n}\n\nexport function Fragment(props) {\n\treturn props.children;\n}\n\n/**\n * Check if a the argument is a valid Preact VNode.\n * @param {*} vnode\n * @returns {vnode is import('./internal').VNode}\n */\nexport const isValidElement = vnode =>\n\tvnode != null && vnode.constructor === undefined;\n","import { assign } from './util';\nimport { diff, commitRoot } from './diff/index';\nimport options from './options';\nimport { Fragment } from './create-element';\n\n/**\n * Base Component class. Provides `setState()` and `forceUpdate()`, which\n * trigger rendering\n * @param {object} props The initial component props\n * @param {object} context The initial context from parent components'\n * getChildContext\n */\nexport function Component(props, context) {\n\tthis.props = props;\n\tthis.context = context;\n}\n\n/**\n * Update component state and schedule a re-render.\n * @this {import('./internal').Component}\n * @param {object | ((s: object, p: object) => object)} update A hash of state\n * properties to update with new values or a function that given the current\n * state and props returns a new partial state\n * @param {() => void} [callback] A function to be called once component state is\n * updated\n */\nComponent.prototype.setState = function(update, callback) {\n\t// only clone state when copying to nextState the first time.\n\tlet s;\n\tif (this._nextState != null && this._nextState !== this.state) {\n\t\ts = this._nextState;\n\t} else {\n\t\ts = this._nextState = assign({}, this.state);\n\t}\n\n\tif (typeof update == 'function') {\n\t\t// Some libraries like `immer` mark the current state as readonly,\n\t\t// preventing us from mutating it, so we need to clone it. See #2716\n\t\tupdate = update(assign({}, s), this.props);\n\t}\n\n\tif (update) {\n\t\tassign(s, update);\n\t}\n\n\t// Skip update if updater function returned null\n\tif (update == null) return;\n\n\tif (this._vnode) {\n\t\tif (callback) {\n\t\t\tthis._stateCallbacks.push(callback);\n\t\t}\n\t\tenqueueRender(this);\n\t}\n};\n\n/**\n * Immediately perform a synchronous re-render of the component\n * @this {import('./internal').Component}\n * @param {() => void} [callback] A function to be called after component is\n * re-rendered\n */\nComponent.prototype.forceUpdate = function(callback) {\n\tif (this._vnode) {\n\t\t// Set render mode so that we can differentiate where the render request\n\t\t// is coming from. We need this because forceUpdate should never call\n\t\t// shouldComponentUpdate\n\t\tthis._force = true;\n\t\tif (callback) this._renderCallbacks.push(callback);\n\t\tenqueueRender(this);\n\t}\n};\n\n/**\n * Accepts `props` and `state`, and returns a new Virtual DOM tree to build.\n * Virtual DOM is generally constructed via [JSX](http://jasonformat.com/wtf-is-jsx).\n * @param {object} props Props (eg: JSX attributes) received from parent\n * element/component\n * @param {object} state The component's current state\n * @param {object} context Context object, as returned by the nearest\n * ancestor's `getChildContext()`\n * @returns {import('./index').ComponentChildren | void}\n */\nComponent.prototype.render = Fragment;\n\n/**\n * @param {import('./internal').VNode} vnode\n * @param {number | null} [childIndex]\n */\nexport function getDomSibling(vnode, childIndex) {\n\tif (childIndex == null) {\n\t\t// Use childIndex==null as a signal to resume the search from the vnode's sibling\n\t\treturn vnode._parent\n\t\t\t? getDomSibling(vnode._parent, vnode._parent._children.indexOf(vnode) + 1)\n\t\t\t: null;\n\t}\n\n\tlet sibling;\n\tfor (; childIndex < vnode._children.length; childIndex++) {\n\t\tsibling = vnode._children[childIndex];\n\n\t\tif (sibling != null && sibling._dom != null) {\n\t\t\t// Since updateParentDomPointers keeps _dom pointer correct,\n\t\t\t// we can rely on _dom to tell us if this subtree contains a\n\t\t\t// rendered DOM node, and what the first rendered DOM node is\n\t\t\treturn sibling._dom;\n\t\t}\n\t}\n\n\t// If we get here, we have not found a DOM node in this vnode's children.\n\t// We must resume from this vnode's sibling (in it's parent _children array)\n\t// Only climb up and search the parent if we aren't searching through a DOM\n\t// VNode (meaning we reached the DOM parent of the original vnode that began\n\t// the search)\n\treturn typeof vnode.type == 'function' ? getDomSibling(vnode) : null;\n}\n\n/**\n * Trigger in-place re-rendering of a component.\n * @param {import('./internal').Component} component The component to rerender\n */\nfunction renderComponent(component) {\n\tlet vnode = component._vnode,\n\t\toldDom = vnode._dom,\n\t\tparentDom = component._parentDom;\n\n\tif (parentDom) {\n\t\tlet commitQueue = [];\n\t\tconst oldVNode = assign({}, vnode);\n\t\toldVNode._original = vnode._original + 1;\n\n\t\tdiff(\n\t\t\tparentDom,\n\t\t\tvnode,\n\t\t\toldVNode,\n\t\t\tcomponent._globalContext,\n\t\t\tparentDom.ownerSVGElement !== undefined,\n\t\t\tvnode._hydrating != null ? [oldDom] : null,\n\t\t\tcommitQueue,\n\t\t\toldDom == null ? getDomSibling(vnode) : oldDom,\n\t\t\tvnode._hydrating\n\t\t);\n\t\tcommitRoot(commitQueue, vnode);\n\n\t\tif (vnode._dom != oldDom) {\n\t\t\tupdateParentDomPointers(vnode);\n\t\t}\n\t}\n}\n\n/**\n * @param {import('./internal').VNode} vnode\n */\nfunction updateParentDomPointers(vnode) {\n\tif ((vnode = vnode._parent) != null && vnode._component != null) {\n\t\tvnode._dom = vnode._component.base = null;\n\t\tfor (let i = 0; i < vnode._children.length; i++) {\n\t\t\tlet child = vnode._children[i];\n\t\t\tif (child != null && child._dom != null) {\n\t\t\t\tvnode._dom = vnode._component.base = child._dom;\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\n\t\treturn updateParentDomPointers(vnode);\n\t}\n}\n\n/**\n * The render queue\n * @type {Array<import('./internal').Component>}\n */\nlet rerenderQueue = [];\n\n/*\n * The value of `Component.debounce` must asynchronously invoke the passed in callback. It is\n * important that contributors to Preact can consistently reason about what calls to `setState`, etc.\n * do, and when their effects will be applied. See the links below for some further reading on designing\n * asynchronous APIs.\n * * [Designing APIs for Asynchrony](https://blog.izs.me/2013/08/designing-apis-for-asynchrony)\n * * [Callbacks synchronous and asynchronous](https://blog.ometer.com/2011/07/24/callbacks-synchronous-and-asynchronous/)\n */\n\nlet prevDebounce;\n\nconst defer =\n\ttypeof Promise == 'function'\n\t\t? Promise.prototype.then.bind(Promise.resolve())\n\t\t: setTimeout;\n\n/**\n * Enqueue a rerender of a component\n * @param {import('./internal').Component} c The component to rerender\n */\nexport function enqueueRender(c) {\n\tif (\n\t\t(!c._dirty &&\n\t\t\t(c._dirty = true) &&\n\t\t\trerenderQueue.push(c) &&\n\t\t\t!process._rerenderCount++) ||\n\t\tprevDebounce !== options.debounceRendering\n\t) {\n\t\tprevDebounce = options.debounceRendering;\n\t\t(prevDebounce || defer)(process);\n\t}\n}\n\n/** Flush the render queue by rerendering all queued components */\nfunction process() {\n\tlet c;\n\trerenderQueue.sort((a, b) => a._vnode._depth - b._vnode._depth);\n\t// Don't update `renderCount` yet. Keep its value non-zero to prevent unnecessary\n\t// process() calls from getting scheduled while `queue` is still being consumed.\n\twhile ((c = rerenderQueue.shift())) {\n\t\tif (c._dirty) {\n\t\t\tlet renderQueueLength = rerenderQueue.length;\n\t\t\trenderComponent(c);\n\t\t\tif (rerenderQueue.length > renderQueueLength) {\n\t\t\t\t// When i.e. rerendering a provider additional new items can be injected, we want to\n\t\t\t\t// keep the order from top to bottom with those new items so we can handle them in a\n\t\t\t\t// single pass\n\t\t\t\trerenderQueue.sort((a, b) => a._vnode._depth - b._vnode._depth);\n\t\t\t}\n\t\t}\n\t}\n\tprocess._rerenderCount = 0;\n}\n\nprocess._rerenderCount = 0;\n","import { enqueueRender } from './component';\n\nexport let i = 0;\n\nexport function createContext(defaultValue, contextId) {\n\tcontextId = '__cC' + i++;\n\n\tconst context = {\n\t\t_id: contextId,\n\t\t_defaultValue: defaultValue,\n\t\t/** @type {import('./internal').FunctionComponent} */\n\t\tConsumer(props, contextValue) {\n\t\t\t// return props.children(\n\t\t\t// \tcontext[contextId] ? context[contextId].props.value : defaultValue\n\t\t\t// );\n\t\t\treturn props.children(contextValue);\n\t\t},\n\t\t/** @type {import('./internal').FunctionComponent} */\n\t\tProvider(props) {\n\t\t\tif (!this.getChildContext) {\n\t\t\t\t/** @type {import('./internal').Component[]} */\n\t\t\t\tlet subs = [];\n\t\t\t\tlet ctx = {};\n\t\t\t\tctx[contextId] = this;\n\n\t\t\t\tthis.getChildContext = () => ctx;\n\n\t\t\t\tthis.shouldComponentUpdate = function(_props) {\n\t\t\t\t\tif (this.props.value !== _props.value) {\n\t\t\t\t\t\t// I think the forced value propagation here was only needed when `options.debounceRendering` was being bypassed:\n\t\t\t\t\t\t// https://github.com/preactjs/preact/commit/4d339fb803bea09e9f198abf38ca1bf8ea4b7771#diff-54682ce380935a717e41b8bfc54737f6R358\n\t\t\t\t\t\t// In those cases though, even with the value corrected, we're double-rendering all nodes.\n\t\t\t\t\t\t// It might be better to just tell folks not to use force-sync mode.\n\t\t\t\t\t\t// Currently, using `useContext()` in a class component will overwrite its `this.context` value.\n\t\t\t\t\t\t// subs.some(c => {\n\t\t\t\t\t\t// \tc.context = _props.value;\n\t\t\t\t\t\t// \tenqueueRender(c);\n\t\t\t\t\t\t// });\n\n\t\t\t\t\t\t// subs.some(c => {\n\t\t\t\t\t\t// \tc.context[contextId] = _props.value;\n\t\t\t\t\t\t// \tenqueueRender(c);\n\t\t\t\t\t\t// });\n\t\t\t\t\t\tsubs.some(c => {\n\t\t\t\t\t\t\tc._force = true;\n\t\t\t\t\t\t\tenqueueRender(c);\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t};\n\n\t\t\t\tthis.sub = c => {\n\t\t\t\t\tsubs.push(c);\n\t\t\t\t\tlet old = c.componentWillUnmount;\n\t\t\t\t\tc.componentWillUnmount = () => {\n\t\t\t\t\t\tsubs.splice(subs.indexOf(c), 1);\n\t\t\t\t\t\tif (old) old.call(c);\n\t\t\t\t\t};\n\t\t\t\t};\n\t\t\t}\n\n\t\t\treturn props.children;\n\t\t}\n\t};\n\n\t// Devtools needs access to the context object when it\n\t// encounters a Provider. This is necessary to support\n\t// setting `displayName` on the context object instead\n\t// of on the component itself. See:\n\t// https://reactjs.org/docs/context.html#contextdisplayname\n\n\treturn (context.Provider._contextRef = context.Consumer.contextType = context);\n}\n","export const EMPTY_OBJ = {};\nexport const EMPTY_ARR = [];\nexport const IS_NON_DIMENSIONAL = /acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i;\n","import { diff, unmount, applyRef } from './index';\nimport { createVNode, Fragment } from '../create-element';\nimport { EMPTY_OBJ, EMPTY_ARR } from '../constants';\nimport { getDomSibling } from '../component';\n\n/**\n * Diff the children of a virtual node\n * @param {import('../internal').PreactElement} parentDom The DOM element whose\n * children are being diffed\n * @param {import('../internal').ComponentChildren[]} renderResult\n * @param {import('../internal').VNode} newParentVNode The new virtual\n * node whose children should be diff'ed against oldParentVNode\n * @param {import('../internal').VNode} oldParentVNode The old virtual\n * node whose children should be diff'ed against newParentVNode\n * @param {object} globalContext The current context object - modified by getChildContext\n * @param {boolean} isSvg Whether or not this DOM node is an SVG node\n * @param {Array<import('../internal').PreactElement>} excessDomChildren\n * @param {Array<import('../internal').Component>} commitQueue List of components\n * which have callbacks to invoke in commitRoot\n * @param {import('../internal').PreactElement} oldDom The current attached DOM\n * element any new dom elements should be placed around. Likely `null` on first\n * render (except when hydrating). Can be a sibling DOM element when diffing\n * Fragments that have siblings. In most cases, it starts out as `oldChildren[0]._dom`.\n * @param {boolean} isHydrating Whether or not we are in hydration\n */\nexport function diffChildren(\n\tparentDom,\n\trenderResult,\n\tnewParentVNode,\n\toldParentVNode,\n\tglobalContext,\n\tisSvg,\n\texcessDomChildren,\n\tcommitQueue,\n\toldDom,\n\tisHydrating\n) {\n\tlet i, j, oldVNode, childVNode, newDom, firstChildDom, refs;\n\n\t// This is a compression of oldParentVNode!=null && oldParentVNode != EMPTY_OBJ && oldParentVNode._children || EMPTY_ARR\n\t// as EMPTY_OBJ._children should be `undefined`.\n\tlet oldChildren = (oldParentVNode && oldParentVNode._children) || EMPTY_ARR;\n\n\tlet oldChildrenLength = oldChildren.length;\n\n\tnewParentVNode._children = [];\n\tfor (i = 0; i < renderResult.length; i++) {\n\t\tchildVNode = renderResult[i];\n\n\t\tif (childVNode == null || typeof childVNode == 'boolean') {\n\t\t\tchildVNode = newParentVNode._children[i] = null;\n\t\t}\n\t\t// If this newVNode is being reused (e.g. <div>{reuse}{reuse}</div>) in the same diff,\n\t\t// or we are rendering a component (e.g. setState) copy the oldVNodes so it can have\n\t\t// it's own DOM & etc. pointers\n\t\telse if (\n\t\t\ttypeof childVNode == 'string' ||\n\t\t\ttypeof childVNode == 'number' ||\n\t\t\t// eslint-disable-next-line valid-typeof\n\t\t\ttypeof childVNode == 'bigint'\n\t\t) {\n\t\t\tchildVNode = newParentVNode._children[i] = createVNode(\n\t\t\t\tnull,\n\t\t\t\tchildVNode,\n\t\t\t\tnull,\n\t\t\t\tnull,\n\t\t\t\tchildVNode\n\t\t\t);\n\t\t} else if (Array.isArray(childVNode)) {\n\t\t\tchildVNode = newParentVNode._children[i] = createVNode(\n\t\t\t\tFragment,\n\t\t\t\t{ children: childVNode },\n\t\t\t\tnull,\n\t\t\t\tnull,\n\t\t\t\tnull\n\t\t\t);\n\t\t} else if (childVNode._depth > 0) {\n\t\t\t// VNode is already in use, clone it. This can happen in the following\n\t\t\t// scenario:\n\t\t\t//   const reuse = <div />\n\t\t\t//   <div>{reuse}<span />{reuse}</div>\n\t\t\tchildVNode = newParentVNode._children[i] = createVNode(\n\t\t\t\tchildVNode.type,\n\t\t\t\tchildVNode.props,\n\t\t\t\tchildVNode.key,\n\t\t\t\tchildVNode.ref ? childVNode.ref : null,\n\t\t\t\tchildVNode._original\n\t\t\t);\n\t\t} else {\n\t\t\tchildVNode = newParentVNode._children[i] = childVNode;\n\t\t}\n\n\t\t// Terser removes the `continue` here and wraps the loop body\n\t\t// in a `if (childVNode) { ... } condition\n\t\tif (childVNode == null) {\n\t\t\tcontinue;\n\t\t}\n\n\t\tchildVNode._parent = newParentVNode;\n\t\tchildVNode._depth = newParentVNode._depth + 1;\n\n\t\t// Check if we find a corresponding element in oldChildren.\n\t\t// If found, delete the array item by setting to `undefined`.\n\t\t// We use `undefined`, as `null` is reserved for empty placeholders\n\t\t// (holes).\n\t\toldVNode = oldChildren[i];\n\n\t\tif (\n\t\t\toldVNode === null ||\n\t\t\t(oldVNode &&\n\t\t\t\tchildVNode.key == oldVNode.key &&\n\t\t\t\tchildVNode.type === oldVNode.type)\n\t\t) {\n\t\t\toldChildren[i] = undefined;\n\t\t} else {\n\t\t\t// Either oldVNode === undefined or oldChildrenLength > 0,\n\t\t\t// so after this loop oldVNode == null or oldVNode is a valid value.\n\t\t\tfor (j = 0; j < oldChildrenLength; j++) {\n\t\t\t\toldVNode = oldChildren[j];\n\t\t\t\t// If childVNode is unkeyed, we only match similarly unkeyed nodes, otherwise we match by key.\n\t\t\t\t// We always match by type (in either case).\n\t\t\t\tif (\n\t\t\t\t\toldVNode &&\n\t\t\t\t\tchildVNode.key == oldVNode.key &&\n\t\t\t\t\tchildVNode.type === oldVNode.type\n\t\t\t\t) {\n\t\t\t\t\toldChildren[j] = undefined;\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t\toldVNode = null;\n\t\t\t}\n\t\t}\n\n\t\toldVNode = oldVNode || EMPTY_OBJ;\n\n\t\t// Morph the old element into the new one, but don't append it to the dom yet\n\t\tdiff(\n\t\t\tparentDom,\n\t\t\tchildVNode,\n\t\t\toldVNode,\n\t\t\tglobalContext,\n\t\t\tisSvg,\n\t\t\texcessDomChildren,\n\t\t\tcommitQueue,\n\t\t\toldDom,\n\t\t\tisHydrating\n\t\t);\n\n\t\tnewDom = childVNode._dom;\n\n\t\tif ((j = childVNode.ref) && oldVNode.ref != j) {\n\t\t\tif (!refs) refs = [];\n\t\t\tif (oldVNode.ref) refs.push(oldVNode.ref, null, childVNode);\n\t\t\trefs.push(j, childVNode._component || newDom, childVNode);\n\t\t}\n\n\t\tif (newDom != null) {\n\t\t\tif (firstChildDom == null) {\n\t\t\t\tfirstChildDom = newDom;\n\t\t\t}\n\n\t\t\tif (\n\t\t\t\ttypeof childVNode.type == 'function' &&\n\t\t\t\tchildVNode._children === oldVNode._children\n\t\t\t) {\n\t\t\t\tchildVNode._nextDom = oldDom = reorderChildren(\n\t\t\t\t\tchildVNode,\n\t\t\t\t\toldDom,\n\t\t\t\t\tparentDom\n\t\t\t\t);\n\t\t\t} else {\n\t\t\t\toldDom = placeChild(\n\t\t\t\t\tparentDom,\n\t\t\t\t\tchildVNode,\n\t\t\t\t\toldVNode,\n\t\t\t\t\toldChildren,\n\t\t\t\t\tnewDom,\n\t\t\t\t\toldDom\n\t\t\t\t);\n\t\t\t}\n\n\t\t\tif (typeof newParentVNode.type == 'function') {\n\t\t\t\t// Because the newParentVNode is Fragment-like, we need to set it's\n\t\t\t\t// _nextDom property to the nextSibling of its last child DOM node.\n\t\t\t\t//\n\t\t\t\t// `oldDom` contains the correct value here because if the last child\n\t\t\t\t// is a Fragment-like, then oldDom has already been set to that child's _nextDom.\n\t\t\t\t// If the last child is a DOM VNode, then oldDom will be set to that DOM\n\t\t\t\t// node's nextSibling.\n\t\t\t\tnewParentVNode._nextDom = oldDom;\n\t\t\t}\n\t\t} else if (\n\t\t\toldDom &&\n\t\t\toldVNode._dom == oldDom &&\n\t\t\toldDom.parentNode != parentDom\n\t\t) {\n\t\t\t// The above condition is to handle null placeholders. See test in placeholder.test.js:\n\t\t\t// `efficiently replace null placeholders in parent rerenders`\n\t\t\toldDom = getDomSibling(oldVNode);\n\t\t}\n\t}\n\n\tnewParentVNode._dom = firstChildDom;\n\n\t// Remove remaining oldChildren if there are any.\n\tfor (i = oldChildrenLength; i--; ) {\n\t\tif (oldChildren[i] != null) {\n\t\t\tif (\n\t\t\t\ttypeof newParentVNode.type == 'function' &&\n\t\t\t\toldChildren[i]._dom != null &&\n\t\t\t\toldChildren[i]._dom == newParentVNode._nextDom\n\t\t\t) {\n\t\t\t\t// If the newParentVNode.__nextDom points to a dom node that is about to\n\t\t\t\t// be unmounted, then get the next sibling of that vnode and set\n\t\t\t\t// _nextDom to it\n\t\t\t\tnewParentVNode._nextDom = getLastDom(oldParentVNode).nextSibling;\n\t\t\t}\n\n\t\t\tunmount(oldChildren[i], oldChildren[i]);\n\t\t}\n\t}\n\n\t// Set refs only after unmount\n\tif (refs) {\n\t\tfor (i = 0; i < refs.length; i++) {\n\t\t\tapplyRef(refs[i], refs[++i], refs[++i]);\n\t\t}\n\t}\n}\n\nfunction reorderChildren(childVNode, oldDom, parentDom) {\n\t// Note: VNodes in nested suspended trees may be missing _children.\n\tlet c = childVNode._children;\n\tlet tmp = 0;\n\tfor (; c && tmp < c.length; tmp++) {\n\t\tlet vnode = c[tmp];\n\t\tif (vnode) {\n\t\t\t// We typically enter this code path on sCU bailout, where we copy\n\t\t\t// oldVNode._children to newVNode._children. If that is the case, we need\n\t\t\t// to update the old children's _parent pointer to point to the newVNode\n\t\t\t// (childVNode here).\n\t\t\tvnode._parent = childVNode;\n\n\t\t\tif (typeof vnode.type == 'function') {\n\t\t\t\toldDom = reorderChildren(vnode, oldDom, parentDom);\n\t\t\t} else {\n\t\t\t\toldDom = placeChild(parentDom, vnode, vnode, c, vnode._dom, oldDom);\n\t\t\t}\n\t\t}\n\t}\n\n\treturn oldDom;\n}\n\n/**\n * Flatten and loop through the children of a virtual node\n * @param {import('../index').ComponentChildren} children The unflattened\n * children of a virtual node\n * @returns {import('../internal').VNode[]}\n */\nexport function toChildArray(children, out) {\n\tout = out || [];\n\tif (children == null || typeof children == 'boolean') {\n\t} else if (Array.isArray(children)) {\n\t\tchildren.some(child => {\n\t\t\ttoChildArray(child, out);\n\t\t});\n\t} else {\n\t\tout.push(children);\n\t}\n\treturn out;\n}\n\nfunction placeChild(\n\tparentDom,\n\tchildVNode,\n\toldVNode,\n\toldChildren,\n\tnewDom,\n\toldDom\n) {\n\tlet nextDom;\n\tif (childVNode._nextDom !== undefined) {\n\t\t// Only Fragments or components that return Fragment like VNodes will\n\t\t// have a non-undefined _nextDom. Continue the diff from the sibling\n\t\t// of last DOM child of this child VNode\n\t\tnextDom = childVNode._nextDom;\n\n\t\t// Eagerly cleanup _nextDom. We don't need to persist the value because\n\t\t// it is only used by `diffChildren` to determine where to resume the diff after\n\t\t// diffing Components and Fragments. Once we store it the nextDOM local var, we\n\t\t// can clean up the property\n\t\tchildVNode._nextDom = undefined;\n\t} else if (\n\t\toldVNode == null ||\n\t\tnewDom != oldDom ||\n\t\tnewDom.parentNode == null\n\t) {\n\t\touter: if (oldDom == null || oldDom.parentNode !== parentDom) {\n\t\t\tparentDom.appendChild(newDom);\n\t\t\tnextDom = null;\n\t\t} else {\n\t\t\t// `j<oldChildrenLength; j+=2` is an alternative to `j++<oldChildrenLength/2`\n\t\t\tfor (\n\t\t\t\tlet sibDom = oldDom, j = 0;\n\t\t\t\t(sibDom = sibDom.nextSibling) && j < oldChildren.length;\n\t\t\t\tj += 1\n\t\t\t) {\n\t\t\t\tif (sibDom == newDom) {\n\t\t\t\t\tbreak outer;\n\t\t\t\t}\n\t\t\t}\n\t\t\tparentDom.insertBefore(newDom, oldDom);\n\t\t\tnextDom = oldDom;\n\t\t}\n\t}\n\n\t// If we have pre-calculated the nextDOM node, use it. Else calculate it now\n\t// Strictly check for `undefined` here cuz `null` is a valid value of `nextDom`.\n\t// See more detail in create-element.js:createVNode\n\tif (nextDom !== undefined) {\n\t\toldDom = nextDom;\n\t} else {\n\t\toldDom = newDom.nextSibling;\n\t}\n\n\treturn oldDom;\n}\n\n/**\n * @param {import('../internal').VNode} vnode\n */\nfunction getLastDom(vnode) {\n\tif (vnode.type == null || typeof vnode.type === 'string') {\n\t\treturn vnode._dom;\n\t}\n\n\tif (vnode._children) {\n\t\tfor (let i = vnode._children.length - 1; i >= 0; i--) {\n\t\t\tlet child = vnode._children[i];\n\t\t\tif (child) {\n\t\t\t\tlet lastDom = getLastDom(child);\n\t\t\t\tif (lastDom) {\n\t\t\t\t\treturn lastDom;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\treturn null;\n}\n","import { IS_NON_DIMENSIONAL } from '../constants';\nimport options from '../options';\n\n/**\n * Diff the old and new properties of a VNode and apply changes to the DOM node\n * @param {import('../internal').PreactElement} dom The DOM node to apply\n * changes to\n * @param {object} newProps The new props\n * @param {object} oldProps The old props\n * @param {boolean} isSvg Whether or not this node is an SVG node\n * @param {boolean} hydrate Whether or not we are in hydration mode\n */\nexport function diffProps(dom, newProps, oldProps, isSvg, hydrate) {\n\tlet i;\n\n\tfor (i in oldProps) {\n\t\tif (i !== 'children' && i !== 'key' && !(i in newProps)) {\n\t\t\tsetProperty(dom, i, null, oldProps[i], isSvg);\n\t\t}\n\t}\n\n\tfor (i in newProps) {\n\t\tif (\n\t\t\t(!hydrate || typeof newProps[i] == 'function') &&\n\t\t\ti !== 'children' &&\n\t\t\ti !== 'key' &&\n\t\t\ti !== 'value' &&\n\t\t\ti !== 'checked' &&\n\t\t\toldProps[i] !== newProps[i]\n\t\t) {\n\t\t\tsetProperty(dom, i, newProps[i], oldProps[i], isSvg);\n\t\t}\n\t}\n}\n\nfunction setStyle(style, key, value) {\n\tif (key[0] === '-') {\n\t\tstyle.setProperty(key, value == null ? '' : value);\n\t} else if (value == null) {\n\t\tstyle[key] = '';\n\t} else if (typeof value != 'number' || IS_NON_DIMENSIONAL.test(key)) {\n\t\tstyle[key] = value;\n\t} else {\n\t\tstyle[key] = value + 'px';\n\t}\n}\n\n/**\n * Set a property value on a DOM node\n * @param {import('../internal').PreactElement} dom The DOM node to modify\n * @param {string} name The name of the property to set\n * @param {*} value The value to set the property to\n * @param {*} oldValue The old value the property had\n * @param {boolean} isSvg Whether or not this DOM node is an SVG node or not\n */\nexport function setProperty(dom, name, value, oldValue, isSvg) {\n\tlet useCapture;\n\n\to: if (name === 'style') {\n\t\tif (typeof value == 'string') {\n\t\t\tdom.style.cssText = value;\n\t\t} else {\n\t\t\tif (typeof oldValue == 'string') {\n\t\t\t\tdom.style.cssText = oldValue = '';\n\t\t\t}\n\n\t\t\tif (oldValue) {\n\t\t\t\tfor (name in oldValue) {\n\t\t\t\t\tif (!(value && name in value)) {\n\t\t\t\t\t\tsetStyle(dom.style, name, '');\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (value) {\n\t\t\t\tfor (name in value) {\n\t\t\t\t\tif (!oldValue || value[name] !== oldValue[name]) {\n\t\t\t\t\t\tsetStyle(dom.style, name, value[name]);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\t// Benchmark for comparison: https://esbench.com/bench/574c954bdb965b9a00965ac6\n\telse if (name[0] === 'o' && name[1] === 'n') {\n\t\tuseCapture = name !== (name = name.replace(/Capture$/, ''));\n\n\t\t// Infer correct casing for DOM built-in events:\n\t\tif (name.toLowerCase() in dom) name = name.toLowerCase().slice(2);\n\t\telse name = name.slice(2);\n\n\t\tif (!dom._listeners) dom._listeners = {};\n\t\tdom._listeners[name + useCapture] = value;\n\n\t\tif (value) {\n\t\t\tif (!oldValue) {\n\t\t\t\tconst handler = useCapture ? eventProxyCapture : eventProxy;\n\t\t\t\tdom.addEventListener(name, handler, useCapture);\n\t\t\t}\n\t\t} else {\n\t\t\tconst handler = useCapture ? eventProxyCapture : eventProxy;\n\t\t\tdom.removeEventListener(name, handler, useCapture);\n\t\t}\n\t} else if (name !== 'dangerouslySetInnerHTML') {\n\t\tif (isSvg) {\n\t\t\t// Normalize incorrect prop usage for SVG:\n\t\t\t// - xlink:href / xlinkHref --> href (xlink:href was removed from SVG and isn't needed)\n\t\t\t// - className --> class\n\t\t\tname = name.replace(/xlink(H|:h)/, 'h').replace(/sName$/, 's');\n\t\t} else if (\n\t\t\tname !== 'width' &&\n\t\t\tname !== 'height' &&\n\t\t\tname !== 'href' &&\n\t\t\tname !== 'list' &&\n\t\t\tname !== 'form' &&\n\t\t\t// Default value in browsers is `-1` and an empty string is\n\t\t\t// cast to `0` instead\n\t\t\tname !== 'tabIndex' &&\n\t\t\tname !== 'download' &&\n\t\t\tname in dom\n\t\t) {\n\t\t\ttry {\n\t\t\t\tdom[name] = value == null ? '' : value;\n\t\t\t\t// labelled break is 1b smaller here than a return statement (sorry)\n\t\t\t\tbreak o;\n\t\t\t} catch (e) {}\n\t\t}\n\n\t\t// ARIA-attributes have a different notion of boolean values.\n\t\t// The value `false` is different from the attribute not\n\t\t// existing on the DOM, so we can't remove it. For non-boolean\n\t\t// ARIA-attributes we could treat false as a removal, but the\n\t\t// amount of exceptions would cost us too many bytes. On top of\n\t\t// that other VDOM frameworks also always stringify `false`.\n\n\t\tif (typeof value === 'function') {\n\t\t\t// never serialize functions as attribute values\n\t\t} else if (value != null && (value !== false || name.indexOf('-') != -1)) {\n\t\t\tdom.setAttribute(name, value);\n\t\t} else {\n\t\t\tdom.removeAttribute(name);\n\t\t}\n\t}\n}\n\n/**\n * Proxy an event to hooked event handlers\n * @param {Event} e The event object from the browser\n * @private\n */\nfunction eventProxy(e) {\n\treturn this._listeners[e.type + false](options.event ? options.event(e) : e);\n}\n\nfunction eventProxyCapture(e) {\n\treturn this._listeners[e.type + true](options.event ? options.event(e) : e);\n}\n","import { EMPTY_OBJ } from '../constants';\nimport { Component, getDomSibling } from '../component';\nimport { Fragment } from '../create-element';\nimport { diffChildren } from './children';\nimport { diffProps, setProperty } from './props';\nimport { assign, removeNode, slice } from '../util';\nimport options from '../options';\n\n/**\n * Diff two virtual nodes and apply proper changes to the DOM\n * @param {import('../internal').PreactElement} parentDom The parent of the DOM element\n * @param {import('../internal').VNode} newVNode The new virtual node\n * @param {import('../internal').VNode} oldVNode The old virtual node\n * @param {object} globalContext The current context object. Modified by getChildContext\n * @param {boolean} isSvg Whether or not this element is an SVG node\n * @param {Array<import('../internal').PreactElement>} excessDomChildren\n * @param {Array<import('../internal').Component>} commitQueue List of components\n * which have callbacks to invoke in commitRoot\n * @param {import('../internal').PreactElement} oldDom The current attached DOM\n * element any new dom elements should be placed around. Likely `null` on first\n * render (except when hydrating). Can be a sibling DOM element when diffing\n * Fragments that have siblings. In most cases, it starts out as `oldChildren[0]._dom`.\n * @param {boolean} [isHydrating] Whether or not we are in hydration\n */\nexport function diff(\n\tparentDom,\n\tnewVNode,\n\toldVNode,\n\tglobalContext,\n\tisSvg,\n\texcessDomChildren,\n\tcommitQueue,\n\toldDom,\n\tisHydrating\n) {\n\tlet tmp,\n\t\tnewType = newVNode.type;\n\n\t// When passing through createElement it assigns the object\n\t// constructor as undefined. This to prevent JSON-injection.\n\tif (newVNode.constructor !== undefined) return null;\n\n\t// If the previous diff bailed out, resume creating/hydrating.\n\tif (oldVNode._hydrating != null) {\n\t\tisHydrating = oldVNode._hydrating;\n\t\toldDom = newVNode._dom = oldVNode._dom;\n\t\t// if we resume, we want the tree to be \"unlocked\"\n\t\tnewVNode._hydrating = null;\n\t\texcessDomChildren = [oldDom];\n\t}\n\n\tif ((tmp = options._diff)) tmp(newVNode);\n\n\ttry {\n\t\touter: if (typeof newType == 'function') {\n\t\t\tlet c, isNew, oldProps, oldState, snapshot, clearProcessingException;\n\t\t\tlet newProps = newVNode.props;\n\n\t\t\t// Necessary for createContext api. Setting this property will pass\n\t\t\t// the context value as `this.context` just for this component.\n\t\t\ttmp = newType.contextType;\n\t\t\tlet provider = tmp && globalContext[tmp._id];\n\t\t\tlet componentContext = tmp\n\t\t\t\t? provider\n\t\t\t\t\t? provider.props.value\n\t\t\t\t\t: tmp._defaultValue\n\t\t\t\t: globalContext;\n\n\t\t\t// Get component and set it to `c`\n\t\t\tif (oldVNode._component) {\n\t\t\t\tc = newVNode._component = oldVNode._component;\n\t\t\t\tclearProcessingException = c._processingException = c._pendingError;\n\t\t\t} else {\n\t\t\t\t// Instantiate the new component\n\t\t\t\tif ('prototype' in newType && newType.prototype.render) {\n\t\t\t\t\t// @ts-ignore The check above verifies that newType is suppose to be constructed\n\t\t\t\t\tnewVNode._component = c = new newType(newProps, componentContext); // eslint-disable-line new-cap\n\t\t\t\t} else {\n\t\t\t\t\t// @ts-ignore Trust me, Component implements the interface we want\n\t\t\t\t\tnewVNode._component = c = new Component(newProps, componentContext);\n\t\t\t\t\tc.constructor = newType;\n\t\t\t\t\tc.render = doRender;\n\t\t\t\t}\n\t\t\t\tif (provider) provider.sub(c);\n\n\t\t\t\tc.props = newProps;\n\t\t\t\tif (!c.state) c.state = {};\n\t\t\t\tc.context = componentContext;\n\t\t\t\tc._globalContext = globalContext;\n\t\t\t\tisNew = c._dirty = true;\n\t\t\t\tc._renderCallbacks = [];\n\t\t\t\tc._stateCallbacks = [];\n\t\t\t}\n\n\t\t\t// Invoke getDerivedStateFromProps\n\t\t\tif (c._nextState == null) {\n\t\t\t\tc._nextState = c.state;\n\t\t\t}\n\n\t\t\tif (newType.getDerivedStateFromProps != null) {\n\t\t\t\tif (c._nextState == c.state) {\n\t\t\t\t\tc._nextState = assign({}, c._nextState);\n\t\t\t\t}\n\n\t\t\t\tassign(\n\t\t\t\t\tc._nextState,\n\t\t\t\t\tnewType.getDerivedStateFromProps(newProps, c._nextState)\n\t\t\t\t);\n\t\t\t}\n\n\t\t\toldProps = c.props;\n\t\t\toldState = c.state;\n\t\t\tc._vnode = newVNode;\n\n\t\t\t// Invoke pre-render lifecycle methods\n\t\t\tif (isNew) {\n\t\t\t\tif (\n\t\t\t\t\tnewType.getDerivedStateFromProps == null &&\n\t\t\t\t\tc.componentWillMount != null\n\t\t\t\t) {\n\t\t\t\t\tc.componentWillMount();\n\t\t\t\t}\n\n\t\t\t\tif (c.componentDidMount != null) {\n\t\t\t\t\tc._renderCallbacks.push(c.componentDidMount);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tif (\n\t\t\t\t\tnewType.getDerivedStateFromProps == null &&\n\t\t\t\t\tnewProps !== oldProps &&\n\t\t\t\t\tc.componentWillReceiveProps != null\n\t\t\t\t) {\n\t\t\t\t\tc.componentWillReceiveProps(newProps, componentContext);\n\t\t\t\t}\n\n\t\t\t\tif (\n\t\t\t\t\t(!c._force &&\n\t\t\t\t\t\tc.shouldComponentUpdate != null &&\n\t\t\t\t\t\tc.shouldComponentUpdate(\n\t\t\t\t\t\t\tnewProps,\n\t\t\t\t\t\t\tc._nextState,\n\t\t\t\t\t\t\tcomponentContext\n\t\t\t\t\t\t) === false) ||\n\t\t\t\t\tnewVNode._original === oldVNode._original\n\t\t\t\t) {\n\t\t\t\t\t// More info about this here: https://gist.github.com/JoviDeCroock/bec5f2ce93544d2e6070ef8e0036e4e8\n\t\t\t\t\tif (newVNode._original !== oldVNode._original) {\n\t\t\t\t\t\t// When we are dealing with a bail because of sCU we have to update\n\t\t\t\t\t\t// the props, state and dirty-state.\n\t\t\t\t\t\t// when we are dealing with strict-equality we don't as the child could still\n\t\t\t\t\t\t// be dirtied see #3883\n\t\t\t\t\t\tc.props = newProps;\n\t\t\t\t\t\tc.state = c._nextState;\n\t\t\t\t\t\tc._dirty = false;\n\t\t\t\t\t}\n\n\t\t\t\t\t// In cases of bailing due to strict-equality we have to reset force as well\n\t\t\t\t\tc._force = false;\n\t\t\t\t\tnewVNode._dom = oldVNode._dom;\n\t\t\t\t\tnewVNode._children = oldVNode._children;\n\t\t\t\t\tnewVNode._children.forEach(vnode => {\n\t\t\t\t\t\tif (vnode) vnode._parent = newVNode;\n\t\t\t\t\t});\n\n\t\t\t\t\tfor (let i = 0; i < c._stateCallbacks.length; i++) {\n\t\t\t\t\t\tc._renderCallbacks.push(c._stateCallbacks[i]);\n\t\t\t\t\t}\n\t\t\t\t\tc._stateCallbacks = [];\n\n\t\t\t\t\tif (c._renderCallbacks.length) {\n\t\t\t\t\t\tcommitQueue.push(c);\n\t\t\t\t\t}\n\n\t\t\t\t\tbreak outer;\n\t\t\t\t}\n\n\t\t\t\tif (c.componentWillUpdate != null) {\n\t\t\t\t\tc.componentWillUpdate(newProps, c._nextState, componentContext);\n\t\t\t\t}\n\n\t\t\t\tif (c.componentDidUpdate != null) {\n\t\t\t\t\tc._renderCallbacks.push(() => {\n\t\t\t\t\t\tc.componentDidUpdate(oldProps, oldState, snapshot);\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tc.context = componentContext;\n\t\t\tc.props = newProps;\n\t\t\tc._parentDom = parentDom;\n\n\t\t\tlet renderHook = options._render,\n\t\t\t\tcount = 0;\n\t\t\tif ('prototype' in newType && newType.prototype.render) {\n\t\t\t\tc.state = c._nextState;\n\t\t\t\tc._dirty = false;\n\n\t\t\t\tif (renderHook) renderHook(newVNode);\n\n\t\t\t\ttmp = c.render(c.props, c.state, c.context);\n\n\t\t\t\tfor (let i = 0; i < c._stateCallbacks.length; i++) {\n\t\t\t\t\tc._renderCallbacks.push(c._stateCallbacks[i]);\n\t\t\t\t}\n\t\t\t\tc._stateCallbacks = [];\n\t\t\t} else {\n\t\t\t\tdo {\n\t\t\t\t\tc._dirty = false;\n\t\t\t\t\tif (renderHook) renderHook(newVNode);\n\n\t\t\t\t\ttmp = c.render(c.props, c.state, c.context);\n\n\t\t\t\t\t// Handle setState called in render, see #2553\n\t\t\t\t\tc.state = c._nextState;\n\t\t\t\t} while (c._dirty && ++count < 25);\n\t\t\t}\n\n\t\t\t// Handle setState called in render, see #2553\n\t\t\tc.state = c._nextState;\n\n\t\t\tif (c.getChildContext != null) {\n\t\t\t\tglobalContext = assign(assign({}, globalContext), c.getChildContext());\n\t\t\t}\n\n\t\t\tif (!isNew && c.getSnapshotBeforeUpdate != null) {\n\t\t\t\tsnapshot = c.getSnapshotBeforeUpdate(oldProps, oldState);\n\t\t\t}\n\n\t\t\tlet isTopLevelFragment =\n\t\t\t\ttmp != null && tmp.type === Fragment && tmp.key == null;\n\t\t\tlet renderResult = isTopLevelFragment ? tmp.props.children : tmp;\n\n\t\t\tdiffChildren(\n\t\t\t\tparentDom,\n\t\t\t\tArray.isArray(renderResult) ? renderResult : [renderResult],\n\t\t\t\tnewVNode,\n\t\t\t\toldVNode,\n\t\t\t\tglobalContext,\n\t\t\t\tisSvg,\n\t\t\t\texcessDomChildren,\n\t\t\t\tcommitQueue,\n\t\t\t\toldDom,\n\t\t\t\tisHydrating\n\t\t\t);\n\n\t\t\tc.base = newVNode._dom;\n\n\t\t\t// We successfully rendered this VNode, unset any stored hydration/bailout state:\n\t\t\tnewVNode._hydrating = null;\n\n\t\t\tif (c._renderCallbacks.length) {\n\t\t\t\tcommitQueue.push(c);\n\t\t\t}\n\n\t\t\tif (clearProcessingException) {\n\t\t\t\tc._pendingError = c._processingException = null;\n\t\t\t}\n\n\t\t\tc._force = false;\n\t\t} else if (\n\t\t\texcessDomChildren == null &&\n\t\t\tnewVNode._original === oldVNode._original\n\t\t) {\n\t\t\tnewVNode._children = oldVNode._children;\n\t\t\tnewVNode._dom = oldVNode._dom;\n\t\t} else {\n\t\t\tnewVNode._dom = diffElementNodes(\n\t\t\t\toldVNode._dom,\n\t\t\t\tnewVNode,\n\t\t\t\toldVNode,\n\t\t\t\tglobalContext,\n\t\t\t\tisSvg,\n\t\t\t\texcessDomChildren,\n\t\t\t\tcommitQueue,\n\t\t\t\tisHydrating\n\t\t\t);\n\t\t}\n\n\t\tif ((tmp = options.diffed)) tmp(newVNode);\n\t} catch (e) {\n\t\tnewVNode._original = null;\n\t\t// if hydrating or creating initial tree, bailout preserves DOM:\n\t\tif (isHydrating || excessDomChildren != null) {\n\t\t\tnewVNode._dom = oldDom;\n\t\t\tnewVNode._hydrating = !!isHydrating;\n\t\t\texcessDomChildren[excessDomChildren.indexOf(oldDom)] = null;\n\t\t\t// ^ could possibly be simplified to:\n\t\t\t// excessDomChildren.length = 0;\n\t\t}\n\t\toptions._catchError(e, newVNode, oldVNode);\n\t}\n}\n\n/**\n * @param {Array<import('../internal').Component>} commitQueue List of components\n * which have callbacks to invoke in commitRoot\n * @param {import('../internal').VNode} root\n */\nexport function commitRoot(commitQueue, root) {\n\tif (options._commit) options._commit(root, commitQueue);\n\n\tcommitQueue.some(c => {\n\t\ttry {\n\t\t\t// @ts-ignore Reuse the commitQueue variable here so the type changes\n\t\t\tcommitQueue = c._renderCallbacks;\n\t\t\tc._renderCallbacks = [];\n\t\t\tcommitQueue.some(cb => {\n\t\t\t\t// @ts-ignore See above ts-ignore on commitQueue\n\t\t\t\tcb.call(c);\n\t\t\t});\n\t\t} catch (e) {\n\t\t\toptions._catchError(e, c._vnode);\n\t\t}\n\t});\n}\n\n/**\n * Diff two virtual nodes representing DOM element\n * @param {import('../internal').PreactElement} dom The DOM element representing\n * the virtual nodes being diffed\n * @param {import('../internal').VNode} newVNode The new virtual node\n * @param {import('../internal').VNode} oldVNode The old virtual node\n * @param {object} globalContext The current context object\n * @param {boolean} isSvg Whether or not this DOM node is an SVG node\n * @param {*} excessDomChildren\n * @param {Array<import('../internal').Component>} commitQueue List of components\n * which have callbacks to invoke in commitRoot\n * @param {boolean} isHydrating Whether or not we are in hydration\n * @returns {import('../internal').PreactElement}\n */\nfunction diffElementNodes(\n\tdom,\n\tnewVNode,\n\toldVNode,\n\tglobalContext,\n\tisSvg,\n\texcessDomChildren,\n\tcommitQueue,\n\tisHydrating\n) {\n\tlet oldProps = oldVNode.props;\n\tlet newProps = newVNode.props;\n\tlet nodeType = newVNode.type;\n\tlet i = 0;\n\n\t// Tracks entering and exiting SVG namespace when descending through the tree.\n\tif (nodeType === 'svg') isSvg = true;\n\n\tif (excessDomChildren != null) {\n\t\tfor (; i < excessDomChildren.length; i++) {\n\t\t\tconst child = excessDomChildren[i];\n\n\t\t\t// if newVNode matches an element in excessDomChildren or the `dom`\n\t\t\t// argument matches an element in excessDomChildren, remove it from\n\t\t\t// excessDomChildren so it isn't later removed in diffChildren\n\t\t\tif (\n\t\t\t\tchild &&\n\t\t\t\t'setAttribute' in child === !!nodeType &&\n\t\t\t\t(nodeType ? child.localName === nodeType : child.nodeType === 3)\n\t\t\t) {\n\t\t\t\tdom = child;\n\t\t\t\texcessDomChildren[i] = null;\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t}\n\n\tif (dom == null) {\n\t\tif (nodeType === null) {\n\t\t\t// @ts-ignore createTextNode returns Text, we expect PreactElement\n\t\t\treturn document.createTextNode(newProps);\n\t\t}\n\n\t\tif (isSvg) {\n\t\t\tdom = document.createElementNS(\n\t\t\t\t'http://www.w3.org/2000/svg',\n\t\t\t\t// @ts-ignore We know `newVNode.type` is a string\n\t\t\t\tnodeType\n\t\t\t);\n\t\t} else {\n\t\t\tdom = document.createElement(\n\t\t\t\t// @ts-ignore We know `newVNode.type` is a string\n\t\t\t\tnodeType,\n\t\t\t\tnewProps.is && newProps\n\t\t\t);\n\t\t}\n\n\t\t// we created a new parent, so none of the previously attached children can be reused:\n\t\texcessDomChildren = null;\n\t\t// we are creating a new node, so we can assume this is a new subtree (in case we are hydrating), this deopts the hydrate\n\t\tisHydrating = false;\n\t}\n\n\tif (nodeType === null) {\n\t\t// During hydration, we still have to split merged text from SSR'd HTML.\n\t\tif (oldProps !== newProps && (!isHydrating || dom.data !== newProps)) {\n\t\t\tdom.data = newProps;\n\t\t}\n\t} else {\n\t\t// If excessDomChildren was not null, repopulate it with the current element's children:\n\t\texcessDomChildren = excessDomChildren && slice.call(dom.childNodes);\n\n\t\toldProps = oldVNode.props || EMPTY_OBJ;\n\n\t\tlet oldHtml = oldProps.dangerouslySetInnerHTML;\n\t\tlet newHtml = newProps.dangerouslySetInnerHTML;\n\n\t\t// During hydration, props are not diffed at all (including dangerouslySetInnerHTML)\n\t\t// @TODO we should warn in debug mode when props don't match here.\n\t\tif (!isHydrating) {\n\t\t\t// But, if we are in a situation where we are using existing DOM (e.g. replaceNode)\n\t\t\t// we should read the existing DOM attributes to diff them\n\t\t\tif (excessDomChildren != null) {\n\t\t\t\toldProps = {};\n\t\t\t\tfor (i = 0; i < dom.attributes.length; i++) {\n\t\t\t\t\toldProps[dom.attributes[i].name] = dom.attributes[i].value;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (newHtml || oldHtml) {\n\t\t\t\t// Avoid re-applying the same '__html' if it did not changed between re-render\n\t\t\t\tif (\n\t\t\t\t\t!newHtml ||\n\t\t\t\t\t((!oldHtml || newHtml.__html != oldHtml.__html) &&\n\t\t\t\t\t\tnewHtml.__html !== dom.innerHTML)\n\t\t\t\t) {\n\t\t\t\t\tdom.innerHTML = (newHtml && newHtml.__html) || '';\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tdiffProps(dom, newProps, oldProps, isSvg, isHydrating);\n\n\t\t// If the new vnode didn't have dangerouslySetInnerHTML, diff its children\n\t\tif (newHtml) {\n\t\t\tnewVNode._children = [];\n\t\t} else {\n\t\t\ti = newVNode.props.children;\n\t\t\tdiffChildren(\n\t\t\t\tdom,\n\t\t\t\tArray.isArray(i) ? i : [i],\n\t\t\t\tnewVNode,\n\t\t\t\toldVNode,\n\t\t\t\tglobalContext,\n\t\t\t\tisSvg && nodeType !== 'foreignObject',\n\t\t\t\texcessDomChildren,\n\t\t\t\tcommitQueue,\n\t\t\t\texcessDomChildren\n\t\t\t\t\t? excessDomChildren[0]\n\t\t\t\t\t: oldVNode._children && getDomSibling(oldVNode, 0),\n\t\t\t\tisHydrating\n\t\t\t);\n\n\t\t\t// Remove children that are not part of any vnode.\n\t\t\tif (excessDomChildren != null) {\n\t\t\t\tfor (i = excessDomChildren.length; i--; ) {\n\t\t\t\t\tif (excessDomChildren[i] != null) removeNode(excessDomChildren[i]);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\t// (as above, don't diff props during hydration)\n\t\tif (!isHydrating) {\n\t\t\tif (\n\t\t\t\t'value' in newProps &&\n\t\t\t\t(i = newProps.value) !== undefined &&\n\t\t\t\t// #2756 For the <progress>-element the initial value is 0,\n\t\t\t\t// despite the attribute not being present. When the attribute\n\t\t\t\t// is missing the progress bar is treated as indeterminate.\n\t\t\t\t// To fix that we'll always update it when it is 0 for progress elements\n\t\t\t\t(i !== dom.value ||\n\t\t\t\t\t(nodeType === 'progress' && !i) ||\n\t\t\t\t\t// This is only for IE 11 to fix <select> value not being updated.\n\t\t\t\t\t// To avoid a stale select value we need to set the option.value\n\t\t\t\t\t// again, which triggers IE11 to re-evaluate the select value\n\t\t\t\t\t(nodeType === 'option' && i !== oldProps.value))\n\t\t\t) {\n\t\t\t\tsetProperty(dom, 'value', i, oldProps.value, false);\n\t\t\t}\n\t\t\tif (\n\t\t\t\t'checked' in newProps &&\n\t\t\t\t(i = newProps.checked) !== undefined &&\n\t\t\t\ti !== dom.checked\n\t\t\t) {\n\t\t\t\tsetProperty(dom, 'checked', i, oldProps.checked, false);\n\t\t\t}\n\t\t}\n\t}\n\n\treturn dom;\n}\n\n/**\n * Invoke or update a ref, depending on whether it is a function or object ref.\n * @param {object|function} ref\n * @param {any} value\n * @param {import('../internal').VNode} vnode\n */\nexport function applyRef(ref, value, vnode) {\n\ttry {\n\t\tif (typeof ref == 'function') ref(value);\n\t\telse ref.current = value;\n\t} catch (e) {\n\t\toptions._catchError(e, vnode);\n\t}\n}\n\n/**\n * Unmount a virtual node from the tree and apply DOM changes\n * @param {import('../internal').VNode} vnode The virtual node to unmount\n * @param {import('../internal').VNode} parentVNode The parent of the VNode that\n * initiated the unmount\n * @param {boolean} [skipRemove] Flag that indicates that a parent node of the\n * current element is already detached from the DOM.\n */\nexport function unmount(vnode, parentVNode, skipRemove) {\n\tlet r;\n\tif (options.unmount) options.unmount(vnode);\n\n\tif ((r = vnode.ref)) {\n\t\tif (!r.current || r.current === vnode._dom) {\n\t\t\tapplyRef(r, null, parentVNode);\n\t\t}\n\t}\n\n\tif ((r = vnode._component) != null) {\n\t\tif (r.componentWillUnmount) {\n\t\t\ttry {\n\t\t\t\tr.componentWillUnmount();\n\t\t\t} catch (e) {\n\t\t\t\toptions._catchError(e, parentVNode);\n\t\t\t}\n\t\t}\n\n\t\tr.base = r._parentDom = null;\n\t\tvnode._component = undefined;\n\t}\n\n\tif ((r = vnode._children)) {\n\t\tfor (let i = 0; i < r.length; i++) {\n\t\t\tif (r[i]) {\n\t\t\t\tunmount(\n\t\t\t\t\tr[i],\n\t\t\t\t\tparentVNode,\n\t\t\t\t\tskipRemove || typeof vnode.type !== 'function'\n\t\t\t\t);\n\t\t\t}\n\t\t}\n\t}\n\n\tif (!skipRemove && vnode._dom != null) {\n\t\tremoveNode(vnode._dom);\n\t}\n\n\t// Must be set to `undefined` to properly clean up `_nextDom`\n\t// for which `null` is a valid value. See comment in `create-element.js`\n\tvnode._parent = vnode._dom = vnode._nextDom = undefined;\n}\n\n/** The `.render()` method for a PFC backing instance. */\nfunction doRender(props, state, context) {\n\treturn this.constructor(props, context);\n}\n","import { EMPTY_OBJ } from './constants';\nimport { commitRoot, diff } from './diff/index';\nimport { createElement, Fragment } from './create-element';\nimport options from './options';\nimport { slice } from './util';\n\n/**\n * Render a Preact virtual node into a DOM element\n * @param {import('./internal').ComponentChild} vnode The virtual node to render\n * @param {import('./internal').PreactElement} parentDom The DOM element to\n * render into\n * @param {import('./internal').PreactElement | object} [replaceNode] Optional: Attempt to re-use an\n * existing DOM tree rooted at `replaceNode`\n */\nexport function render(vnode, parentDom, replaceNode) {\n\tif (options._root) options._root(vnode, parentDom);\n\n\t// We abuse the `replaceNode` parameter in `hydrate()` to signal if we are in\n\t// hydration mode or not by passing the `hydrate` function instead of a DOM\n\t// element..\n\tlet isHydrating = typeof replaceNode === 'function';\n\n\t// To be able to support calling `render()` multiple times on the same\n\t// DOM node, we need to obtain a reference to the previous tree. We do\n\t// this by assigning a new `_children` property to DOM nodes which points\n\t// to the last rendered tree. By default this property is not present, which\n\t// means that we are mounting a new tree for the first time.\n\tlet oldVNode = isHydrating\n\t\t? null\n\t\t: (replaceNode && replaceNode._children) || parentDom._children;\n\n\tvnode = (\n\t\t(!isHydrating && replaceNode) ||\n\t\tparentDom\n\t)._children = createElement(Fragment, null, [vnode]);\n\n\t// List of effects that need to be called after diffing.\n\tlet commitQueue = [];\n\tdiff(\n\t\tparentDom,\n\t\t// Determine the new vnode tree and store it on the DOM element on\n\t\t// our custom `_children` property.\n\t\tvnode,\n\t\toldVNode || EMPTY_OBJ,\n\t\tEMPTY_OBJ,\n\t\tparentDom.ownerSVGElement !== undefined,\n\t\t!isHydrating && replaceNode\n\t\t\t? [replaceNode]\n\t\t\t: oldVNode\n\t\t\t? null\n\t\t\t: parentDom.firstChild\n\t\t\t? slice.call(parentDom.childNodes)\n\t\t\t: null,\n\t\tcommitQueue,\n\t\t!isHydrating && replaceNode\n\t\t\t? replaceNode\n\t\t\t: oldVNode\n\t\t\t? oldVNode._dom\n\t\t\t: parentDom.firstChild,\n\t\tisHydrating\n\t);\n\n\t// Flush all queued effects\n\tcommitRoot(commitQueue, vnode);\n}\n\n/**\n * Update an existing DOM element with data from a Preact virtual node\n * @param {import('./internal').ComponentChild} vnode The virtual node to render\n * @param {import('./internal').PreactElement} parentDom The DOM element to\n * update\n */\nexport function hydrate(vnode, parentDom) {\n\trender(vnode, parentDom, hydrate);\n}\n","import { assign, slice } from './util';\nimport { createVNode } from './create-element';\n\n/**\n * Clones the given VNode, optionally adding attributes/props and replacing its children.\n * @param {import('./internal').VNode} vnode The virtual DOM element to clone\n * @param {object} props Attributes/props to add when cloning\n * @param {Array<import('./internal').ComponentChildren>} rest Any additional arguments will be used as replacement children.\n * @returns {import('./internal').VNode}\n */\nexport function cloneElement(vnode, props, children) {\n\tlet normalizedProps = assign({}, vnode.props),\n\t\tkey,\n\t\tref,\n\t\ti;\n\tfor (i in props) {\n\t\tif (i == 'key') key = props[i];\n\t\telse if (i == 'ref') ref = props[i];\n\t\telse normalizedProps[i] = props[i];\n\t}\n\n\tif (arguments.length > 2) {\n\t\tnormalizedProps.children =\n\t\t\targuments.length > 3 ? slice.call(arguments, 2) : children;\n\t}\n\n\treturn createVNode(\n\t\tvnode.type,\n\t\tnormalizedProps,\n\t\tkey || vnode.key,\n\t\tref || vnode.ref,\n\t\tnull\n\t);\n}\n","import { h, cloneElement, render, hydrate } from 'preact';\n\nexport default function register(Component, tagName, propNames, options) {\n\tfunction PreactElement() {\n\t\tconst inst = Reflect.construct(HTMLElement, [], PreactElement);\n\t\tinst._vdomComponent = Component;\n\t\tinst._root =\n\t\t\toptions && options.shadow ? inst.attachShadow({ mode: 'open' }) : inst;\n\t\treturn inst;\n\t}\n\tPreactElement.prototype = Object.create(HTMLElement.prototype);\n\tPreactElement.prototype.constructor = PreactElement;\n\tPreactElement.prototype.connectedCallback = connectedCallback;\n\tPreactElement.prototype.attributeChangedCallback = attributeChangedCallback;\n\tPreactElement.prototype.disconnectedCallback = disconnectedCallback;\n\n\tpropNames =\n\t\tpropNames ||\n\t\tComponent.observedAttributes ||\n\t\tObject.keys(Component.propTypes || {});\n\tPreactElement.observedAttributes = propNames;\n\n\t// Keep DOM properties and Preact props in sync\n\tpropNames.forEach((name) => {\n\t\tObject.defineProperty(PreactElement.prototype, name, {\n\t\t\tget() {\n\t\t\t\treturn this._vdom.props[name];\n\t\t\t},\n\t\t\tset(v) {\n\t\t\t\tif (this._vdom) {\n\t\t\t\t\tthis.attributeChangedCallback(name, null, v);\n\t\t\t\t} else {\n\t\t\t\t\tif (!this._props) this._props = {};\n\t\t\t\t\tthis._props[name] = v;\n\t\t\t\t\tthis.connectedCallback();\n\t\t\t\t}\n\n\t\t\t\t// Reflect property changes to attributes if the value is a primitive\n\t\t\t\tconst type = typeof v;\n\t\t\t\tif (\n\t\t\t\t\tv == null ||\n\t\t\t\t\ttype === 'string' ||\n\t\t\t\t\ttype === 'boolean' ||\n\t\t\t\t\ttype === 'number'\n\t\t\t\t) {\n\t\t\t\t\tthis.setAttribute(name, v);\n\t\t\t\t}\n\t\t\t},\n\t\t});\n\t});\n\n\treturn customElements.define(\n\t\ttagName || Component.tagName || Component.displayName || Component.name,\n\t\tPreactElement\n\t);\n}\n\nfunction ContextProvider(props) {\n\tthis.getChildContext = () => props.context;\n\t// eslint-disable-next-line no-unused-vars\n\tconst { context, children, ...rest } = props;\n\treturn cloneElement(children, rest);\n}\n\nfunction connectedCallback() {\n\t// Obtain a reference to the previous context by pinging the nearest\n\t// higher up node that was rendered with Preact. If one Preact component\n\t// higher up receives our ping, it will set the `detail` property of\n\t// our custom event. This works because events are dispatched\n\t// synchronously.\n\tconst event = new CustomEvent('_preact', {\n\t\tdetail: {},\n\t\tbubbles: true,\n\t\tcancelable: true,\n\t});\n\tthis.dispatchEvent(event);\n\tconst context = event.detail.context;\n\n\tthis._vdom = h(\n\t\tContextProvider,\n\t\t{ ...this._props, context },\n\t\ttoVdom(this, this._vdomComponent)\n\t);\n\t(this.hasAttribute('hydrate') ? hydrate : render)(this._vdom, this._root);\n}\n\nfunction toCamelCase(str) {\n\treturn str.replace(/-(\\w)/g, (_, c) => (c ? c.toUpperCase() : ''));\n}\n\nfunction attributeChangedCallback(name, oldValue, newValue) {\n\tif (!this._vdom) return;\n\t// Attributes use `null` as an empty value whereas `undefined` is more\n\t// common in pure JS components, especially with default parameters.\n\t// When calling `node.removeAttribute()` we'll receive `null` as the new\n\t// value. See issue #50.\n\tnewValue = newValue == null ? undefined : newValue;\n\tconst props = {};\n\tprops[name] = newValue;\n\tprops[toCamelCase(name)] = newValue;\n\tthis._vdom = cloneElement(this._vdom, props);\n\trender(this._vdom, this._root);\n}\n\nfunction disconnectedCallback() {\n\trender((this._vdom = null), this._root);\n}\n\n/**\n * Pass an event listener to each `<slot>` that \"forwards\" the current\n * context value to the rendered child. The child will trigger a custom\n * event, where will add the context value to. Because events work\n * synchronously, the child can immediately pull of the value right\n * after having fired the event.\n */\nfunction Slot(props, context) {\n\tconst ref = (r) => {\n\t\tif (!r) {\n\t\t\tthis.ref.removeEventListener('_preact', this._listener);\n\t\t} else {\n\t\t\tthis.ref = r;\n\t\t\tif (!this._listener) {\n\t\t\t\tthis._listener = (event) => {\n\t\t\t\t\tevent.stopPropagation();\n\t\t\t\t\tevent.detail.context = context;\n\t\t\t\t};\n\t\t\t\tr.addEventListener('_preact', this._listener);\n\t\t\t}\n\t\t}\n\t};\n\treturn h('slot', { ...props, ref });\n}\n\nfunction toVdom(element, nodeName) {\n\tif (element.nodeType === 3) return element.data;\n\tif (element.nodeType !== 1) return null;\n\tlet children = [],\n\t\tprops = {},\n\t\ti = 0,\n\t\ta = element.attributes,\n\t\tcn = element.childNodes;\n\tfor (i = a.length; i--; ) {\n\t\tif (a[i].name !== 'slot') {\n\t\t\tprops[a[i].name] = a[i].value;\n\t\t\tprops[toCamelCase(a[i].name)] = a[i].value;\n\t\t}\n\t}\n\n\tfor (i = cn.length; i--; ) {\n\t\tconst vnode = toVdom(cn[i], null);\n\t\t// Move slots correctly\n\t\tconst name = cn[i].slot;\n\t\tif (name) {\n\t\t\tprops[name] = h(Slot, { name }, vnode);\n\t\t} else {\n\t\t\tchildren[i] = vnode;\n\t\t}\n\t}\n\n\t// Only wrap the topmost node with a slot\n\tconst wrappedChildren = nodeName ? h(Slot, null, children) : children;\n\treturn h(nodeName || element.nodeName.toLowerCase(), props, wrappedChildren);\n}\n","/**\n * Find the closest error boundary to a thrown error and call it\n * @param {object} error The thrown value\n * @param {import('../internal').VNode} vnode The vnode that threw\n * the error that was caught (except for unmounting when this parameter\n * is the highest parent that was being unmounted)\n * @param {import('../internal').VNode} [oldVNode]\n * @param {import('../internal').ErrorInfo} [errorInfo]\n */\nexport function _catchError(error, vnode, oldVNode, errorInfo) {\n\t/** @type {import('../internal').Component} */\n\tlet component, ctor, handled;\n\n\tfor (; (vnode = vnode._parent); ) {\n\t\tif ((component = vnode._component) && !component._processingException) {\n\t\t\ttry {\n\t\t\t\tctor = component.constructor;\n\n\t\t\t\tif (ctor && ctor.getDerivedStateFromError != null) {\n\t\t\t\t\tcomponent.setState(ctor.getDerivedStateFromError(error));\n\t\t\t\t\thandled = component._dirty;\n\t\t\t\t}\n\n\t\t\t\tif (component.componentDidCatch != null) {\n\t\t\t\t\tcomponent.componentDidCatch(error, errorInfo || {});\n\t\t\t\t\thandled = component._dirty;\n\t\t\t\t}\n\n\t\t\t\t// This is an error boundary. Mark it as having bailed out, and whether it was mid-hydration.\n\t\t\t\tif (handled) {\n\t\t\t\t\treturn (component._pendingError = component);\n\t\t\t\t}\n\t\t\t} catch (e) {\n\t\t\t\terror = e;\n\t\t\t}\n\t\t}\n\t}\n\n\tthrow error;\n}\n","import { options, Fragment } from 'preact';\n\n/** @typedef {import('preact').VNode} VNode */\n\nlet vnodeId = 0;\n\n/**\n * @fileoverview\n * This file exports various methods that implement Babel's \"automatic\" JSX runtime API:\n * - jsx(type, props, key)\n * - jsxs(type, props, key)\n * - jsxDEV(type, props, key, __source, __self)\n *\n * The implementation of createVNode here is optimized for performance.\n * Benchmarks: https://esbench.com/bench/5f6b54a0b4632100a7dcd2b3\n */\n\n/**\n * JSX.Element factory used by Babel's {runtime:\"automatic\"} JSX transform\n * @param {VNode['type']} type\n * @param {VNode['props']} props\n * @param {VNode['key']} [key]\n * @param {unknown} [isStaticChildren]\n * @param {unknown} [__source]\n * @param {unknown} [__self]\n */\nfunction createVNode(type, props, key, isStaticChildren, __source, __self) {\n\t// We'll want to preserve `ref` in props to get rid of the need for\n\t// forwardRef components in the future, but that should happen via\n\t// a separate PR.\n\tlet normalizedProps = {},\n\t\tref,\n\t\ti;\n\tfor (i in props) {\n\t\tif (i == 'ref') {\n\t\t\tref = props[i];\n\t\t} else {\n\t\t\tnormalizedProps[i] = props[i];\n\t\t}\n\t}\n\n\tconst vnode = {\n\t\ttype,\n\t\tprops: normalizedProps,\n\t\tkey,\n\t\tref,\n\t\t_children: null,\n\t\t_parent: null,\n\t\t_depth: 0,\n\t\t_dom: null,\n\t\t_nextDom: undefined,\n\t\t_component: null,\n\t\t_hydrating: null,\n\t\tconstructor: undefined,\n\t\t_original: --vnodeId,\n\t\t__source,\n\t\t__self\n\t};\n\n\t// If a Component VNode, check for and apply defaultProps.\n\t// Note: `type` is often a String, and can be `undefined` in development.\n\tif (typeof type === 'function' && (ref = type.defaultProps)) {\n\t\tfor (i in ref)\n\t\t\tif (typeof normalizedProps[i] === 'undefined') {\n\t\t\t\tnormalizedProps[i] = ref[i];\n\t\t\t}\n\t}\n\n\tif (options.vnode) options.vnode(vnode);\n\treturn vnode;\n}\n\nexport {\n\tcreateVNode as jsx,\n\tcreateVNode as jsxs,\n\tcreateVNode as jsxDEV,\n\tFragment\n};\n","import { options } from 'preact';\n\n/** @type {number} */\nlet currentIndex;\n\n/** @type {import('./internal').Component} */\nlet currentComponent;\n\n/** @type {import('./internal').Component} */\nlet previousComponent;\n\n/** @type {number} */\nlet currentHook = 0;\n\n/** @type {Array<import('./internal').Component>} */\nlet afterPaintEffects = [];\n\nlet EMPTY = [];\n\nlet oldBeforeDiff = options._diff;\nlet oldBeforeRender = options._render;\nlet oldAfterDiff = options.diffed;\nlet oldCommit = options._commit;\nlet oldBeforeUnmount = options.unmount;\n\nconst RAF_TIMEOUT = 100;\nlet prevRaf;\n\noptions._diff = vnode => {\n\tcurrentComponent = null;\n\tif (oldBeforeDiff) oldBeforeDiff(vnode);\n};\n\noptions._render = vnode => {\n\tif (oldBeforeRender) oldBeforeRender(vnode);\n\n\tcurrentComponent = vnode._component;\n\tcurrentIndex = 0;\n\n\tconst hooks = currentComponent.__hooks;\n\tif (hooks) {\n\t\tif (previousComponent === currentComponent) {\n\t\t\thooks._pendingEffects = [];\n\t\t\tcurrentComponent._renderCallbacks = [];\n\t\t\thooks._list.forEach(hookItem => {\n\t\t\t\tif (hookItem._nextValue) {\n\t\t\t\t\thookItem._value = hookItem._nextValue;\n\t\t\t\t}\n\t\t\t\thookItem._pendingValue = EMPTY;\n\t\t\t\thookItem._nextValue = hookItem._pendingArgs = undefined;\n\t\t\t});\n\t\t} else {\n\t\t\thooks._pendingEffects.forEach(invokeCleanup);\n\t\t\thooks._pendingEffects.forEach(invokeEffect);\n\t\t\thooks._pendingEffects = [];\n\t\t}\n\t}\n\tpreviousComponent = currentComponent;\n};\n\noptions.diffed = vnode => {\n\tif (oldAfterDiff) oldAfterDiff(vnode);\n\n\tconst c = vnode._component;\n\tif (c && c.__hooks) {\n\t\tif (c.__hooks._pendingEffects.length) afterPaint(afterPaintEffects.push(c));\n\t\tc.__hooks._list.forEach(hookItem => {\n\t\t\tif (hookItem._pendingArgs) {\n\t\t\t\thookItem._args = hookItem._pendingArgs;\n\t\t\t}\n\t\t\tif (hookItem._pendingValue !== EMPTY) {\n\t\t\t\thookItem._value = hookItem._pendingValue;\n\t\t\t}\n\t\t\thookItem._pendingArgs = undefined;\n\t\t\thookItem._pendingValue = EMPTY;\n\t\t});\n\t}\n\tpreviousComponent = currentComponent = null;\n};\n\noptions._commit = (vnode, commitQueue) => {\n\tcommitQueue.some(component => {\n\t\ttry {\n\t\t\tcomponent._renderCallbacks.forEach(invokeCleanup);\n\t\t\tcomponent._renderCallbacks = component._renderCallbacks.filter(cb =>\n\t\t\t\tcb._value ? invokeEffect(cb) : true\n\t\t\t);\n\t\t} catch (e) {\n\t\t\tcommitQueue.some(c => {\n\t\t\t\tif (c._renderCallbacks) c._renderCallbacks = [];\n\t\t\t});\n\t\t\tcommitQueue = [];\n\t\t\toptions._catchError(e, component._vnode);\n\t\t}\n\t});\n\n\tif (oldCommit) oldCommit(vnode, commitQueue);\n};\n\noptions.unmount = vnode => {\n\tif (oldBeforeUnmount) oldBeforeUnmount(vnode);\n\n\tconst c = vnode._component;\n\tif (c && c.__hooks) {\n\t\tlet hasErrored;\n\t\tc.__hooks._list.forEach(s => {\n\t\t\ttry {\n\t\t\t\tinvokeCleanup(s);\n\t\t\t} catch (e) {\n\t\t\t\thasErrored = e;\n\t\t\t}\n\t\t});\n\t\tc.__hooks = undefined;\n\t\tif (hasErrored) options._catchError(hasErrored, c._vnode);\n\t}\n};\n\n/**\n * Get a hook's state from the currentComponent\n * @param {number} index The index of the hook to get\n * @param {number} type The index of the hook to get\n * @returns {any}\n */\nfunction getHookState(index, type) {\n\tif (options._hook) {\n\t\toptions._hook(currentComponent, index, currentHook || type);\n\t}\n\tcurrentHook = 0;\n\n\t// Largely inspired by:\n\t// * https://github.com/michael-klein/funcy.js/blob/f6be73468e6ec46b0ff5aa3cc4c9baf72a29025a/src/hooks/core_hooks.mjs\n\t// * https://github.com/michael-klein/funcy.js/blob/650beaa58c43c33a74820a3c98b3c7079cf2e333/src/renderer.mjs\n\t// Other implementations to look at:\n\t// * https://codesandbox.io/s/mnox05qp8\n\tconst hooks =\n\t\tcurrentComponent.__hooks ||\n\t\t(currentComponent.__hooks = {\n\t\t\t_list: [],\n\t\t\t_pendingEffects: []\n\t\t});\n\n\tif (index >= hooks._list.length) {\n\t\thooks._list.push({ _pendingValue: EMPTY });\n\t}\n\treturn hooks._list[index];\n}\n\n/**\n * @param {import('./index').StateUpdater<any>} [initialState]\n */\nexport function useState(initialState) {\n\tcurrentHook = 1;\n\treturn useReducer(invokeOrReturn, initialState);\n}\n\n/**\n * @param {import('./index').Reducer<any, any>} reducer\n * @param {import('./index').StateUpdater<any>} initialState\n * @param {(initialState: any) => void} [init]\n * @returns {[ any, (state: any) => void ]}\n */\nexport function useReducer(reducer, initialState, init) {\n\t/** @type {import('./internal').ReducerHookState} */\n\tconst hookState = getHookState(currentIndex++, 2);\n\thookState._reducer = reducer;\n\tif (!hookState._component) {\n\t\thookState._value = [\n\t\t\t!init ? invokeOrReturn(undefined, initialState) : init(initialState),\n\n\t\t\taction => {\n\t\t\t\tconst currentValue = hookState._nextValue\n\t\t\t\t\t? hookState._nextValue[0]\n\t\t\t\t\t: hookState._value[0];\n\t\t\t\tconst nextValue = hookState._reducer(currentValue, action);\n\n\t\t\t\tif (currentValue !== nextValue) {\n\t\t\t\t\thookState._nextValue = [nextValue, hookState._value[1]];\n\t\t\t\t\thookState._component.setState({});\n\t\t\t\t}\n\t\t\t}\n\t\t];\n\n\t\thookState._component = currentComponent;\n\n\t\tif (!currentComponent._hasScuFromHooks) {\n\t\t\tcurrentComponent._hasScuFromHooks = true;\n\t\t\tconst prevScu = currentComponent.shouldComponentUpdate;\n\n\t\t\t// This SCU has the purpose of bailing out after repeated updates\n\t\t\t// to stateful hooks.\n\t\t\t// we store the next value in _nextValue[0] and keep doing that for all\n\t\t\t// state setters, if we have next states and\n\t\t\t// all next states within a component end up being equal to their original state\n\t\t\t// we are safe to bail out for this specific component.\n\t\t\tcurrentComponent.shouldComponentUpdate = function(p, s, c) {\n\t\t\t\tif (!hookState._component.__hooks) return true;\n\n\t\t\t\tconst stateHooks = hookState._component.__hooks._list.filter(\n\t\t\t\t\tx => x._component\n\t\t\t\t);\n\t\t\t\tconst allHooksEmpty = stateHooks.every(x => !x._nextValue);\n\t\t\t\t// When we have no updated hooks in the component we invoke the previous SCU or\n\t\t\t\t// traverse the VDOM tree further.\n\t\t\t\tif (allHooksEmpty) {\n\t\t\t\t\treturn prevScu ? prevScu.call(this, p, s, c) : true;\n\t\t\t\t}\n\n\t\t\t\t// We check whether we have components with a nextValue set that\n\t\t\t\t// have values that aren't equal to one another this pushes\n\t\t\t\t// us to update further down the tree\n\t\t\t\tlet shouldUpdate = false;\n\t\t\t\tstateHooks.forEach(hookItem => {\n\t\t\t\t\tif (hookItem._nextValue) {\n\t\t\t\t\t\tconst currentValue = hookItem._value[0];\n\t\t\t\t\t\thookItem._value = hookItem._nextValue;\n\t\t\t\t\t\thookItem._nextValue = undefined;\n\t\t\t\t\t\tif (currentValue !== hookItem._value[0]) shouldUpdate = true;\n\t\t\t\t\t}\n\t\t\t\t});\n\n\t\t\t\treturn shouldUpdate || hookState._component.props !== p\n\t\t\t\t\t? prevScu\n\t\t\t\t\t\t? prevScu.call(this, p, s, c)\n\t\t\t\t\t\t: true\n\t\t\t\t\t: false;\n\t\t\t};\n\t\t}\n\t}\n\n\treturn hookState._nextValue || hookState._value;\n}\n\n/**\n * @param {import('./internal').Effect} callback\n * @param {any[]} args\n */\nexport function useEffect(callback, args) {\n\t/** @type {import('./internal').EffectHookState} */\n\tconst state = getHookState(currentIndex++, 3);\n\tif (!options._skipEffects && argsChanged(state._args, args)) {\n\t\tstate._value = callback;\n\t\tstate._pendingArgs = args;\n\n\t\tcurrentComponent.__hooks._pendingEffects.push(state);\n\t}\n}\n\n/**\n * @param {import('./internal').Effect} callback\n * @param {any[]} args\n */\nexport function useLayoutEffect(callback, args) {\n\t/** @type {import('./internal').EffectHookState} */\n\tconst state = getHookState(currentIndex++, 4);\n\tif (!options._skipEffects && argsChanged(state._args, args)) {\n\t\tstate._value = callback;\n\t\tstate._pendingArgs = args;\n\n\t\tcurrentComponent._renderCallbacks.push(state);\n\t}\n}\n\nexport function useRef(initialValue) {\n\tcurrentHook = 5;\n\treturn useMemo(() => ({ current: initialValue }), []);\n}\n\n/**\n * @param {object} ref\n * @param {() => object} createHandle\n * @param {any[]} args\n */\nexport function useImperativeHandle(ref, createHandle, args) {\n\tcurrentHook = 6;\n\tuseLayoutEffect(\n\t\t() => {\n\t\t\tif (typeof ref == 'function') {\n\t\t\t\tref(createHandle());\n\t\t\t\treturn () => ref(null);\n\t\t\t} else if (ref) {\n\t\t\t\tref.current = createHandle();\n\t\t\t\treturn () => (ref.current = null);\n\t\t\t}\n\t\t},\n\t\targs == null ? args : args.concat(ref)\n\t);\n}\n\n/**\n * @param {() => any} factory\n * @param {any[]} args\n */\nexport function useMemo(factory, args) {\n\t/** @type {import('./internal').MemoHookState} */\n\tconst state = getHookState(currentIndex++, 7);\n\tif (argsChanged(state._args, args)) {\n\t\tstate._pendingValue = factory();\n\t\tstate._pendingArgs = args;\n\t\tstate._factory = factory;\n\t\treturn state._pendingValue;\n\t}\n\n\treturn state._value;\n}\n\n/**\n * @param {() => void} callback\n * @param {any[]} args\n */\nexport function useCallback(callback, args) {\n\tcurrentHook = 8;\n\treturn useMemo(() => callback, args);\n}\n\n/**\n * @param {import('./internal').PreactContext} context\n */\nexport function useContext(context) {\n\tconst provider = currentComponent.context[context._id];\n\t// We could skip this call here, but than we'd not call\n\t// `options._hook`. We need to do that in order to make\n\t// the devtools aware of this hook.\n\t/** @type {import('./internal').ContextHookState} */\n\tconst state = getHookState(currentIndex++, 9);\n\t// The devtools needs access to the context object to\n\t// be able to pull of the default value when no provider\n\t// is present in the tree.\n\tstate._context = context;\n\tif (!provider) return context._defaultValue;\n\t// This is probably not safe to convert to \"!\"\n\tif (state._value == null) {\n\t\tstate._value = true;\n\t\tprovider.sub(currentComponent);\n\t}\n\treturn provider.props.value;\n}\n\n/**\n * Display a custom label for a custom hook for the devtools panel\n * @type {<T>(value: T, cb?: (value: T) => string | number) => void}\n */\nexport function useDebugValue(value, formatter) {\n\tif (options.useDebugValue) {\n\t\toptions.useDebugValue(formatter ? formatter(value) : value);\n\t}\n}\n\n/**\n * @param {(error: any, errorInfo: import('preact').ErrorInfo) => void} cb\n */\nexport function useErrorBoundary(cb) {\n\t/** @type {import('./internal').ErrorBoundaryHookState} */\n\tconst state = getHookState(currentIndex++, 10);\n\tconst errState = useState();\n\tstate._value = cb;\n\tif (!currentComponent.componentDidCatch) {\n\t\tcurrentComponent.componentDidCatch = (err, errorInfo) => {\n\t\t\tif (state._value) state._value(err, errorInfo);\n\t\t\terrState[1](err);\n\t\t};\n\t}\n\treturn [\n\t\terrState[0],\n\t\t() => {\n\t\t\terrState[1](undefined);\n\t\t}\n\t];\n}\n\nexport function useId() {\n\tconst state = getHookState(currentIndex++, 11);\n\tif (!state._value) {\n\t\t// Grab either the root node or the nearest async boundary node.\n\t\t/** @type {import('./internal.d').VNode} */\n\t\tlet root = currentComponent._vnode;\n\t\twhile (root !== null && !root._mask && root._parent !== null) {\n\t\t\troot = root._parent;\n\t\t}\n\n\t\tlet mask = root._mask || (root._mask = [0, 0]);\n\t\tstate._value = 'P' + mask[0] + '-' + mask[1]++;\n\t}\n\n\treturn state._value;\n}\n/**\n * After paint effects consumer.\n */\nfunction flushAfterPaintEffects() {\n\tlet component;\n\twhile ((component = afterPaintEffects.shift())) {\n\t\tif (!component._parentDom || !component.__hooks) continue;\n\t\ttry {\n\t\t\tcomponent.__hooks._pendingEffects.forEach(invokeCleanup);\n\t\t\tcomponent.__hooks._pendingEffects.forEach(invokeEffect);\n\t\t\tcomponent.__hooks._pendingEffects = [];\n\t\t} catch (e) {\n\t\t\tcomponent.__hooks._pendingEffects = [];\n\t\t\toptions._catchError(e, component._vnode);\n\t\t}\n\t}\n}\n\nlet HAS_RAF = typeof requestAnimationFrame == 'function';\n\n/**\n * Schedule a callback to be invoked after the browser has a chance to paint a new frame.\n * Do this by combining requestAnimationFrame (rAF) + setTimeout to invoke a callback after\n * the next browser frame.\n *\n * Also, schedule a timeout in parallel to the the rAF to ensure the callback is invoked\n * even if RAF doesn't fire (for example if the browser tab is not visible)\n *\n * @param {() => void} callback\n */\nfunction afterNextFrame(callback) {\n\tconst done = () => {\n\t\tclearTimeout(timeout);\n\t\tif (HAS_RAF) cancelAnimationFrame(raf);\n\t\tsetTimeout(callback);\n\t};\n\tconst timeout = setTimeout(done, RAF_TIMEOUT);\n\n\tlet raf;\n\tif (HAS_RAF) {\n\t\traf = requestAnimationFrame(done);\n\t}\n}\n\n// Note: if someone used options.debounceRendering = requestAnimationFrame,\n// then effects will ALWAYS run on the NEXT frame instead of the current one, incurring a ~16ms delay.\n// Perhaps this is not such a big deal.\n/**\n * Schedule afterPaintEffects flush after the browser paints\n * @param {number} newQueueLength\n */\nfunction afterPaint(newQueueLength) {\n\tif (newQueueLength === 1 || prevRaf !== options.requestAnimationFrame) {\n\t\tprevRaf = options.requestAnimationFrame;\n\t\t(prevRaf || afterNextFrame)(flushAfterPaintEffects);\n\t}\n}\n\n/**\n * @param {import('./internal').EffectHookState} hook\n */\nfunction invokeCleanup(hook) {\n\t// A hook cleanup can introduce a call to render which creates a new root, this will call options.vnode\n\t// and move the currentComponent away.\n\tconst comp = currentComponent;\n\tlet cleanup = hook._cleanup;\n\tif (typeof cleanup == 'function') {\n\t\thook._cleanup = undefined;\n\t\tcleanup();\n\t}\n\n\tcurrentComponent = comp;\n}\n\n/**\n * Invoke a Hook's effect\n * @param {import('./internal').EffectHookState} hook\n */\nfunction invokeEffect(hook) {\n\t// A hook call can introduce a call to render which creates a new root, this will call options.vnode\n\t// and move the currentComponent away.\n\tconst comp = currentComponent;\n\thook._cleanup = hook._value();\n\tcurrentComponent = comp;\n}\n\n/**\n * @param {any[]} oldArgs\n * @param {any[]} newArgs\n */\nfunction argsChanged(oldArgs, newArgs) {\n\treturn (\n\t\t!oldArgs ||\n\t\toldArgs.length !== newArgs.length ||\n\t\tnewArgs.some((arg, index) => arg !== oldArgs[index])\n\t);\n}\n\nfunction invokeOrReturn(arg, f) {\n\treturn typeof f == 'function' ? f(arg) : f;\n}\n","/**\n * Assign properties from `props` to `obj`\n * @template O, P The obj and props types\n * @param {O} obj The object to copy properties to\n * @param {P} props The object to copy properties from\n * @returns {O & P}\n */\nexport function assign(obj, props) {\n\tfor (let i in props) obj[i] = props[i];\n\treturn /** @type {O & P} */ (obj);\n}\n\n/**\n * Check if two objects have a different shape\n * @param {object} a\n * @param {object} b\n * @returns {boolean}\n */\nexport function shallowDiffers(a, b) {\n\tfor (let i in a) if (i !== '__source' && !(i in b)) return true;\n\tfor (let i in b) if (i !== '__source' && a[i] !== b[i]) return true;\n\treturn false;\n}\n\nexport function removeNode(node) {\n\tlet parentNode = node.parentNode;\n\tif (parentNode) parentNode.removeChild(node);\n}\n\n/**\n * Check if two values are the same value\n * @param {*} x\n * @param {*} y\n * @returns {boolean}\n */\nexport function is(x, y) {\n\treturn (x === y && (x !== 0 || 1 / x === 1 / y)) || (x !== x && y !== y);\n}\n","import { Component } from 'preact';\nimport { shallowDiffers } from './util';\n\n/**\n * Component class with a predefined `shouldComponentUpdate` implementation\n */\nexport function PureComponent(p) {\n\tthis.props = p;\n}\nPureComponent.prototype = new Component();\n// Some third-party libraries check if this property is present\nPureComponent.prototype.isPureReactComponent = true;\nPureComponent.prototype.shouldComponentUpdate = function(props, state) {\n\treturn shallowDiffers(this.props, props) || shallowDiffers(this.state, state);\n};\n","import { options } from 'preact';\nimport { assign } from './util';\n\nlet oldDiffHook = options._diff;\noptions._diff = vnode => {\n\tif (vnode.type && vnode.type._forwarded && vnode.ref) {\n\t\tvnode.props.ref = vnode.ref;\n\t\tvnode.ref = null;\n\t}\n\tif (oldDiffHook) oldDiffHook(vnode);\n};\n\nexport const REACT_FORWARD_SYMBOL =\n\t(typeof Symbol != 'undefined' &&\n\t\tSymbol.for &&\n\t\tSymbol.for('react.forward_ref')) ||\n\t0xf47;\n\n/**\n * Pass ref down to a child. This is mainly used in libraries with HOCs that\n * wrap components. Using `forwardRef` there is an easy way to get a reference\n * of the wrapped component instead of one of the wrapper itself.\n * @param {import('./index').ForwardFn} fn\n * @returns {import('./internal').FunctionComponent}\n */\nexport function forwardRef(fn) {\n\tfunction Forwarded(props) {\n\t\tlet clone = assign({}, props);\n\t\tdelete clone.ref;\n\t\treturn fn(clone, props.ref || null);\n\t}\n\n\t// mobx-react checks for this being present\n\tForwarded.$$typeof = REACT_FORWARD_SYMBOL;\n\t// mobx-react heavily relies on implementation details.\n\t// It expects an object here with a `render` property,\n\t// and prototype.render will fail. Without this\n\t// mobx-react throws.\n\tForwarded.render = Forwarded;\n\n\tForwarded.prototype.isReactComponent = Forwarded._forwarded = true;\n\tForwarded.displayName = 'ForwardRef(' + (fn.displayName || fn.name) + ')';\n\treturn Forwarded;\n}\n","import { toChildArray } from 'preact';\n\nconst mapFn = (children, fn) => {\n\tif (children == null) return null;\n\treturn toChildArray(toChildArray(children).map(fn));\n};\n\n// This API is completely unnecessary for Preact, so it's basically passthrough.\nexport const Children = {\n\tmap: mapFn,\n\tforEach: mapFn,\n\tcount(children) {\n\t\treturn children ? toChildArray(children).length : 0;\n\t},\n\tonly(children) {\n\t\tconst normalized = toChildArray(children);\n\t\tif (normalized.length !== 1) throw 'Children.only';\n\t\treturn normalized[0];\n\t},\n\ttoArray: toChildArray\n};\n","import { Component, createElement, options, Fragment } from 'preact';\nimport { assign } from './util';\n\nconst oldCatchError = options._catchError;\noptions._catchError = function(error, newVNode, oldVNode, errorInfo) {\n\tif (error.then) {\n\t\t/** @type {import('./internal').Component} */\n\t\tlet component;\n\t\tlet vnode = newVNode;\n\n\t\tfor (; (vnode = vnode._parent); ) {\n\t\t\tif ((component = vnode._component) && component._childDidSuspend) {\n\t\t\t\tif (newVNode._dom == null) {\n\t\t\t\t\tnewVNode._dom = oldVNode._dom;\n\t\t\t\t\tnewVNode._children = oldVNode._children;\n\t\t\t\t}\n\t\t\t\t// Don't call oldCatchError if we found a Suspense\n\t\t\t\treturn component._childDidSuspend(error, newVNode);\n\t\t\t}\n\t\t}\n\t}\n\toldCatchError(error, newVNode, oldVNode, errorInfo);\n};\n\nconst oldUnmount = options.unmount;\noptions.unmount = function(vnode) {\n\t/** @type {import('./internal').Component} */\n\tconst component = vnode._component;\n\tif (component && component._onResolve) {\n\t\tcomponent._onResolve();\n\t}\n\n\t// if the component is still hydrating\n\t// most likely it is because the component is suspended\n\t// we set the vnode.type as `null` so that it is not a typeof function\n\t// so the unmount will remove the vnode._dom\n\tif (component && vnode._hydrating === true) {\n\t\tvnode.type = null;\n\t}\n\n\tif (oldUnmount) oldUnmount(vnode);\n};\n\nfunction detachedClone(vnode, detachedParent, parentDom) {\n\tif (vnode) {\n\t\tif (vnode._component && vnode._component.__hooks) {\n\t\t\tvnode._component.__hooks._list.forEach(effect => {\n\t\t\t\tif (typeof effect._cleanup == 'function') effect._cleanup();\n\t\t\t});\n\n\t\t\tvnode._component.__hooks = null;\n\t\t}\n\n\t\tvnode = assign({}, vnode);\n\t\tif (vnode._component != null) {\n\t\t\tif (vnode._component._parentDom === parentDom) {\n\t\t\t\tvnode._component._parentDom = detachedParent;\n\t\t\t}\n\t\t\tvnode._component = null;\n\t\t}\n\n\t\tvnode._children =\n\t\t\tvnode._children &&\n\t\t\tvnode._children.map(child =>\n\t\t\t\tdetachedClone(child, detachedParent, parentDom)\n\t\t\t);\n\t}\n\n\treturn vnode;\n}\n\nfunction removeOriginal(vnode, detachedParent, originalParent) {\n\tif (vnode) {\n\t\tvnode._original = null;\n\t\tvnode._children =\n\t\t\tvnode._children &&\n\t\t\tvnode._children.map(child =>\n\t\t\t\tremoveOriginal(child, detachedParent, originalParent)\n\t\t\t);\n\n\t\tif (vnode._component) {\n\t\t\tif (vnode._component._parentDom === detachedParent) {\n\t\t\t\tif (vnode._dom) {\n\t\t\t\t\toriginalParent.insertBefore(vnode._dom, vnode._nextDom);\n\t\t\t\t}\n\t\t\t\tvnode._component._force = true;\n\t\t\t\tvnode._component._parentDom = originalParent;\n\t\t\t}\n\t\t}\n\t}\n\n\treturn vnode;\n}\n\n// having custom inheritance instead of a class here saves a lot of bytes\nexport function Suspense() {\n\t// we do not call super here to golf some bytes...\n\tthis._pendingSuspensionCount = 0;\n\tthis._suspenders = null;\n\tthis._detachOnNextRender = null;\n}\n\n// Things we do here to save some bytes but are not proper JS inheritance:\n// - call `new Component()` as the prototype\n// - do not set `Suspense.prototype.constructor` to `Suspense`\nSuspense.prototype = new Component();\n\n/**\n * @this {import('./internal').SuspenseComponent}\n * @param {Promise} promise The thrown promise\n * @param {import('./internal').VNode<any, any>} suspendingVNode The suspending component\n */\nSuspense.prototype._childDidSuspend = function(promise, suspendingVNode) {\n\tconst suspendingComponent = suspendingVNode._component;\n\n\t/** @type {import('./internal').SuspenseComponent} */\n\tconst c = this;\n\n\tif (c._suspenders == null) {\n\t\tc._suspenders = [];\n\t}\n\tc._suspenders.push(suspendingComponent);\n\n\tconst resolve = suspended(c._vnode);\n\n\tlet resolved = false;\n\tconst onResolved = () => {\n\t\tif (resolved) return;\n\n\t\tresolved = true;\n\t\tsuspendingComponent._onResolve = null;\n\n\t\tif (resolve) {\n\t\t\tresolve(onSuspensionComplete);\n\t\t} else {\n\t\t\tonSuspensionComplete();\n\t\t}\n\t};\n\n\tsuspendingComponent._onResolve = onResolved;\n\n\tconst onSuspensionComplete = () => {\n\t\tif (!--c._pendingSuspensionCount) {\n\t\t\t// If the suspension was during hydration we don't need to restore the\n\t\t\t// suspended children into the _children array\n\t\t\tif (c.state._suspended) {\n\t\t\t\tconst suspendedVNode = c.state._suspended;\n\t\t\t\tc._vnode._children[0] = removeOriginal(\n\t\t\t\t\tsuspendedVNode,\n\t\t\t\t\tsuspendedVNode._component._parentDom,\n\t\t\t\t\tsuspendedVNode._component._originalParentDom\n\t\t\t\t);\n\t\t\t}\n\n\t\t\tc.setState({ _suspended: (c._detachOnNextRender = null) });\n\n\t\t\tlet suspended;\n\t\t\twhile ((suspended = c._suspenders.pop())) {\n\t\t\t\tsuspended.forceUpdate();\n\t\t\t}\n\t\t}\n\t};\n\n\t/**\n\t * We do not set `suspended: true` during hydration because we want the actual markup\n\t * to remain on screen and hydrate it when the suspense actually gets resolved.\n\t * While in non-hydration cases the usual fallback -> component flow would occour.\n\t */\n\tconst wasHydrating = suspendingVNode._hydrating === true;\n\tif (!c._pendingSuspensionCount++ && !wasHydrating) {\n\t\tc.setState({ _suspended: (c._detachOnNextRender = c._vnode._children[0]) });\n\t}\n\tpromise.then(onResolved, onResolved);\n};\n\nSuspense.prototype.componentWillUnmount = function() {\n\tthis._suspenders = [];\n};\n\n/**\n * @this {import('./internal').SuspenseComponent}\n * @param {import('./internal').SuspenseComponent[\"props\"]} props\n * @param {import('./internal').SuspenseState} state\n */\nSuspense.prototype.render = function(props, state) {\n\tif (this._detachOnNextRender) {\n\t\t// When the Suspense's _vnode was created by a call to createVNode\n\t\t// (i.e. due to a setState further up in the tree)\n\t\t// it's _children prop is null, in this case we \"forget\" about the parked vnodes to detach\n\t\tif (this._vnode._children) {\n\t\t\tconst detachedParent = document.createElement('div');\n\t\t\tconst detachedComponent = this._vnode._children[0]._component;\n\t\t\tthis._vnode._children[0] = detachedClone(\n\t\t\t\tthis._detachOnNextRender,\n\t\t\t\tdetachedParent,\n\t\t\t\t(detachedComponent._originalParentDom = detachedComponent._parentDom)\n\t\t\t);\n\t\t}\n\n\t\tthis._detachOnNextRender = null;\n\t}\n\n\t// Wrap fallback tree in a VNode that prevents itself from being marked as aborting mid-hydration:\n\t/** @type {import('./internal').VNode} */\n\tconst fallback =\n\t\tstate._suspended && createElement(Fragment, null, props.fallback);\n\tif (fallback) fallback._hydrating = null;\n\n\treturn [\n\t\tcreateElement(Fragment, null, state._suspended ? null : props.children),\n\t\tfallback\n\t];\n};\n\n/**\n * Checks and calls the parent component's _suspended method, passing in the\n * suspended vnode. This is a way for a parent (e.g. SuspenseList) to get notified\n * that one of its children/descendants suspended.\n *\n * The parent MAY return a callback. The callback will get called when the\n * suspension resolves, notifying the parent of the fact.\n * Moreover, the callback gets function `unsuspend` as a parameter. The resolved\n * child descendant will not actually get unsuspended until `unsuspend` gets called.\n * This is a way for the parent to delay unsuspending.\n *\n * If the parent does not return a callback then the resolved vnode\n * gets unsuspended immediately when it resolves.\n *\n * @param {import('./internal').VNode} vnode\n * @returns {((unsuspend: () => void) => void)?}\n */\nexport function suspended(vnode) {\n\t/** @type {import('./internal').Component} */\n\tlet component = vnode._parent._component;\n\treturn component && component._suspended && component._suspended(vnode);\n}\n\nexport function lazy(loader) {\n\tlet prom;\n\tlet component;\n\tlet error;\n\n\tfunction Lazy(props) {\n\t\tif (!prom) {\n\t\t\tprom = loader();\n\t\t\tprom.then(\n\t\t\t\texports => {\n\t\t\t\t\tcomponent = exports.default || exports;\n\t\t\t\t},\n\t\t\t\te => {\n\t\t\t\t\terror = e;\n\t\t\t\t}\n\t\t\t);\n\t\t}\n\n\t\tif (error) {\n\t\t\tthrow error;\n\t\t}\n\n\t\tif (!component) {\n\t\t\tthrow prom;\n\t\t}\n\n\t\treturn createElement(component, props);\n\t}\n\n\tLazy.displayName = 'Lazy';\n\tLazy._forwarded = true;\n\treturn Lazy;\n}\n","import { Component, toChildArray } from 'preact';\nimport { suspended } from './suspense.js';\n\n// Indexes to linked list nodes (nodes are stored as arrays to save bytes).\nconst SUSPENDED_COUNT = 0;\nconst RESOLVED_COUNT = 1;\nconst NEXT_NODE = 2;\n\n// Having custom inheritance instead of a class here saves a lot of bytes.\nexport function SuspenseList() {\n\tthis._next = null;\n\tthis._map = null;\n}\n\n// Mark one of child's earlier suspensions as resolved.\n// Some pending callbacks may become callable due to this\n// (e.g. the last suspended descendant gets resolved when\n// revealOrder === 'together'). Process those callbacks as well.\nconst resolve = (list, child, node) => {\n\tif (++node[RESOLVED_COUNT] === node[SUSPENDED_COUNT]) {\n\t\t// The number a child (or any of its descendants) has been suspended\n\t\t// matches the number of times it's been resolved. Therefore we\n\t\t// mark the child as completely resolved by deleting it from ._map.\n\t\t// This is used to figure out when *all* children have been completely\n\t\t// resolved when revealOrder is 'together'.\n\t\tlist._map.delete(child);\n\t}\n\n\t// If revealOrder is falsy then we can do an early exit, as the\n\t// callbacks won't get queued in the node anyway.\n\t// If revealOrder is 'together' then also do an early exit\n\t// if all suspended descendants have not yet been resolved.\n\tif (\n\t\t!list.props.revealOrder ||\n\t\t(list.props.revealOrder[0] === 't' && list._map.size)\n\t) {\n\t\treturn;\n\t}\n\n\t// Walk the currently suspended children in order, calling their\n\t// stored callbacks on the way. Stop if we encounter a child that\n\t// has not been completely resolved yet.\n\tnode = list._next;\n\twhile (node) {\n\t\twhile (node.length > 3) {\n\t\t\tnode.pop()();\n\t\t}\n\t\tif (node[RESOLVED_COUNT] < node[SUSPENDED_COUNT]) {\n\t\t\tbreak;\n\t\t}\n\t\tlist._next = node = node[NEXT_NODE];\n\t}\n};\n\n// Things we do here to save some bytes but are not proper JS inheritance:\n// - call `new Component()` as the prototype\n// - do not set `Suspense.prototype.constructor` to `Suspense`\nSuspenseList.prototype = new Component();\n\nSuspenseList.prototype._suspended = function(child) {\n\tconst list = this;\n\tconst delegated = suspended(list._vnode);\n\n\tlet node = list._map.get(child);\n\tnode[SUSPENDED_COUNT]++;\n\n\treturn unsuspend => {\n\t\tconst wrappedUnsuspend = () => {\n\t\t\tif (!list.props.revealOrder) {\n\t\t\t\t// Special case the undefined (falsy) revealOrder, as there\n\t\t\t\t// is no need to coordinate a specific order or unsuspends.\n\t\t\t\tunsuspend();\n\t\t\t} else {\n\t\t\t\tnode.push(unsuspend);\n\t\t\t\tresolve(list, child, node);\n\t\t\t}\n\t\t};\n\t\tif (delegated) {\n\t\t\tdelegated(wrappedUnsuspend);\n\t\t} else {\n\t\t\twrappedUnsuspend();\n\t\t}\n\t};\n};\n\nSuspenseList.prototype.render = function(props) {\n\tthis._next = null;\n\tthis._map = new Map();\n\n\tconst children = toChildArray(props.children);\n\tif (props.revealOrder && props.revealOrder[0] === 'b') {\n\t\t// If order === 'backwards' (or, well, anything starting with a 'b')\n\t\t// then flip the child list around so that the last child will be\n\t\t// the first in the linked list.\n\t\tchildren.reverse();\n\t}\n\t// Build the linked list. Iterate through the children in reverse order\n\t// so that `_next` points to the first linked list node to be resolved.\n\tfor (let i = children.length; i--; ) {\n\t\t// Create a new linked list node as an array of form:\n\t\t// \t[suspended_count, resolved_count, next_node]\n\t\t// where suspended_count and resolved_count are numeric counters for\n\t\t// keeping track how many times a node has been suspended and resolved.\n\t\t//\n\t\t// Note that suspended_count starts from 1 instead of 0, so we can block\n\t\t// processing callbacks until componentDidMount has been called. In a sense\n\t\t// node is suspended at least until componentDidMount gets called!\n\t\t//\n\t\t// Pending callbacks are added to the end of the node:\n\t\t// \t[suspended_count, resolved_count, next_node, callback_0, callback_1, ...]\n\t\tthis._map.set(children[i], (this._next = [1, 0, this._next]));\n\t}\n\treturn props.children;\n};\n\nSuspenseList.prototype.componentDidUpdate = SuspenseList.prototype.componentDidMount = function() {\n\t// Iterate through all children after mounting for two reasons:\n\t// 1. As each node[SUSPENDED_COUNT] starts from 1, this iteration increases\n\t//    each node[RELEASED_COUNT] by 1, therefore balancing the counters.\n\t//    The nodes can now be completely consumed from the linked list.\n\t// 2. Handle nodes that might have gotten resolved between render and\n\t//    componentDidMount.\n\tthis._map.forEach((node, child) => {\n\t\tresolve(this, child, node);\n\t});\n};\n","import { createElement, render } from 'preact';\n\n/**\n * @param {import('../../src/index').RenderableProps<{ context: any }>} props\n */\nfunction ContextProvider(props) {\n\tthis.getChildContext = () => props.context;\n\treturn props.children;\n}\n\n/**\n * Portal component\n * @this {import('./internal').Component}\n * @param {object | null | undefined} props\n *\n * TODO: use createRoot() instead of fake root\n */\nfunction Portal(props) {\n\tconst _this = this;\n\tlet container = props._container;\n\n\t_this.componentWillUnmount = function() {\n\t\trender(null, _this._temp);\n\t\t_this._temp = null;\n\t\t_this._container = null;\n\t};\n\n\t// When we change container we should clear our old container and\n\t// indicate a new mount.\n\tif (_this._container && _this._container !== container) {\n\t\t_this.componentWillUnmount();\n\t}\n\n\t// When props.vnode is undefined/false/null we are dealing with some kind of\n\t// conditional vnode. This should not trigger a render.\n\tif (props._vnode) {\n\t\tif (!_this._temp) {\n\t\t\t_this._container = container;\n\n\t\t\t// Create a fake DOM parent node that manages a subset of `container`'s children:\n\t\t\t_this._temp = {\n\t\t\t\tnodeType: 1,\n\t\t\t\tparentNode: container,\n\t\t\t\tchildNodes: [],\n\t\t\t\tappendChild(child) {\n\t\t\t\t\tthis.childNodes.push(child);\n\t\t\t\t\t_this._container.appendChild(child);\n\t\t\t\t},\n\t\t\t\tinsertBefore(child, before) {\n\t\t\t\t\tthis.childNodes.push(child);\n\t\t\t\t\t_this._container.appendChild(child);\n\t\t\t\t},\n\t\t\t\tremoveChild(child) {\n\t\t\t\t\tthis.childNodes.splice(this.childNodes.indexOf(child) >>> 1, 1);\n\t\t\t\t\t_this._container.removeChild(child);\n\t\t\t\t}\n\t\t\t};\n\t\t}\n\n\t\t// Render our wrapping element into temp.\n\t\trender(\n\t\t\tcreateElement(ContextProvider, { context: _this.context }, props._vnode),\n\t\t\t_this._temp\n\t\t);\n\t}\n\t// When we come from a conditional render, on a mounted\n\t// portal we should clear the DOM.\n\telse if (_this._temp) {\n\t\t_this.componentWillUnmount();\n\t}\n}\n\n/**\n * Create a `Portal` to continue rendering the vnode tree at a different DOM node\n * @param {import('./internal').VNode} vnode The vnode to render\n * @param {import('./internal').PreactElement} container The DOM node to continue rendering in to.\n */\nexport function createPortal(vnode, container) {\n\tconst el = createElement(Portal, { _vnode: vnode, _container: container });\n\tel.containerInfo = container;\n\treturn el;\n}\n","import {\n\trender as preactRender,\n\thydrate as preactHydrate,\n\toptions,\n\ttoChildArray,\n\tComponent\n} from 'preact';\n\nexport const REACT_ELEMENT_TYPE =\n\t(typeof Symbol != 'undefined' && Symbol.for && Symbol.for('react.element')) ||\n\t0xeac7;\n\nconst CAMEL_PROPS = /^(?:accent|alignment|arabic|baseline|cap|clip(?!PathU)|color|dominant|fill|flood|font|glyph(?!R)|horiz|image|letter|lighting|marker(?!H|W|U)|overline|paint|pointer|shape|stop|strikethrough|stroke|text(?!L)|transform|underline|unicode|units|v|vector|vert|word|writing|x(?!C))[A-Z]/;\n\nconst IS_DOM = typeof document !== 'undefined';\n\n// Input types for which onchange should not be converted to oninput.\n// type=\"file|checkbox|radio\", plus \"range\" in IE11.\n// (IE11 doesn't support Symbol, which we use here to turn `rad` into `ra` which matches \"range\")\nconst onChangeInputType = type =>\n\t(typeof Symbol != 'undefined' && typeof Symbol() == 'symbol'\n\t\t? /fil|che|rad/i\n\t\t: /fil|che|ra/i\n\t).test(type);\n\n// Some libraries like `react-virtualized` explicitly check for this.\nComponent.prototype.isReactComponent = {};\n\n// `UNSAFE_*` lifecycle hooks\n// Preact only ever invokes the unprefixed methods.\n// Here we provide a base \"fallback\" implementation that calls any defined UNSAFE_ prefixed method.\n// - If a component defines its own `componentDidMount()` (including via defineProperty), use that.\n// - If a component defines `UNSAFE_componentDidMount()`, `componentDidMount` is the alias getter/setter.\n// - If anything assigns to an `UNSAFE_*` property, the assignment is forwarded to the unprefixed property.\n// See https://github.com/preactjs/preact/issues/1941\n[\n\t'componentWillMount',\n\t'componentWillReceiveProps',\n\t'componentWillUpdate'\n].forEach(key => {\n\tObject.defineProperty(Component.prototype, key, {\n\t\tconfigurable: true,\n\t\tget() {\n\t\t\treturn this['UNSAFE_' + key];\n\t\t},\n\t\tset(v) {\n\t\t\tObject.defineProperty(this, key, {\n\t\t\t\tconfigurable: true,\n\t\t\t\twritable: true,\n\t\t\t\tvalue: v\n\t\t\t});\n\t\t}\n\t});\n});\n\n/**\n * Proxy render() since React returns a Component reference.\n * @param {import('./internal').VNode} vnode VNode tree to render\n * @param {import('./internal').PreactElement} parent DOM node to render vnode tree into\n * @param {() => void} [callback] Optional callback that will be called after rendering\n * @returns {import('./internal').Component | null} The root component reference or null\n */\nexport function render(vnode, parent, callback) {\n\t// React destroys any existing DOM nodes, see #1727\n\t// ...but only on the first render, see #1828\n\tif (parent._children == null) {\n\t\tparent.textContent = '';\n\t}\n\n\tpreactRender(vnode, parent);\n\tif (typeof callback == 'function') callback();\n\n\treturn vnode ? vnode._component : null;\n}\n\nexport function hydrate(vnode, parent, callback) {\n\tpreactHydrate(vnode, parent);\n\tif (typeof callback == 'function') callback();\n\n\treturn vnode ? vnode._component : null;\n}\n\nlet oldEventHook = options.event;\noptions.event = e => {\n\tif (oldEventHook) e = oldEventHook(e);\n\te.persist = empty;\n\te.isPropagationStopped = isPropagationStopped;\n\te.isDefaultPrevented = isDefaultPrevented;\n\treturn (e.nativeEvent = e);\n};\n\nfunction empty() {}\n\nfunction isPropagationStopped() {\n\treturn this.cancelBubble;\n}\n\nfunction isDefaultPrevented() {\n\treturn this.defaultPrevented;\n}\n\nlet classNameDescriptor = {\n\tconfigurable: true,\n\tget() {\n\t\treturn this.class;\n\t}\n};\n\nlet oldVNodeHook = options.vnode;\noptions.vnode = vnode => {\n\tlet type = vnode.type;\n\tlet props = vnode.props;\n\tlet normalizedProps = props;\n\n\t// only normalize props on Element nodes\n\tif (typeof type === 'string') {\n\t\tconst nonCustomElement = type.indexOf('-') === -1;\n\t\tnormalizedProps = {};\n\n\t\tfor (let i in props) {\n\t\t\tlet value = props[i];\n\n\t\t\tif (IS_DOM && i === 'children' && type === 'noscript') {\n\t\t\t\t// Emulate React's behavior of not rendering the contents of noscript tags on the client.\n\t\t\t\tcontinue;\n\t\t\t} else if (i === 'value' && 'defaultValue' in props && value == null) {\n\t\t\t\t// Skip applying value if it is null/undefined and we already set\n\t\t\t\t// a default value\n\t\t\t\tcontinue;\n\t\t\t} else if (\n\t\t\t\ti === 'defaultValue' &&\n\t\t\t\t'value' in props &&\n\t\t\t\tprops.value == null\n\t\t\t) {\n\t\t\t\t// `defaultValue` is treated as a fallback `value` when a value prop is present but null/undefined.\n\t\t\t\t// `defaultValue` for Elements with no value prop is the same as the DOM defaultValue property.\n\t\t\t\ti = 'value';\n\t\t\t} else if (i === 'download' && value === true) {\n\t\t\t\t// Calling `setAttribute` with a truthy value will lead to it being\n\t\t\t\t// passed as a stringified value, e.g. `download=\"true\"`. React\n\t\t\t\t// converts it to an empty string instead, otherwise the attribute\n\t\t\t\t// value will be used as the file name and the file will be called\n\t\t\t\t// \"true\" upon downloading it.\n\t\t\t\tvalue = '';\n\t\t\t} else if (/ondoubleclick/i.test(i)) {\n\t\t\t\ti = 'ondblclick';\n\t\t\t} else if (\n\t\t\t\t/^onchange(textarea|input)/i.test(i + type) &&\n\t\t\t\t!onChangeInputType(props.type)\n\t\t\t) {\n\t\t\t\ti = 'oninput';\n\t\t\t} else if (/^onfocus$/i.test(i)) {\n\t\t\t\ti = 'onfocusin';\n\t\t\t} else if (/^onblur$/i.test(i)) {\n\t\t\t\ti = 'onfocusout';\n\t\t\t} else if (/^on(Ani|Tra|Tou|BeforeInp|Compo)/.test(i)) {\n\t\t\t\ti = i.toLowerCase();\n\t\t\t} else if (nonCustomElement && CAMEL_PROPS.test(i)) {\n\t\t\t\ti = i.replace(/[A-Z0-9]/g, '-$&').toLowerCase();\n\t\t\t} else if (value === null) {\n\t\t\t\tvalue = undefined;\n\t\t\t}\n\n\t\t\t// Add support for onInput and onChange, see #3561\n\t\t\t// if we have an oninput prop already change it to oninputCapture\n\t\t\tif (/^oninput$/i.test(i)) {\n\t\t\t\ti = i.toLowerCase();\n\t\t\t\tif (normalizedProps[i]) {\n\t\t\t\t\ti = 'oninputCapture';\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tnormalizedProps[i] = value;\n\t\t}\n\n\t\t// Add support for array select values: <select multiple value={[]} />\n\t\tif (\n\t\t\ttype == 'select' &&\n\t\t\tnormalizedProps.multiple &&\n\t\t\tArray.isArray(normalizedProps.value)\n\t\t) {\n\t\t\t// forEach() always returns undefined, which we abuse here to unset the value prop.\n\t\t\tnormalizedProps.value = toChildArray(props.children).forEach(child => {\n\t\t\t\tchild.props.selected =\n\t\t\t\t\tnormalizedProps.value.indexOf(child.props.value) != -1;\n\t\t\t});\n\t\t}\n\n\t\t// Adding support for defaultValue in select tag\n\t\tif (type == 'select' && normalizedProps.defaultValue != null) {\n\t\t\tnormalizedProps.value = toChildArray(props.children).forEach(child => {\n\t\t\t\tif (normalizedProps.multiple) {\n\t\t\t\t\tchild.props.selected =\n\t\t\t\t\t\tnormalizedProps.defaultValue.indexOf(child.props.value) != -1;\n\t\t\t\t} else {\n\t\t\t\t\tchild.props.selected =\n\t\t\t\t\t\tnormalizedProps.defaultValue == child.props.value;\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\n\t\tvnode.props = normalizedProps;\n\n\t\tif (props.class != props.className) {\n\t\t\tclassNameDescriptor.enumerable = 'className' in props;\n\t\t\tif (props.className != null) normalizedProps.class = props.className;\n\t\t\tObject.defineProperty(normalizedProps, 'className', classNameDescriptor);\n\t\t}\n\t}\n\n\tvnode.$$typeof = REACT_ELEMENT_TYPE;\n\n\tif (oldVNodeHook) oldVNodeHook(vnode);\n};\n\n// Only needed for react-relay\nlet currentComponent;\nconst oldBeforeRender = options._render;\noptions._render = function(vnode) {\n\tif (oldBeforeRender) {\n\t\toldBeforeRender(vnode);\n\t}\n\tcurrentComponent = vnode._component;\n};\n\nconst oldDiffed = options.diffed;\n/** @type {(vnode: import('./internal').VNode)} */\noptions.diffed = function(vnode) {\n\tif (oldDiffed) {\n\t\toldDiffed(vnode);\n\t}\n\n\tconst props = vnode.props;\n\tconst dom = vnode._dom;\n\tif (\n\t\tdom != null &&\n\t\tvnode.type === 'textarea' &&\n\t\t'value' in props &&\n\t\tprops.value !== dom.value\n\t) {\n\t\tdom.value = props.value == null ? '' : props.value;\n\t}\n\n\tcurrentComponent = null;\n};\n\n// This is a very very private internal function for React it\n// is used to sort-of do runtime dependency injection. So far\n// only `react-relay` makes use of it. It uses it to read the\n// context value.\nexport const __SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED = {\n\tReactCurrentDispatcher: {\n\t\tcurrent: {\n\t\t\treadContext(context) {\n\t\t\t\treturn currentComponent._globalContext[context._id].props.value;\n\t\t\t}\n\t\t}\n\t}\n};\n","import {\n\tcreateElement,\n\trender as preactRender,\n\tcloneElement as preactCloneElement,\n\tcreateRef,\n\tComponent,\n\tcreateContext,\n\tFragment\n} from 'preact';\nimport {\n\tuseState,\n\tuseId,\n\tuseReducer,\n\tuseEffect,\n\tuseLayoutEffect,\n\tuseRef,\n\tuseImperativeHandle,\n\tuseMemo,\n\tuseCallback,\n\tuseContext,\n\tuseDebugValue\n} from 'preact/hooks';\nimport { PureComponent } from './PureComponent';\nimport { memo } from './memo';\nimport { forwardRef } from './forwardRef';\nimport { Children } from './Children';\nimport { Suspense, lazy } from './suspense';\nimport { SuspenseList } from './suspense-list';\nimport { createPortal } from './portals';\nimport { is } from './util';\nimport {\n\thydrate,\n\trender,\n\tREACT_ELEMENT_TYPE,\n\t__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED\n} from './render';\n\nconst version = '17.0.2'; // trick libraries to think we are react\n\n/**\n * Legacy version of createElement.\n * @param {import('./internal').VNode[\"type\"]} type The node name or Component constructor\n */\nfunction createFactory(type) {\n\treturn createElement.bind(null, type);\n}\n\n/**\n * Check if the passed element is a valid (p)react node.\n * @param {*} element The element to check\n * @returns {boolean}\n */\nfunction isValidElement(element) {\n\treturn !!element && element.$$typeof === REACT_ELEMENT_TYPE;\n}\n\n/**\n * Wrap `cloneElement` to abort if the passed element is not a valid element and apply\n * all vnode normalizations.\n * @param {import('./internal').VNode} element The vnode to clone\n * @param {object} props Props to add when cloning\n * @param {Array<import('./internal').ComponentChildren>} rest Optional component children\n */\nfunction cloneElement(element) {\n\tif (!isValidElement(element)) return element;\n\treturn preactCloneElement.apply(null, arguments);\n}\n\n/**\n * Remove a component tree from the DOM, including state and event handlers.\n * @param {import('./internal').PreactElement} container\n * @returns {boolean}\n */\nfunction unmountComponentAtNode(container) {\n\tif (container._children) {\n\t\tpreactRender(null, container);\n\t\treturn true;\n\t}\n\treturn false;\n}\n\n/**\n * Get the matching DOM node for a component\n * @param {import('./internal').Component} component\n * @returns {import('./internal').PreactElement | null}\n */\nfunction findDOMNode(component) {\n\treturn (\n\t\t(component &&\n\t\t\t(component.base || (component.nodeType === 1 && component))) ||\n\t\tnull\n\t);\n}\n\n/**\n * Deprecated way to control batched rendering inside the reconciler, but we\n * already schedule in batches inside our rendering code\n * @template Arg\n * @param {(arg: Arg) => void} callback function that triggers the updated\n * @param {Arg} [arg] Optional argument that can be passed to the callback\n */\n// eslint-disable-next-line camelcase\nconst unstable_batchedUpdates = (callback, arg) => callback(arg);\n\n/**\n * In React, `flushSync` flushes the entire tree and forces a rerender. It's\n * implmented here as a no-op.\n * @template Arg\n * @template Result\n * @param {(arg: Arg) => Result} callback function that runs before the flush\n * @param {Arg} [arg] Optional argument that can be passed to the callback\n * @returns\n */\nconst flushSync = (callback, arg) => callback(arg);\n\n/**\n * Strict Mode is not implemented in Preact, so we provide a stand-in for it\n * that just renders its children without imposing any restrictions.\n */\nconst StrictMode = Fragment;\n\nexport function startTransition(cb) {\n\tcb();\n}\n\nexport function useDeferredValue(val) {\n\treturn val;\n}\n\nexport function useTransition() {\n\treturn [false, startTransition];\n}\n\n// TODO: in theory this should be done after a VNode is diffed as we want to insert\n// styles/... before it attaches\nexport const useInsertionEffect = useLayoutEffect;\n\n/**\n * This is taken from https://github.com/facebook/react/blob/main/packages/use-sync-external-store/src/useSyncExternalStoreShimClient.js#L84\n * on a high level this cuts out the warnings, ... and attempts a smaller implementation\n */\nexport function useSyncExternalStore(subscribe, getSnapshot) {\n\tconst value = getSnapshot();\n\n\tconst [{ _instance }, forceUpdate] = useState({\n\t\t_instance: { _value: value, _getSnapshot: getSnapshot }\n\t});\n\n\tuseLayoutEffect(() => {\n\t\t_instance._value = value;\n\t\t_instance._getSnapshot = getSnapshot;\n\n\t\tif (!is(_instance._value, getSnapshot())) {\n\t\t\tforceUpdate({ _instance });\n\t\t}\n\t}, [subscribe, value, getSnapshot]);\n\n\tuseEffect(() => {\n\t\tif (!is(_instance._value, _instance._getSnapshot())) {\n\t\t\tforceUpdate({ _instance });\n\t\t}\n\n\t\treturn subscribe(() => {\n\t\t\tif (!is(_instance._value, _instance._getSnapshot())) {\n\t\t\t\tforceUpdate({ _instance });\n\t\t\t}\n\t\t});\n\t}, [subscribe]);\n\n\treturn value;\n}\n\nexport * from 'preact/hooks';\nexport {\n\tversion,\n\tChildren,\n\trender,\n\thydrate,\n\tunmountComponentAtNode,\n\tcreatePortal,\n\tcreateElement,\n\tcreateContext,\n\tcreateFactory,\n\tcloneElement,\n\tcreateRef,\n\tFragment,\n\tisValidElement,\n\tfindDOMNode,\n\tComponent,\n\tPureComponent,\n\tmemo,\n\tforwardRef,\n\tflushSync,\n\t// eslint-disable-next-line camelcase\n\tunstable_batchedUpdates,\n\tStrictMode,\n\tSuspense,\n\tSuspenseList,\n\tlazy,\n\t__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED\n};\n\n// React copies the named exports to the default one.\nexport default {\n\tuseState,\n\tuseId,\n\tuseReducer,\n\tuseEffect,\n\tuseLayoutEffect,\n\tuseInsertionEffect,\n\tuseTransition,\n\tuseDeferredValue,\n\tuseSyncExternalStore,\n\tstartTransition,\n\tuseRef,\n\tuseImperativeHandle,\n\tuseMemo,\n\tuseCallback,\n\tuseContext,\n\tuseDebugValue,\n\tversion,\n\tChildren,\n\trender,\n\thydrate,\n\tunmountComponentAtNode,\n\tcreatePortal,\n\tcreateElement,\n\tcreateContext,\n\tcreateFactory,\n\tcloneElement,\n\tcreateRef,\n\tFragment,\n\tisValidElement,\n\tfindDOMNode,\n\tComponent,\n\tPureComponent,\n\tmemo,\n\tforwardRef,\n\tflushSync,\n\tunstable_batchedUpdates,\n\tStrictMode,\n\tSuspense,\n\tSuspenseList,\n\tlazy,\n\t__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED\n};\n","import { createElement } from 'preact';\nimport { shallowDiffers } from './util';\n\n/**\n * Memoize a component, so that it only updates when the props actually have\n * changed. This was previously known as `React.pure`.\n * @param {import('./internal').FunctionComponent} c functional component\n * @param {(prev: object, next: object) => boolean} [comparer] Custom equality function\n * @returns {import('./internal').FunctionComponent}\n */\nexport function memo(c, comparer) {\n\tfunction shouldUpdate(nextProps) {\n\t\tlet ref = this.props.ref;\n\t\tlet updateRef = ref == nextProps.ref;\n\t\tif (!updateRef && ref) {\n\t\t\tref.call ? ref(null) : (ref.current = null);\n\t\t}\n\n\t\tif (!comparer) {\n\t\t\treturn shallowDiffers(this.props, nextProps);\n\t\t}\n\n\t\treturn !comparer(this.props, nextProps) || !updateRef;\n\t}\n\n\tfunction Memoed(props) {\n\t\tthis.shouldComponentUpdate = shouldUpdate;\n\t\treturn createElement(c, props);\n\t}\n\tMemoed.displayName = 'Memo(' + (c.displayName || c.name) + ')';\n\tMemoed.prototype.isReactComponent = true;\n\tMemoed._forwarded = true;\n\treturn Memoed;\n}\n","import { useRef } from 'react';\n\n/**\n * A custom hook that creates a ref for a function, and updates it on every render.\n * The new value is always the same function, but the function's context changes on every render.\n */\nexport default function useFunctionRef(fn) {\n    const fnRef = useRef(fn);\n    fnRef.current = fn;\n    return fnRef;\n}\n","function cycleDetected(): never {\n\tthrow new Error(\"Cycle detected\");\n}\n\n// Flags for Computed and Effect.\nconst RUNNING = 1 << 0;\nconst NOTIFIED = 1 << 1;\nconst OUTDATED = 1 << 2;\nconst DISPOSED = 1 << 3;\nconst HAS_ERROR = 1 << 4;\nconst TRACKING = 1 << 5;\n\n// A linked list node used to track dependencies (sources) and dependents (targets).\n// Also used to remember the source's last version number that the target saw.\ntype Node = {\n\t// A source whose value the target depends on.\n\t_source: Signal;\n\t_prevSource?: Node;\n\t_nextSource?: Node;\n\n\t// A target that depends on the source and should be notified when the source changes.\n\t_target: Computed | Effect;\n\t_prevTarget?: Node;\n\t_nextTarget?: Node;\n\n\t// The version number of the source that target has last seen. We use version numbers\n\t// instead of storing the source value, because source values can take arbitrary amount\n\t// of memory, and computeds could hang on to them forever because they're lazily evaluated.\n\t// Use the special value -1 to mark potentially unused but recyclable nodes.\n\t_version: number;\n\n\t// Used to remember & roll back the source's previous `._node` value when entering &\n\t// exiting a new evaluation context.\n\t_rollbackNode?: Node;\n};\n\nfunction startBatch() {\n\tbatchDepth++;\n}\n\nfunction endBatch() {\n\tif (batchDepth > 1) {\n\t\tbatchDepth--;\n\t\treturn;\n\t}\n\n\tlet error: unknown;\n\tlet hasError = false;\n\n\twhile (batchedEffect !== undefined) {\n\t\tlet effect: Effect | undefined = batchedEffect;\n\t\tbatchedEffect = undefined;\n\n\t\tbatchIteration++;\n\n\t\twhile (effect !== undefined) {\n\t\t\tconst next: Effect | undefined = effect._nextBatchedEffect;\n\t\t\teffect._nextBatchedEffect = undefined;\n\t\t\teffect._flags &= ~NOTIFIED;\n\n\t\t\tif (!(effect._flags & DISPOSED) && needsToRecompute(effect)) {\n\t\t\t\ttry {\n\t\t\t\t\teffect._callback();\n\t\t\t\t} catch (err) {\n\t\t\t\t\tif (!hasError) {\n\t\t\t\t\t\terror = err;\n\t\t\t\t\t\thasError = true;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\teffect = next;\n\t\t}\n\t}\n\tbatchIteration = 0;\n\tbatchDepth--;\n\n\tif (hasError) {\n\t\tthrow error;\n\t}\n}\n\nfunction batch<T>(callback: () => T): T {\n\tif (batchDepth > 0) {\n\t\treturn callback();\n\t}\n\t/*@__INLINE__**/ startBatch();\n\ttry {\n\t\treturn callback();\n\t} finally {\n\t\tendBatch();\n\t}\n}\n\n// Currently evaluated computed or effect.\nlet evalContext: Computed | Effect | undefined = undefined;\n\n// Effects collected into a batch.\nlet batchedEffect: Effect | undefined = undefined;\nlet batchDepth = 0;\nlet batchIteration = 0;\n\n// A global version number for signals, used for fast-pathing repeated\n// computed.peek()/computed.value calls when nothing has changed globally.\nlet globalVersion = 0;\n\nfunction addDependency(signal: Signal): Node | undefined {\n\tif (evalContext === undefined) {\n\t\treturn undefined;\n\t}\n\n\tlet node = signal._node;\n\tif (node === undefined || node._target !== evalContext) {\n\t\t/**\n\t\t * `signal` is a new dependency. Create a new dependency node, and set it\n\t\t * as the tail of the current context's dependency list. e.g:\n\t\t *\n\t\t * { A <-> B       }\n\t\t *              \n\t\t *        tail  node (new)\n\t\t *               \n\t\t * { A <-> B <-> C }\n\t\t *               \n\t\t *              tail (evalContext._sources)\n\t\t */\n\t\tnode = {\n\t\t\t_version: 0,\n\t\t\t_source: signal,\n\t\t\t_prevSource: evalContext._sources,\n\t\t\t_nextSource: undefined,\n\t\t\t_target: evalContext,\n\t\t\t_prevTarget: undefined,\n\t\t\t_nextTarget: undefined,\n\t\t\t_rollbackNode: node,\n\t\t};\n\n\t\tif (evalContext._sources !== undefined) {\n\t\t\tevalContext._sources._nextSource = node;\n\t\t}\n\t\tevalContext._sources = node;\n\t\tsignal._node = node;\n\n\t\t// Subscribe to change notifications from this dependency if we're in an effect\n\t\t// OR evaluating a computed signal that in turn has subscribers.\n\t\tif (evalContext._flags & TRACKING) {\n\t\t\tsignal._subscribe(node);\n\t\t}\n\t\treturn node;\n\t} else if (node._version === -1) {\n\t\t// `signal` is an existing dependency from a previous evaluation. Reuse it.\n\t\tnode._version = 0;\n\n\t\t/**\n\t\t * If `node` is not already the current tail of the dependency list (i.e.\n\t\t * there is a next node in the list), then make the `node` the new tail. e.g:\n\t\t *\n\t\t * { A <-> B <-> C <-> D }\n\t\t *                    \n\t\t *        node    tail (evalContext._sources)\n\t\t *         \n\t\t *                    \n\t\t * { A <-> C <-> D <-> B }\n\t\t *                     \n\t\t *                    tail (evalContext._sources)\n\t\t */\n\t\tif (node._nextSource !== undefined) {\n\t\t\tnode._nextSource._prevSource = node._prevSource;\n\n\t\t\tif (node._prevSource !== undefined) {\n\t\t\t\tnode._prevSource._nextSource = node._nextSource;\n\t\t\t}\n\n\t\t\tnode._prevSource = evalContext._sources;\n\t\t\tnode._nextSource = undefined;\n\n\t\t\tevalContext._sources!._nextSource = node;\n\t\t\tevalContext._sources = node;\n\t\t}\n\n\t\t// We can assume that the currently evaluated effect / computed signal is already\n\t\t// subscribed to change notifications from `signal` if needed.\n\t\treturn node;\n\t}\n\treturn undefined;\n}\n\ndeclare class Signal<T = any> {\n\t/** @internal */\n\t_value: unknown;\n\n\t/**\n\t * @internal\n\t * Version numbers should always be >= 0, because the special value -1 is used\n\t * by Nodes to signify potentially unused but recyclable nodes.\n\t */\n\t_version: number;\n\n\t/** @internal */\n\t_node?: Node;\n\n\t/** @internal */\n\t_targets?: Node;\n\n\tconstructor(value?: T);\n\n\t/** @internal */\n\t_refresh(): boolean;\n\n\t/** @internal */\n\t_subscribe(node: Node): void;\n\n\t/** @internal */\n\t_unsubscribe(node: Node): void;\n\n\tsubscribe(fn: (value: T) => void): () => void;\n\n\tvalueOf(): T;\n\n\ttoString(): string;\n\n\tpeek(): T;\n\n\tget value(): T;\n\tset value(value: T);\n}\n\n/** @internal */\nfunction Signal(this: Signal, value?: unknown) {\n\tthis._value = value;\n\tthis._version = 0;\n\tthis._node = undefined;\n\tthis._targets = undefined;\n}\n\nSignal.prototype._refresh = function () {\n\treturn true;\n};\n\nSignal.prototype._subscribe = function (node) {\n\tif (this._targets !== node && node._prevTarget === undefined) {\n\t\tnode._nextTarget = this._targets;\n\t\tif (this._targets !== undefined) {\n\t\t\tthis._targets._prevTarget = node;\n\t\t}\n\t\tthis._targets = node;\n\t}\n};\n\nSignal.prototype._unsubscribe = function (node) {\n\t// Only run the unsubscribe step if the signal has any subscribers to begin with.\n\tif (this._targets !== undefined) {\n\t\tconst prev = node._prevTarget;\n\t\tconst next = node._nextTarget;\n\t\tif (prev !== undefined) {\n\t\t\tprev._nextTarget = next;\n\t\t\tnode._prevTarget = undefined;\n\t\t}\n\t\tif (next !== undefined) {\n\t\t\tnext._prevTarget = prev;\n\t\t\tnode._nextTarget = undefined;\n\t\t}\n\t\tif (node === this._targets) {\n\t\t\tthis._targets = next;\n\t\t}\n\t}\n};\n\nSignal.prototype.subscribe = function (fn) {\n\tconst signal = this;\n\treturn effect(function (this: Effect) {\n\t\tconst value = signal.value;\n\t\tconst flag = this._flags & TRACKING;\n\t\tthis._flags &= ~TRACKING;\n\t\ttry {\n\t\t\tfn(value);\n\t\t} finally {\n\t\t\tthis._flags |= flag;\n\t\t}\n\t});\n};\n\nSignal.prototype.valueOf = function () {\n\treturn this.value;\n};\n\nSignal.prototype.toString = function () {\n\treturn this.value + \"\";\n};\n\nSignal.prototype.peek = function () {\n\treturn this._value;\n};\n\nObject.defineProperty(Signal.prototype, \"value\", {\n\tget() {\n\t\tconst node = addDependency(this);\n\t\tif (node !== undefined) {\n\t\t\tnode._version = this._version;\n\t\t}\n\t\treturn this._value;\n\t},\n\tset(value) {\n\t\tif (value !== this._value) {\n\t\t\tif (batchIteration > 100) {\n\t\t\t\tcycleDetected();\n\t\t\t}\n\n\t\t\tthis._value = value;\n\t\t\tthis._version++;\n\t\t\tglobalVersion++;\n\n\t\t\t/**@__INLINE__*/ startBatch();\n\t\t\ttry {\n\t\t\t\tfor (\n\t\t\t\t\tlet node = this._targets;\n\t\t\t\t\tnode !== undefined;\n\t\t\t\t\tnode = node._nextTarget\n\t\t\t\t) {\n\t\t\t\t\tnode._target._notify();\n\t\t\t\t}\n\t\t\t} finally {\n\t\t\t\tendBatch();\n\t\t\t}\n\t\t}\n\t},\n});\n\nfunction signal<T>(value: T): Signal<T> {\n\treturn new Signal(value);\n}\n\nfunction needsToRecompute(target: Computed | Effect): boolean {\n\t// Check the dependencies for changed values. The dependency list is already\n\t// in order of use. Therefore if multiple dependencies have changed values, only\n\t// the first used dependency is re-evaluated at this point.\n\tfor (\n\t\tlet node = target._sources;\n\t\tnode !== undefined;\n\t\tnode = node._nextSource\n\t) {\n\t\t// If there's a new version of the dependency before or after refreshing,\n\t\t// or the dependency has something blocking it from refreshing at all (e.g. a\n\t\t// dependency cycle), then we need to recompute.\n\t\tif (\n\t\t\tnode._source._version !== node._version ||\n\t\t\t!node._source._refresh() ||\n\t\t\tnode._source._version !== node._version\n\t\t) {\n\t\t\treturn true;\n\t\t}\n\t}\n\t// If none of the dependencies have changed values since last recompute then\n\t// there's no need to recompute.\n\treturn false;\n}\n\nfunction prepareSources(target: Computed | Effect) {\n\t/**\n\t * 1. Mark all current sources as re-usable nodes (version: -1)\n\t * 2. Set a rollback node if the current node is being used in a different context\n\t * 3. Point 'target._sources' to the tail of the doubly-linked list, e.g:\n\t *\n\t *    { undefined <- A <-> B <-> C -> undefined }\n\t *                              \n\t *                              \n\t * target._sources = A; (node is head)  \n\t *                                     \n\t * target._sources = C; (node is tail) \n\t */\n\tfor (\n\t\tlet node = target._sources;\n\t\tnode !== undefined;\n\t\tnode = node._nextSource\n\t) {\n\t\tconst rollbackNode = node._source._node;\n\t\tif (rollbackNode !== undefined) {\n\t\t\tnode._rollbackNode = rollbackNode;\n\t\t}\n\t\tnode._source._node = node;\n\t\tnode._version = -1;\n\n\t\tif (node._nextSource === undefined) {\n\t\t\ttarget._sources = node;\n\t\t\tbreak;\n\t\t}\n\t}\n}\n\nfunction cleanupSources(target: Computed | Effect) {\n\tlet node = target._sources;\n\tlet head = undefined;\n\n\t/**\n\t * At this point 'target._sources' points to the tail of the doubly-linked list.\n\t * It contains all existing sources + new sources in order of use.\n\t * Iterate backwards until we find the head node while dropping old dependencies.\n\t */\n\twhile (node !== undefined) {\n\t\tconst prev = node._prevSource;\n\n\t\t/**\n\t\t * The node was not re-used, unsubscribe from its change notifications and remove itself\n\t\t * from the doubly-linked list. e.g:\n\t\t *\n\t\t * { A <-> B <-> C }\n\t\t *         \n\t\t *    { A <-> C }\n\t\t */\n\t\tif (node._version === -1) {\n\t\t\tnode._source._unsubscribe(node);\n\n\t\t\tif (prev !== undefined) {\n\t\t\t\tprev._nextSource = node._nextSource;\n\t\t\t}\n\t\t\tif (node._nextSource !== undefined) {\n\t\t\t\tnode._nextSource._prevSource = prev;\n\t\t\t}\n\t\t} else {\n\t\t\t/**\n\t\t\t * The new head is the last node seen which wasn't removed/unsubscribed\n\t\t\t * from the doubly-linked list. e.g:\n\t\t\t *\n\t\t\t * { A <-> B <-> C }\n\t\t\t *             \n\t\t\t *              head = node\n\t\t\t *         head = node\n\t\t\t *    head = node\n\t\t\t */\n\t\t\thead = node;\n\t\t}\n\n\t\tnode._source._node = node._rollbackNode;\n\t\tif (node._rollbackNode !== undefined) {\n\t\t\tnode._rollbackNode = undefined;\n\t\t}\n\n\t\tnode = prev;\n\t}\n\n\ttarget._sources = head;\n}\n\ndeclare class Computed<T = any> extends Signal<T> {\n\t_compute: () => T;\n\t_sources?: Node;\n\t_globalVersion: number;\n\t_flags: number;\n\n\tconstructor(compute: () => T);\n\n\t_notify(): void;\n\tget value(): T;\n}\n\nfunction Computed(this: Computed, compute: () => unknown) {\n\tSignal.call(this, undefined);\n\n\tthis._compute = compute;\n\tthis._sources = undefined;\n\tthis._globalVersion = globalVersion - 1;\n\tthis._flags = OUTDATED;\n}\n\nComputed.prototype = new Signal() as Computed;\n\nComputed.prototype._refresh = function () {\n\tthis._flags &= ~NOTIFIED;\n\n\tif (this._flags & RUNNING) {\n\t\treturn false;\n\t}\n\n\t// If this computed signal has subscribed to updates from its dependencies\n\t// (TRACKING flag set) and none of them have notified about changes (OUTDATED\n\t// flag not set), then the computed value can't have changed.\n\tif ((this._flags & (OUTDATED | TRACKING)) === TRACKING) {\n\t\treturn true;\n\t}\n\tthis._flags &= ~OUTDATED;\n\n\tif (this._globalVersion === globalVersion) {\n\t\treturn true;\n\t}\n\tthis._globalVersion = globalVersion;\n\n\t// Mark this computed signal running before checking the dependencies for value\n\t// changes, so that the RUNNING flag can be used to notice cyclical dependencies.\n\tthis._flags |= RUNNING;\n\tif (this._version > 0 && !needsToRecompute(this)) {\n\t\tthis._flags &= ~RUNNING;\n\t\treturn true;\n\t}\n\n\tconst prevContext = evalContext;\n\ttry {\n\t\tprepareSources(this);\n\t\tevalContext = this;\n\t\tconst value = this._compute();\n\t\tif (\n\t\t\tthis._flags & HAS_ERROR ||\n\t\t\tthis._value !== value ||\n\t\t\tthis._version === 0\n\t\t) {\n\t\t\tthis._value = value;\n\t\t\tthis._flags &= ~HAS_ERROR;\n\t\t\tthis._version++;\n\t\t}\n\t} catch (err) {\n\t\tthis._value = err;\n\t\tthis._flags |= HAS_ERROR;\n\t\tthis._version++;\n\t}\n\tevalContext = prevContext;\n\tcleanupSources(this);\n\tthis._flags &= ~RUNNING;\n\treturn true;\n};\n\nComputed.prototype._subscribe = function (node) {\n\tif (this._targets === undefined) {\n\t\tthis._flags |= OUTDATED | TRACKING;\n\n\t\t// A computed signal subscribes lazily to its dependencies when the it\n\t\t// gets its first subscriber.\n\t\tfor (\n\t\t\tlet node = this._sources;\n\t\t\tnode !== undefined;\n\t\t\tnode = node._nextSource\n\t\t) {\n\t\t\tnode._source._subscribe(node);\n\t\t}\n\t}\n\tSignal.prototype._subscribe.call(this, node);\n};\n\nComputed.prototype._unsubscribe = function (node) {\n\t// Only run the unsubscribe step if the computed signal has any subscribers.\n\tif (this._targets !== undefined) {\n\t\tSignal.prototype._unsubscribe.call(this, node);\n\n\t\t// Computed signal unsubscribes from its dependencies when it loses its last subscriber.\n\t\t// This makes it possible for unreferences subgraphs of computed signals to get garbage collected.\n\t\tif (this._targets === undefined) {\n\t\t\tthis._flags &= ~TRACKING;\n\n\t\t\tfor (\n\t\t\t\tlet node = this._sources;\n\t\t\t\tnode !== undefined;\n\t\t\t\tnode = node._nextSource\n\t\t\t) {\n\t\t\t\tnode._source._unsubscribe(node);\n\t\t\t}\n\t\t}\n\t}\n};\n\nComputed.prototype._notify = function () {\n\tif (!(this._flags & NOTIFIED)) {\n\t\tthis._flags |= OUTDATED | NOTIFIED;\n\n\t\tfor (\n\t\t\tlet node = this._targets;\n\t\t\tnode !== undefined;\n\t\t\tnode = node._nextTarget\n\t\t) {\n\t\t\tnode._target._notify();\n\t\t}\n\t}\n};\n\nComputed.prototype.peek = function () {\n\tif (!this._refresh()) {\n\t\tcycleDetected();\n\t}\n\tif (this._flags & HAS_ERROR) {\n\t\tthrow this._value;\n\t}\n\treturn this._value;\n};\n\nObject.defineProperty(Computed.prototype, \"value\", {\n\tget() {\n\t\tif (this._flags & RUNNING) {\n\t\t\tcycleDetected();\n\t\t}\n\t\tconst node = addDependency(this);\n\t\tthis._refresh();\n\t\tif (node !== undefined) {\n\t\t\tnode._version = this._version;\n\t\t}\n\t\tif (this._flags & HAS_ERROR) {\n\t\t\tthrow this._value;\n\t\t}\n\t\treturn this._value;\n\t},\n});\n\ninterface ReadonlySignal<T = any> extends Signal<T> {\n\treadonly value: T;\n}\n\nfunction computed<T>(compute: () => T): ReadonlySignal<T> {\n\treturn new Computed(compute);\n}\n\nfunction cleanupEffect(effect: Effect) {\n\tconst cleanup = effect._cleanup;\n\teffect._cleanup = undefined;\n\n\tif (typeof cleanup === \"function\") {\n\t\t/*@__INLINE__**/ startBatch();\n\n\t\t// Run cleanup functions always outside of any context.\n\t\tconst prevContext = evalContext;\n\t\tevalContext = undefined;\n\t\ttry {\n\t\t\tcleanup();\n\t\t} catch (err) {\n\t\t\teffect._flags &= ~RUNNING;\n\t\t\teffect._flags |= DISPOSED;\n\t\t\tdisposeEffect(effect);\n\t\t\tthrow err;\n\t\t} finally {\n\t\t\tevalContext = prevContext;\n\t\t\tendBatch();\n\t\t}\n\t}\n}\n\nfunction disposeEffect(effect: Effect) {\n\tfor (\n\t\tlet node = effect._sources;\n\t\tnode !== undefined;\n\t\tnode = node._nextSource\n\t) {\n\t\tnode._source._unsubscribe(node);\n\t}\n\teffect._compute = undefined;\n\teffect._sources = undefined;\n\n\tcleanupEffect(effect);\n}\n\nfunction endEffect(this: Effect, prevContext?: Computed | Effect) {\n\tif (evalContext !== this) {\n\t\tthrow new Error(\"Out-of-order effect\");\n\t}\n\tcleanupSources(this);\n\tevalContext = prevContext;\n\n\tthis._flags &= ~RUNNING;\n\tif (this._flags & DISPOSED) {\n\t\tdisposeEffect(this);\n\t}\n\tendBatch();\n}\n\ndeclare class Effect {\n\t_compute?: () => unknown;\n\t_cleanup?: unknown;\n\t_sources?: Node;\n\t_nextBatchedEffect?: Effect;\n\t_flags: number;\n\n\tconstructor(compute: () => void);\n\n\t_callback(): void;\n\t_start(): () => void;\n\t_notify(): void;\n\t_dispose(): void;\n}\n\nfunction Effect(this: Effect, compute: () => void) {\n\tthis._compute = compute;\n\tthis._cleanup = undefined;\n\tthis._sources = undefined;\n\tthis._nextBatchedEffect = undefined;\n\tthis._flags = TRACKING;\n}\n\nEffect.prototype._callback = function () {\n\tconst finish = this._start();\n\ttry {\n\t\tif (!(this._flags & DISPOSED) && this._compute !== undefined) {\n\t\t\tthis._cleanup = this._compute();\n\t\t}\n\t} finally {\n\t\tfinish();\n\t}\n};\n\nEffect.prototype._start = function () {\n\tif (this._flags & RUNNING) {\n\t\tcycleDetected();\n\t}\n\tthis._flags |= RUNNING;\n\tthis._flags &= ~DISPOSED;\n\tcleanupEffect(this);\n\tprepareSources(this);\n\n\t/*@__INLINE__**/ startBatch();\n\tconst prevContext = evalContext;\n\tevalContext = this;\n\treturn endEffect.bind(this, prevContext);\n};\n\nEffect.prototype._notify = function () {\n\tif (!(this._flags & NOTIFIED)) {\n\t\tthis._flags |= NOTIFIED;\n\t\tthis._nextBatchedEffect = batchedEffect;\n\t\tbatchedEffect = this;\n\t}\n};\n\nEffect.prototype._dispose = function () {\n\tthis._flags |= DISPOSED;\n\n\tif (!(this._flags & RUNNING)) {\n\t\tdisposeEffect(this);\n\t}\n};\n\nfunction effect(compute: () => unknown): () => void {\n\tconst effect = new Effect(compute);\n\ttry {\n\t\teffect._callback();\n\t} catch (err) {\n\t\teffect._dispose();\n\t\tthrow err;\n\t}\n\t// Return a bound function instead of a wrapper like `() => effect._dispose()`,\n\t// because bound functions seem to be just as fast and take up a lot less memory.\n\treturn effect._dispose.bind(effect);\n}\n\nexport { signal, computed, effect, batch, Signal, ReadonlySignal };\n","import { options, Component } from \"preact\";\nimport { useRef, useMemo, useEffect } from \"preact/hooks\";\nimport {\n\tsignal,\n\tcomputed,\n\tbatch,\n\teffect,\n\tSignal,\n\ttype ReadonlySignal,\n} from \"@preact/signals-core\";\nimport {\n\tVNode,\n\tOptionsTypes,\n\tHookFn,\n\tEffect,\n\tPropertyUpdater,\n\tAugmentedComponent,\n\tAugmentedElement as Element,\n} from \"./internal\";\n\nexport { signal, computed, batch, effect, Signal, type ReadonlySignal };\n\nconst HAS_PENDING_UPDATE = 1 << 0;\nconst HAS_HOOK_STATE = 1 << 1;\nconst HAS_COMPUTEDS = 1 << 2;\n\n// Install a Preact options hook\nfunction hook<T extends OptionsTypes>(hookName: T, hookFn: HookFn<T>) {\n\t// @ts-ignore-next-line private options hooks usage\n\toptions[hookName] = hookFn.bind(null, options[hookName] || (() => {}));\n}\n\nlet currentComponent: AugmentedComponent | undefined;\nlet finishUpdate: (() => void) | undefined;\n\nfunction setCurrentUpdater(updater?: Effect) {\n\t// end tracking for the current update:\n\tif (finishUpdate) finishUpdate();\n\t// start tracking the new update:\n\tfinishUpdate = updater && updater._start();\n}\n\nfunction createUpdater(update: () => void) {\n\tlet updater!: Effect;\n\teffect(function (this: Effect) {\n\t\tupdater = this;\n\t});\n\tupdater._callback = update;\n\treturn updater;\n}\n\n/** @todo This may be needed for complex prop value detection. */\n// function isSignalValue(value: any): value is Signal {\n// \tif (typeof value !== \"object\" || value == null) return false;\n// \tif (value instanceof Signal) return true;\n// \t// @TODO: uncomment this when we land Reactive (ideally behind a brand check)\n// \t// for (let i in value) if (value[i] instanceof Signal) return true;\n// \treturn false;\n// }\n\n/**\n * A wrapper component that renders a Signal directly as a Text node.\n * @todo: in Preact 11, just decorate Signal with `type:null`\n */\nfunction Text(this: AugmentedComponent, { data }: { data: Signal }) {\n\t// hasComputeds.add(this);\n\n\t// Store the props.data signal in another signal so that\n\t// passing a new signal reference re-runs the text computed:\n\tconst currentSignal = useSignal(data);\n\tcurrentSignal.value = data;\n\n\tconst s = useMemo(() => {\n\t\t// mark the parent component as having computeds so it gets optimized\n\t\tlet v = this.__v;\n\t\twhile ((v = v.__!)) {\n\t\t\tif (v.__c) {\n\t\t\t\tv.__c._updateFlags |= HAS_COMPUTEDS;\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\n\t\t// Replace this component's vdom updater with a direct text one:\n\t\tthis._updater!._callback = () => {\n\t\t\t(this.base as Text).data = s.peek();\n\t\t};\n\n\t\treturn computed(() => {\n\t\t\tlet data = currentSignal.value;\n\t\t\tlet s = data.value;\n\t\t\treturn s === 0 ? 0 : s === true ? \"\" : s || \"\";\n\t\t});\n\t}, []);\n\n\treturn s.value;\n}\nText.displayName = \"_st\";\n\nObject.defineProperties(Signal.prototype, {\n\tconstructor: { configurable: true, value: undefined },\n\ttype: { configurable: true, value: Text },\n\tprops: {\n\t\tconfigurable: true,\n\t\tget() {\n\t\t\treturn { data: this };\n\t\t},\n\t},\n\t// Setting a VNode's _depth to 1 forces Preact to clone it before modifying:\n\t// https://github.com/preactjs/preact/blob/d7a433ee8463a7dc23a05111bb47de9ec729ad4d/src/diff/children.js#L77\n\t// @todo remove this for Preact 11\n\t__b: { configurable: true, value: 1 },\n});\n\n/** Inject low-level property/attribute bindings for Signals into Preact's diff */\nhook(OptionsTypes.DIFF, (old, vnode) => {\n\tif (typeof vnode.type === \"string\") {\n\t\tlet signalProps: Record<string, any> | undefined;\n\n\t\tlet props = vnode.props;\n\t\tfor (let i in props) {\n\t\t\tif (i === \"children\") continue;\n\n\t\t\tlet value = props[i];\n\t\t\tif (value instanceof Signal) {\n\t\t\t\tif (!signalProps) vnode.__np = signalProps = {};\n\t\t\t\tsignalProps[i] = value;\n\t\t\t\tprops[i] = value.peek();\n\t\t\t}\n\t\t}\n\t}\n\n\told(vnode);\n});\n\n/** Set up Updater before rendering a component */\nhook(OptionsTypes.RENDER, (old, vnode) => {\n\tsetCurrentUpdater();\n\n\tlet updater;\n\n\tlet component = vnode.__c;\n\tif (component) {\n\t\tcomponent._updateFlags &= ~HAS_PENDING_UPDATE;\n\n\t\tupdater = component._updater;\n\t\tif (updater === undefined) {\n\t\t\tcomponent._updater = updater = createUpdater(() => {\n\t\t\t\tcomponent._updateFlags |= HAS_PENDING_UPDATE;\n\t\t\t\tcomponent.setState({});\n\t\t\t});\n\t\t}\n\t}\n\n\tcurrentComponent = component;\n\tsetCurrentUpdater(updater);\n\told(vnode);\n});\n\n/** Finish current updater if a component errors */\nhook(OptionsTypes.CATCH_ERROR, (old, error, vnode, oldVNode) => {\n\tsetCurrentUpdater();\n\tcurrentComponent = undefined;\n\told(error, vnode, oldVNode);\n});\n\n/** Finish current updater after rendering any VNode */\nhook(OptionsTypes.DIFFED, (old, vnode) => {\n\tsetCurrentUpdater();\n\tcurrentComponent = undefined;\n\n\tlet dom: Element;\n\n\t// vnode._dom is undefined during string rendering,\n\t// so we use this to skip prop subscriptions during SSR.\n\tif (typeof vnode.type === \"string\" && (dom = vnode.__e as Element)) {\n\t\tlet props = vnode.__np;\n\t\tlet renderedProps = vnode.props;\n\t\tif (props) {\n\t\t\tlet updaters = dom._updaters;\n\t\t\tif (updaters) {\n\t\t\t\tfor (let prop in updaters) {\n\t\t\t\t\tlet updater = updaters[prop];\n\t\t\t\t\tif (updater !== undefined && !(prop in props)) {\n\t\t\t\t\t\tupdater._dispose();\n\t\t\t\t\t\t// @todo we could just always invoke _dispose() here\n\t\t\t\t\t\tupdaters[prop] = undefined;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tupdaters = {};\n\t\t\t\tdom._updaters = updaters;\n\t\t\t}\n\t\t\tfor (let prop in props) {\n\t\t\t\tlet updater = updaters[prop];\n\t\t\t\tlet signal = props[prop];\n\t\t\t\tif (updater === undefined) {\n\t\t\t\t\tupdater = createPropUpdater(dom, prop, signal, renderedProps);\n\t\t\t\t\tupdaters[prop] = updater;\n\t\t\t\t} else {\n\t\t\t\t\tupdater._update(signal, renderedProps);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\told(vnode);\n});\n\nfunction createPropUpdater(\n\tdom: Element,\n\tprop: string,\n\tpropSignal: Signal,\n\tprops: Record<string, any>\n): PropertyUpdater {\n\tconst setAsProperty =\n\t\tprop in dom &&\n\t\t// SVG elements need to go through `setAttribute` because they\n\t\t// expect things like SVGAnimatedTransformList instead of strings.\n\t\t// @ts-ignore\n\t\tdom.ownerSVGElement === undefined;\n\n\tconst changeSignal = signal(propSignal);\n\treturn {\n\t\t_update: (newSignal: Signal, newProps: typeof props) => {\n\t\t\tchangeSignal.value = newSignal;\n\t\t\tprops = newProps;\n\t\t},\n\t\t_dispose: effect(() => {\n\t\t\tconst value = changeSignal.value.value;\n\t\t\t// If Preact just rendered this value, don't render it again:\n\t\t\tif (props[prop] === value) return;\n\t\t\tprops[prop] = value;\n\t\t\tif (setAsProperty) {\n\t\t\t\t// @ts-ignore-next-line silly\n\t\t\t\tdom[prop] = value;\n\t\t\t} else if (value) {\n\t\t\t\tdom.setAttribute(prop, value);\n\t\t\t} else {\n\t\t\t\tdom.removeAttribute(prop);\n\t\t\t}\n\t\t}),\n\t};\n}\n\n/** Unsubscribe from Signals when unmounting components/vnodes */\nhook(OptionsTypes.UNMOUNT, (old, vnode: VNode) => {\n\tif (typeof vnode.type === \"string\") {\n\t\tlet dom = vnode.__e as Element | undefined;\n\t\t// vnode._dom is undefined during string rendering\n\t\tif (dom) {\n\t\t\tconst updaters = dom._updaters;\n\t\t\tif (updaters) {\n\t\t\t\tdom._updaters = undefined;\n\t\t\t\tfor (let prop in updaters) {\n\t\t\t\t\tlet updater = updaters[prop];\n\t\t\t\t\tif (updater) updater._dispose();\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t} else {\n\t\tlet component = vnode.__c;\n\t\tif (component) {\n\t\t\tconst updater = component._updater;\n\t\t\tif (updater) {\n\t\t\t\tcomponent._updater = undefined;\n\t\t\t\tupdater._dispose();\n\t\t\t}\n\t\t}\n\t}\n\told(vnode);\n});\n\n/** Mark components that use hook state so we can skip sCU optimization. */\nhook(OptionsTypes.HOOK, (old, component, index, type) => {\n\tif (type < 3)\n\t\t(component as AugmentedComponent)._updateFlags |= HAS_HOOK_STATE;\n\told(component, index, type);\n});\n\n/**\n * Auto-memoize components that use Signals/Computeds.\n * Note: Does _not_ optimize components that use hook/class state.\n */\nComponent.prototype.shouldComponentUpdate = function (\n\tthis: AugmentedComponent,\n\tprops,\n\tstate\n) {\n\t// @todo: Once preactjs/preact#3671 lands, this could just use `currentUpdater`:\n\tconst updater = this._updater;\n\tconst hasSignals = updater && updater._sources !== undefined;\n\n\t// let reason;\n\t// if (!hasSignals && !hasComputeds.has(this)) {\n\t// \treason = \"no signals or computeds\";\n\t// } else if (hasPendingUpdate.has(this)) {\n\t// \treason = \"has pending update\";\n\t// } else if (hasHookState.has(this)) {\n\t// \treason = \"has hook state\";\n\t// }\n\t// if (reason) {\n\t// \tif (!this) reason += \" (`this` bug)\";\n\t// \tconsole.log(\"not optimizing\", this?.constructor?.name, \": \", reason, {\n\t// \t\tdetails: {\n\t// \t\t\thasSignals,\n\t// \t\t\thasComputeds: hasComputeds.has(this),\n\t// \t\t\thasPendingUpdate: hasPendingUpdate.has(this),\n\t// \t\t\thasHookState: hasHookState.has(this),\n\t// \t\t\tdeps: Array.from(updater._deps),\n\t// \t\t\tupdater,\n\t// \t\t},\n\t// \t});\n\t// }\n\n\t// if this component used no signals or computeds, update:\n\tif (!hasSignals && !(this._updateFlags & HAS_COMPUTEDS)) return true;\n\n\t// if there is a pending re-render triggered from Signals,\n\t// or if there is hook or class state, update:\n\tif (this._updateFlags & (HAS_PENDING_UPDATE | HAS_HOOK_STATE)) return true;\n\n\t// @ts-ignore\n\tfor (let i in state) return true;\n\n\t// if any non-Signal props changed, update:\n\tfor (let i in props) {\n\t\tif (i !== \"__source\" && props[i] !== this.props[i]) return true;\n\t}\n\tfor (let i in this.props) if (!(i in props)) return true;\n\n\t// this is a purely Signal-driven component, don't update:\n\treturn false;\n};\n\nexport function useSignal<T>(value: T) {\n\treturn useMemo(() => signal<T>(value), []);\n}\n\nexport function useComputed<T>(compute: () => T) {\n\tconst $compute = useRef(compute);\n\t$compute.current = compute;\n\t(currentComponent as AugmentedComponent)._updateFlags |= HAS_COMPUTEDS;\n\treturn useMemo(() => computed<T>(() => $compute.current()), []);\n}\n\nexport function useSignalEffect(cb: () => void | (() => void)) {\n\tconst callback = useRef(cb);\n\tcallback.current = cb;\n\n\tuseEffect(() => {\n\t\treturn effect(() => callback.current());\n\t}, []);\n}\n\n/**\n * @todo Determine which Reactive implementation we'll be using.\n * @internal\n */\n// export function useReactive<T extends object>(value: T): Reactive<T> {\n// \treturn useMemo(() => reactive<T>(value), []);\n// }\n\n/**\n * @internal\n * Update a Reactive's using the properties of an object or other Reactive.\n * Also works for Signals.\n * @example\n *   // Update a Reactive with Object.assign()-like syntax:\n *   const r = reactive({ name: \"Alice\" });\n *   update(r, { name: \"Bob\" });\n *   update(r, { age: 42 }); // property 'age' does not exist in type '{ name?: string }'\n *   update(r, 2); // '2' has no properties in common with '{ name?: string }'\n *   console.log(r.name.value); // \"Bob\"\n *\n * @example\n *   // Update a Reactive with the properties of another Reactive:\n *   const A = reactive({ name: \"Alice\" });\n *   const B = reactive({ name: \"Bob\", age: 42 });\n *   update(A, B);\n *   console.log(`${A.name} is ${A.age}`); // \"Bob is 42\"\n *\n * @example\n *   // Update a signal with assign()-like syntax:\n *   const s = signal(42);\n *   update(s, \"hi\"); // Argument type 'string' not assignable to type 'number'\n *   update(s, {}); // Argument type '{}' not assignable to type 'number'\n *   update(s, 43);\n *   console.log(s.value); // 43\n *\n * @param obj The Reactive or Signal to be updated\n * @param update The value, Signal, object or Reactive to update `obj` to match\n * @param overwrite If `true`, any properties `obj` missing from `update` are set to `undefined`\n */\n/*\nexport function update<T extends SignalOrReactive>(\n\tobj: T,\n\tupdate: Partial<Unwrap<T>>,\n\toverwrite = false\n) {\n\tif (obj instanceof Signal) {\n\t\tobj.value = peekValue(update);\n\t} else {\n\t\tfor (let i in update) {\n\t\t\tif (i in obj) {\n\t\t\t\tobj[i].value = peekValue(update[i]);\n\t\t\t} else {\n\t\t\t\tlet sig = signal(peekValue(update[i]));\n\t\t\t\tsig[KEY] = i;\n\t\t\t\tobj[i] = sig;\n\t\t\t}\n\t\t}\n\t\tif (overwrite) {\n\t\t\tfor (let i in obj) {\n\t\t\t\tif (!(i in update)) {\n\t\t\t\t\tobj[i].value = undefined;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n}\n*/\n","/**\n * This method converts the hierarchical command list into a flat list of commands which is more convenient\n * for internal processing, whereas the hierarchical command list is more convenient for the user.\n */\nexport default function flattenCommands(\n    commands: HierarchicalCommandList,\n    parentId: CommandId = null\n): FlatCommandList {\n    return Object.keys(commands).reduce((commandList, commandId) => {\n        const {\n            icon,\n            description,\n            name,\n            subCommands,\n            action,\n            canHandleQueries,\n            closeOnExecute,\n            category,\n            executeManually,\n        } = commands[commandId] as Command & CommandGroup;\n\n        // Create an uniquely identifiable command id for the flat command list\n        const absoluteCommandId = parentId ? `${parentId}.${commandId}` : commandId;\n\n        // Create list of available subcommand names\n        const subCommandIds = subCommands\n            ? Object.keys(subCommands).map((subCommandId) => `${absoluteCommandId}.${subCommandId}`)\n            : [];\n\n        // Insert the processed command into the flat command list\n        commandList[absoluteCommandId] = {\n            id: absoluteCommandId,\n            name,\n            icon,\n            description,\n            action,\n            canHandleQueries,\n            subCommandIds,\n            parentId,\n            closeOnExecute,\n            category,\n            executeManually,\n        };\n\n        // Insert subcommands into the list\n        if (subCommandIds.length > 0) {\n            return {\n                ...commandList,\n                ...flattenCommands(subCommands, absoluteCommandId),\n            };\n        }\n        return commandList;\n    }, {} as FlatCommandList);\n}\n","const PREFIX = '%c[COMMANDBAR]';\n\nconst logger = {\n    ok: (message: string, ...args: any[]) => console.log(PREFIX, 'color: green', message, ...args),\n    error: (message: string, ...args: any[]) => console.log(PREFIX, 'color: red', message, ...args),\n    warn: (message: string, ...args: any[]) => console.warn(PREFIX, 'color: orange', message, ...args),\n    debug:\n        // @ts-ignore\n        process.env.NODE_ENV === 'production'\n            ? () => null\n            : (message: string, ...args: any[]) => console.debug(PREFIX, 'color: lightblue', message, ...args),\n};\n\nexport default logger;\n","export default function clamp(value: number, min: number, max: number): number {\n    return Math.max(min, Math.min(max, value));\n}\n","/**\n* Copyright (c) 2023, Leon Sorokin\n* All rights reserved. (MIT Licensed)\n*\n* uFuzzy.js (Fuzzy)\n* A tiny, efficient fuzzy matcher that doesn't suck\n* https://github.com/leeoniya/uFuzzy (v1.0.3)\n*/\n\nconst cmp = new Intl.Collator('en').compare;\n\nconst inf = Infinity;\n\nconst NEGS_RE = /(?:\\s+|^)-[a-z\\d]+/ig;\n\nconst OPTS = {\n\t// term segmentation & punct/whitespace merging\n\tinterSplit: \"[^A-Za-z0-9']+\",\n\tintraSplit: '[a-z][A-Z]',\n\n\t// intra bounds that will be used to increase lft1/rgt1 info counters\n\tintraBound: '[A-Za-z][0-9]|[0-9][A-Za-z]|[a-z][A-Z]',\n\n\t// inter-bounds mode\n\t// 2 = strict (will only match 'man' on whitepace and punct boundaries: Mega Man, Mega_Man, mega.man)\n\t// 1 = loose  (plus allowance for alpha-num and case-change boundaries: MegaMan, 0007man)\n\t// 0 = any    (will match 'man' as any substring: megamaniac)\n\tinterLft: 0,\n\tinterRgt: 0,\n\n\t// allowance between terms\n\tinterChars: '.',\n\tinterIns: inf,\n\n\t// allowance between chars in terms\n\tintraChars: \"[a-z\\\\d']\", // internally case-insensitive\n\tintraIns: 0,\n\n\tintraContr: \"'[a-z]{1,2}\\\\b\",\n\n\t// multi-insert or single-error mode\n\tintraMode: 0,\n\n\t// single-error bounds for errors within terms, default requires exact first char\n\tintraSlice: [1, inf],\n\n\t// single-error tolerance toggles\n\tintraSub: 0,\n\tintraTrn: 0,\n\tintraDel: 0,\n\n\t// can post-filter matches that are too far apart in distance or length\n\t// (since intraIns is between each char, it can accum to nonsense matches)\n\tintraFilt: (term, match, index) => true, // should this also accept WIP info?\n\n\t// final sorting fn\n\tsort: (info, haystack, needle) => {\n\t\tlet {\n\t\t\tidx,\n\t\t\tchars,\n\t\t\tterms,\n\t\t\tinterLft2,\n\t\t\tinterLft1,\n\t\t//\tinterRgt2,\n\t\t//\tinterRgt1,\n\t\t\tstart,\n\t\t\tintraIns,\n\t\t\tinterIns,\n\t\t} = info;\n\n\t\treturn idx.map((v, i) => i).sort((ia, ib) => (\n\t\t\t// most contig chars matched\n\t\t\tchars[ib] - chars[ia] ||\n\t\t\t// least char intra-fuzz (most contiguous)\n\t\t\tintraIns[ia] - intraIns[ib] ||\n\t\t\t// most prefix bounds, boosted by full term matches\n\t\t\t(\n\t\t\t\t(terms[ib] + interLft2[ib] + 0.5 * interLft1[ib]) -\n\t\t\t\t(terms[ia] + interLft2[ia] + 0.5 * interLft1[ia])\n\t\t\t) ||\n\t\t\t// highest density of match (least span)\n\t\t//\tspan[ia] - span[ib] ||\n\t\t\t// highest density of match (least term inter-fuzz)\n\t\t\tinterIns[ia] - interIns[ib] ||\n\t\t\t// earliest start of match\n\t\t\tstart[ia] - start[ib] ||\n\t\t\t// alphabetic\n\t\t\tcmp(haystack[idx[ia]], haystack[idx[ib]])\n\t\t));\n\t},\n};\n\nconst lazyRepeat = (chars, limit) => (\n\tlimit == 0   ? ''           :\n\tlimit == 1   ? chars + '??' :\n\tlimit == inf ? chars + '*?' :\n\t               chars + `{0,${limit}}?`\n);\n\nconst mode2Tpl = '(?:\\\\b|_)';\n\nfunction uFuzzy(opts) {\n\topts = Object.assign({}, OPTS, opts);\n\n\tconst {\n\t\tinterLft,\n\t\tinterRgt,\n\t\tintraMode,\n\t\tintraSlice,\n\t\tintraIns,\n\t\tintraSub,\n\t\tintraTrn,\n\t\tintraDel,\n\t\tintraContr,\n\t\tintraSplit: _intraSplit,\n\t\tinterSplit: _interSplit,\n\t\tintraBound: _intraBound,\n\t\tintraChars,\n\t} = opts;\n\n\tlet { intraRules } = opts;\n\n\tif (intraRules == null) {\n\t\tintraRules = p => {\n\t\t\t// default is exact term matches only\n\t\t\tlet _intraSlice = OPTS.intraSlice, // requires first char\n\t\t\t\t_intraIns = 0,\n\t\t\t\t_intraSub = 0,\n\t\t\t\t_intraTrn = 0,\n\t\t\t\t_intraDel = 0;\n\n\t\t\tlet plen = p.length;\n\n\t\t\t// prevent junk matches by requiring stricter rules for short terms\n\t\t\tif (plen <= 4) {\n\t\t\t\tif (plen >= 3) {\n\t\t\t\t\t// one swap in non-first char when 3-4 chars\n\t\t\t\t\t_intraTrn = Math.min(intraTrn, 1);\n\n\t\t\t\t\t// or one insertion when 4 chars\n\t\t\t\t\tif (plen == 4)\n\t\t\t\t\t\t_intraIns = Math.min(intraIns, 1);\n\t\t\t\t}\n\t\t\t\t// else exact match when 1-2 chars\n\t\t\t}\n\t\t\t// use supplied opts\n\t\t\telse {\n\t\t\t\t_intraSlice = intraSlice;\n\t\t\t\t_intraIns = intraIns,\n\t\t\t\t_intraSub = intraSub,\n\t\t\t\t_intraTrn = intraTrn,\n\t\t\t\t_intraDel = intraDel;\n\t\t\t}\n\n\t\t\treturn {\n\t\t\t\tintraSlice: _intraSlice,\n\t\t\t\tintraIns: _intraIns,\n\t\t\t\tintraSub: _intraSub,\n\t\t\t\tintraTrn: _intraTrn,\n\t\t\t\tintraDel: _intraDel,\n\t\t\t};\n\t\t};\n\t}\n\n\tlet withIntraSplit = !!_intraSplit;\n\n\tlet intraSplit = new RegExp(_intraSplit, 'g');\n\tlet interSplit = new RegExp(_interSplit, 'g');\n\n\tlet trimRe = new RegExp('^' + _interSplit + '|' + _interSplit + '$', 'g');\n\tlet contrsRe = new RegExp(intraContr, 'gi');\n\n\tconst split = needle => {\n\t\tneedle = needle.replace(trimRe, '').toLowerCase();\n\n\t\tif (withIntraSplit)\n\t\t\tneedle = needle.replace(intraSplit, m => m[0] + ' ' + m[1]);\n\n\t\treturn needle.split(interSplit).filter(t => t != '');\n\t};\n\n\tconst prepQuery = (needle, capt = 0, interOR = false) => {\n\t\t// split on punct, whitespace, num-alpha, and upper-lower boundaries\n\t\tlet parts = split(needle);\n\n\t\tif (parts.length == 0)\n\t\t\tthrow `Empty needle!`;\n\n\t\t// split out any detected contractions for each term that become required suffixes\n\t\tlet contrs = Array(parts.length).fill('');\n\t\tparts = parts.map((p, pi) => p.replace(contrsRe, m => {\n\t\t\tcontrs[pi] = m;\n\t\t\treturn '';\n\t\t}));\n\n\t\t// array of regexp tpls for each term\n\t\tlet reTpl;\n\n\t\t// allows single mutations within each term\n\t\tif (intraMode == 1) {\n\t\t\treTpl = parts.map((p, pi) => {\n\t\t\t\tlet {\n\t\t\t\t\tintraSlice,\n\t\t\t\t\tintraIns,\n\t\t\t\t\tintraSub,\n\t\t\t\t\tintraTrn,\n\t\t\t\t\tintraDel,\n\t\t\t\t} = intraRules(p);\n\n\t\t\t\tif (intraIns + intraSub + intraTrn + intraDel == 0)\n\t\t\t\t\treturn p + contrs[pi];\n\n\t\t\t\tlet [lftIdx, rgtIdx] = intraSlice;\n\t\t\t\tlet lftChar = p.slice(0, lftIdx); // prefix\n\t\t\t\tlet rgtChar = p.slice(rgtIdx);    // suffix\n\n\t\t\t\tlet chars = p.slice(lftIdx, rgtIdx);\n\n\t\t\t\t// neg lookahead to prefer matching 'Test' instead of 'tTest' in ManifestTest or fittest\n\t\t\t\t// but skip when search term contains leading repetition (aardvark, aaa)\n\t\t\t\tif (intraIns == 1 && lftChar.length == 1 && lftChar != chars[0])\n\t\t\t\t\tlftChar += '(?!' + lftChar + ')';\n\n\t\t\t\tlet numChars = chars.length;\n\n\t\t\t\tlet variants = [];\n\n\t\t\t\t// variants with single char substitutions\n\t\t\t\tif (intraSub) {\n\t\t\t\t\tfor (let i = 0; i < numChars; i++)\n\t\t\t\t\t\tvariants.push(lftChar + chars.slice(0, i) + intraChars + chars.slice(i + 1) + rgtChar);\n\t\t\t\t}\n\n\t\t\t\t// variants with single transpositions\n\t\t\t\tif (intraTrn) {\n\t\t\t\t\tfor (let i = 0; i < numChars - 1; i++) {\n\t\t\t\t\t\tif (chars[i] != chars[i+1])\n\t\t\t\t\t\t\tvariants.push(lftChar + chars.slice(0, i) + chars[i+1] + chars[i] + chars.slice(i + 2) + rgtChar);\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\t// variants with single char omissions\n\t\t\t\tif (intraDel) {\n\t\t\t\t\tfor (let i = 0; i < numChars; i++)\n\t\t\t\t\t\tvariants.push(lftChar + chars.slice(0, i + 1) + '?' + chars.slice(i + 1) + rgtChar);\n\t\t\t\t}\n\n\t\t\t\t// variants with single char insertions\n\t\t\t\tif (intraIns) {\n\t\t\t\t\tlet intraInsTpl = lazyRepeat(intraChars, 1);\n\n\t\t\t\t\tfor (let i = 0; i < numChars; i++)\n\t\t\t\t\t\tvariants.push(lftChar + chars.slice(0, i) + intraInsTpl + chars.slice(i) + rgtChar);\n\t\t\t\t}\n\n\t\t\t\tlet reTpl = '(?:' + p + '|' + variants.join('|') + ')' + contrs[pi];\n\n\t\t\t//\tconsole.log(reTpl);\n\n\t\t\t\treturn reTpl;\n\t\t\t});\n\t\t}\n\t\telse {\n\t\t\tlet intraInsTpl = lazyRepeat(intraChars, intraIns);\n\n\t\t\t// capture at char level\n\t\t\tif (capt == 2 && intraIns > 0) {\n\t\t\t\t// sadly, we also have to capture the inter-term junk via parenth-wrapping .*?\n\t\t\t\t// to accum other capture groups' indices for \\b boosting during scoring\n\t\t\t\tintraInsTpl = ')(' + intraInsTpl + ')(';\n\t\t\t}\n\n\t\t\treTpl = parts.map((p, pi) => p.split('').map((c, i, chars) => {\n\t\t\t\t// neg lookahead to prefer matching 'Test' instead of 'tTest' in ManifestTest or fittest\n\t\t\t\t// but skip when search term contains leading repetition (aardvark, aaa)\n\t\t\t\tif (intraIns == 1 && i == 0 && chars.length > 1 && c[i] != c[i+1])\n\t\t\t\t\tc += '(?!' + c + ')';\n\n\t\t\t\treturn c;\n\t\t\t}).join(intraInsTpl) + contrs[pi]);\n\t\t}\n\n\t//\tconsole.log(reTpl);\n\n\t\t// this only helps to reduce initial matches early when they can be detected\n\t\t// TODO: might want a mode 3 that excludes _\n\t\tlet preTpl = interLft == 2 ? mode2Tpl : '';\n\t\tlet sufTpl = interRgt == 2 ? mode2Tpl : '';\n\n\t\tlet interCharsTpl = sufTpl + lazyRepeat(opts.interChars, opts.interIns) + preTpl;\n\n\t\t// capture at word level\n\t\tif (capt > 0) {\n\t\t\tif (interOR) {\n\t\t\t\t// this is basically for doing .matchAll() occurence counting and highlighting without needing permuted ooo needles\n\t\t\t\treTpl = preTpl + '(' + reTpl.join(')' + sufTpl + '|' + preTpl + '(') + ')' + sufTpl;\n\t\t\t}\n\t\t\telse {\n\t\t\t\t// sadly, we also have to capture the inter-term junk via parenth-wrapping .*?\n\t\t\t\t// to accum other capture groups' indices for \\b boosting during scoring\n\t\t\t\treTpl = '(' + reTpl.join(')(' + interCharsTpl + ')(') + ')';\n\t\t\t\treTpl = '(.?' + preTpl + ')' + reTpl + '(' + sufTpl + '.*)'; // nit: trailing capture here assumes interIns = Inf\n\t\t\t}\n\t\t}\n\t\telse {\n\t\t\treTpl = reTpl.join(interCharsTpl);\n\t\t\treTpl = preTpl + reTpl + sufTpl;\n\t\t}\n\n\t//\tconsole.log(reTpl);\n\n\t\treturn [new RegExp(reTpl, 'i'), parts, contrs];\n\t};\n\n\tconst filter = (haystack, needle, idxs) => {\n\n\t\tlet out = [];\n\t\tlet [query] = prepQuery(needle);\n\n\t\tif (idxs != null) {\n\t\t\tfor (let i = 0; i < idxs.length; i++) {\n\t\t\t\tlet idx = idxs[i];\n\t\t\t\tquery.test(haystack[idx]) && out.push(idx);\n\t\t\t}\n\t\t}\n\t\telse {\n\t\t\tfor (let i = 0; i < haystack.length; i++)\n\t\t\t\tquery.test(haystack[i]) && out.push(i);\n\t\t}\n\n\t\treturn out;\n\t};\n\n\tlet withIntraBound = !!_intraBound;\n\n\tlet interBound = new RegExp(_interSplit);\n\tlet intraBound = new RegExp(_intraBound);\n\n\tconst info = (idxs, haystack, needle) => {\n\n\t\tlet [query, parts, contrs] = prepQuery(needle, 1);\n\t\tlet [queryR] = prepQuery(needle, 2);\n\t\tlet partsLen = parts.length;\n\n\t\tlet len = idxs.length;\n\n\t\tlet field = Array(len).fill(0);\n\n\t\tlet info = {\n\t\t\t// idx in haystack\n\t\t\tidx: Array(len),\n\n\t\t\t// start of match\n\t\t\tstart: field.slice(),\n\t\t\t// length of match\n\t\t//\tspan: field.slice(),\n\n\t\t\t// contiguous chars matched\n\t\t\tchars: field.slice(),\n\n\t\t\t// contiguous (no fuzz) and bounded terms (intra=0, lft2/1, rgt2/1)\n\t\t\t// excludes terms that are contiguous but have < 2 bounds (substrings)\n\t\t\tterms: field.slice(),\n\n\t\t\t// cumulative length of unmatched chars (fuzz) within span\n\t\t\tinterIns: field.slice(), // between terms\n\t\t\tintraIns: field.slice(), // within terms\n\n\t\t\t// interLft/interRgt counters\n\t\t\tinterLft2: field.slice(),\n\t\t\tinterRgt2: field.slice(),\n\t\t\tinterLft1: field.slice(),\n\t\t\tinterRgt1: field.slice(),\n\n\t\t\tranges: Array(len),\n\t\t};\n\n\t\t// might discard idxs based on bounds checks\n\t\tlet mayDiscard = interLft == 1 || interRgt == 1;\n\n\t\tlet ii = 0;\n\n\t\tfor (let i = 0; i < idxs.length; i++) {\n\t\t\tlet mhstr = haystack[idxs[i]];\n\n\t\t\t// the matched parts are [full, junk, term, junk, term, junk]\n\t\t\tlet m = mhstr.match(query);\n\n\t\t\t// leading junk\n\t\t\tlet start = m.index + m[1].length;\n\n\t\t\tlet idxAcc = start;\n\t\t//\tlet span = m[0].length;\n\n\t\t\tlet disc = false;\n\t\t\tlet lft2 = 0;\n\t\t\tlet lft1 = 0;\n\t\t\tlet rgt2 = 0;\n\t\t\tlet rgt1 = 0;\n\t\t\tlet chars = 0;\n\t\t\tlet terms = 0;\n\t\t\tlet inter = 0;\n\t\t\tlet intra = 0;\n\n\t\t\tlet refine = [];\n\n\t\t\tfor (let j = 0, k = 2; j < partsLen; j++, k+=2) {\n\t\t\t\tlet group = m[k].toLowerCase();\n\t\t\t\tlet term = parts[j] + contrs[j];\n\t\t\t\tlet termLen = term.length;\n\t\t\t\tlet groupLen = group.length;\n\t\t\t\tlet fullMatch = group == term;\n\n\t\t\t\t// this won't handle the case when an exact match exists across the boundary of the current group and the next junk\n\t\t\t\t// e.g. blob,ob when searching for 'bob' but finding the earlier `blob` (with extra insertion)\n\t\t\t\tif (!fullMatch && m[k+1].length >= termLen) {\n\t\t\t\t\t// probe for exact match in inter junk\n\t\t\t\t\tlet idxOf = m[k+1].toLowerCase().indexOf(term);\n\n\t\t\t\t\tif (idxOf > -1) {\n\t\t\t\t\t\trefine.push(idxAcc, idxOf, termLen);\n\t\t\t\t\t\tidxAcc += refineMatch(m, k, idxOf, termLen);\n\t\t\t\t\t\tgroup = term;\n\t\t\t\t\t\tgroupLen = termLen;\n\t\t\t\t\t\tfullMatch = true;\n\n\t\t\t\t\t\tif (j == 0)\n\t\t\t\t\t\t\tstart = idxAcc;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tif (mayDiscard || fullMatch) {\n\t\t\t\t\t// does group's left and/or right land on \\b\n\t\t\t\t\tlet lftCharIdx = idxAcc - 1;\n\t\t\t\t\tlet rgtCharIdx = idxAcc + groupLen;\n\n\t\t\t\t\tlet isPre = true;\n\t\t\t\t\tlet isSuf = true;\n\n\t\t\t\t\t// prefix info\n\t\t\t\t\tif (lftCharIdx == -1           || interBound.test(mhstr[lftCharIdx]))\n\t\t\t\t\t\tfullMatch && lft2++;\n\t\t\t\t\telse {\n\t\t\t\t\t\tif (interLft == 2) {\n\t\t\t\t\t\t\tdisc = true;\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif (withIntraBound && intraBound.test(mhstr[lftCharIdx] + mhstr[lftCharIdx + 1]))\n\t\t\t\t\t\t\tfullMatch && lft1++;\n\t\t\t\t\t\telse {\n\t\t\t\t\t\t\tif (interLft == 1) {\n\t\t\t\t\t\t\t\t// regexps are eager, so try to improve the match by probing forward inter junk for exact match at a boundary\n\t\t\t\t\t\t\t\tlet junk = m[k+1];\n\t\t\t\t\t\t\t\tlet junkIdx = idxAcc + groupLen;\n\n\t\t\t\t\t\t\t\tif (junk.length >= termLen) {\n\t\t\t\t\t\t\t\t\tlet idxOf = 0;\n\t\t\t\t\t\t\t\t\tlet found = false;\n\t\t\t\t\t\t\t\t\tlet re = new RegExp(term, 'ig');\n\n\t\t\t\t\t\t\t\t\tlet m2;\n\t\t\t\t\t\t\t\t\twhile (m2 = re.exec(junk)) {\n\t\t\t\t\t\t\t\t\t\tidxOf = m2.index;\n\n\t\t\t\t\t\t\t\t\t\tlet charIdx = junkIdx + idxOf;\n\t\t\t\t\t\t\t\t\t\tlet lftCharIdx = charIdx - 1;\n\n\n\t\t\t\t\t\t\t\t\t\tif (lftCharIdx == -1 || interBound.test(mhstr[lftCharIdx])) {\n\t\t\t\t\t\t\t\t\t\t\tlft2++;\n\t\t\t\t\t\t\t\t\t\t\tfound = true;\n\t\t\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\telse if (intraBound.test(mhstr[lftCharIdx] + mhstr[charIdx])) {\n\t\t\t\t\t\t\t\t\t\t\tlft1++;\n\t\t\t\t\t\t\t\t\t\t\tfound = true;\n\t\t\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\tif (found) {\n\t\t\t\t\t\t\t\t\t\t// identical to exact term refinement pass above\n\t\t\t\t\t\t\t\t\t\trefine.push(idxAcc, idxOf, termLen);\n\t\t\t\t\t\t\t\t\t\tidxAcc += refineMatch(m, k, idxOf, termLen);\n\t\t\t\t\t\t\t\t\t\tgroup = term;\n\t\t\t\t\t\t\t\t\t\tgroupLen = termLen;\n\t\t\t\t\t\t\t\t\t\tfullMatch = true;\n\t\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\tdisc = true;\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tisPre = false;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\t// suffix info\n\t\t\t\t\tif (rgtCharIdx == mhstr.length || interBound.test(mhstr[rgtCharIdx]))\n\t\t\t\t\t\tfullMatch && rgt2++;\n\t\t\t\t\telse {\n\t\t\t\t\t\tif (interRgt == 2) {\n\t\t\t\t\t\t\tdisc = true;\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif (withIntraBound && intraBound.test(mhstr[rgtCharIdx - 1] + mhstr[rgtCharIdx]))\n\t\t\t\t\t\t\tfullMatch && rgt1++;\n\t\t\t\t\t\telse {\n\t\t\t\t\t\t\tif (interRgt == 1) {\n\t\t\t\t\t\t\t\tdisc = true;\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tisSuf = false;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\tif (fullMatch) {\n\t\t\t\t\t\tchars += termLen;\n\n\t\t\t\t\t\tif (isPre && isSuf)\n\t\t\t\t\t\t\tterms++;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tif (groupLen > termLen)\n\t\t\t\t\tintra += groupLen - termLen; // intraFuzz\n\n\t\t\t\tif (j > 0)\n\t\t\t\t\tinter += m[k-1].length; // interFuzz\n\n\t\t\t\t// TODO: group here is lowercased, which is okay for length cmp, but not more case-sensitive filts\n\t\t\t\tif (!opts.intraFilt(term, group, idxAcc)) {\n\t\t\t\t\tdisc = true;\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\n\t\t\t\tif (j < partsLen - 1)\n\t\t\t\t\tidxAcc += groupLen + m[k+1].length;\n\t\t\t}\n\n\t\t\tif (!disc) {\n\t\t\t\tinfo.idx[ii]       = idxs[i];\n\t\t\t\tinfo.interLft2[ii] = lft2;\n\t\t\t\tinfo.interLft1[ii] = lft1;\n\t\t\t\tinfo.interRgt2[ii] = rgt2;\n\t\t\t\tinfo.interRgt1[ii] = rgt1;\n\t\t\t\tinfo.chars[ii]     = chars;\n\t\t\t\tinfo.terms[ii]     = terms;\n\t\t\t\tinfo.interIns[ii]  = inter;\n\t\t\t\tinfo.intraIns[ii]  = intra;\n\n\t\t\t\tinfo.start[ii] = start;\n\t\t\t//\tinfo.span[ii] = span;\n\n\t\t\t\t// ranges\n\t\t\t\tlet m = mhstr.match(queryR);\n\t\t\t\tlet ranges = info.ranges[ii] = [];\n\n\t\t\t\tlet idxAcc = m.index + m[1].length;\n\t\t\t\tlet from = idxAcc;\n\t\t\t\tlet to = idxAcc;\n\n\t\t\t\tlet refLen = refine.length;\n\t\t\t\tlet ri = refLen > 0 ? 0 : Infinity;\n\t\t\t\tlet lastRi = refLen - 3;\n\n\t\t\t\tfor (let i = 2; i < m.length; i++) {\n\t\t\t\t\tlet len = m[i].length;\n\n\t\t\t\t\tif (ri <= lastRi && refine[ri] == idxAcc) {\n\t\t\t\t\t\tlet idxInNext = refine[ri+1];\n\t\t\t\t\t\tlet matchLen = refine[ri+2];\n\t\t\t\t\t\tlet offset = idxInNext + matchLen;\n\n\t\t\t\t\t\tidxAcc += len + offset;\n\t\t\t\t\t\tfrom = idxAcc - matchLen;\n\t\t\t\t\t\tm[i+1] = m[i+1].slice(offset);\n\n\t\t\t\t\t\tri+=3;\n\t\t\t\t\t}\n\t\t\t\t\telse\n\t\t\t\t\t\tidxAcc += len;\n\n\t\t\t\t\tif (i % 2 == 0)\n\t\t\t\t\t\tto = idxAcc;\n\t\t\t\t\telse if (len > 0) {\n\t\t\t\t\t\tranges.push(from, to);\n\t\t\t\t\t\tfrom = to = idxAcc;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tif (to > from)\n\t\t\t\t\tranges.push(from, to);\n\n\t\t\t\tii++;\n\t\t\t}\n\t\t}\n\n\t\t// trim arrays\n\t\tif (ii < idxs.length) {\n\t\t\tfor (let k in info)\n\t\t\t\tinfo[k] = info[k].slice(0, ii);\n\t\t}\n\n\t\treturn info;\n\t};\n\n\tconst refineMatch = (m, k, idxInNext, termLen) => {\n\t\t// shift the current group into the prior junk\n\t\tlet prepend = m[k] + m[k+1].slice(0, idxInNext);\n\t\tm[k-1] += prepend;\n\t\tm[k]    = m[k+1].slice(idxInNext, idxInNext + termLen);\n\t\tm[k+1]  = m[k+1].slice(idxInNext + termLen);\n\t\treturn prepend.length;\n\t};\n\n\t// returns [idxs, info, order]\n\tconst _search = (haystack, needle, outOfOrder = false, infoThresh = 1e3, preFiltered) => {\n\t\tlet needles = null;\n\t\tlet matches = null;\n\n\t\tlet negs = [];\n\n\t\tneedle = needle.replace(NEGS_RE, m => {\n\t\t\tnegs.push(m.trim().slice(1));\n\t\t\treturn '';\n\t\t});\n\n\t\tlet negsRe;\n\n\t\tif (negs.length > 0) {\n\t\t\tnegsRe = new RegExp(negs.join('|'), 'i');\n\n\t\t\tif (needle.trim() == '') {\n\t\t\t\tlet idxs = [];\n\n\t\t\t\tfor (let i = 0; i < haystack.length; i++) {\n\t\t\t\t\tif (!negsRe.test(haystack[i]))\n\t\t\t\t\t\tidxs.push(i);\n\t\t\t\t}\n\n\t\t\t\treturn [idxs, null, null];\n\t\t\t}\n\t\t}\n\n\t//\tconsole.log(negs);\n\t//\tconsole.log(needle);\n\n\t\tif (outOfOrder) {\n\t\t\t// since uFuzzy is an AND-based search, we can iteratively pre-reduce the haystack by searching\n\t\t\t// for each term in isolation before running permutations on what's left.\n\t\t\t// this is a major perf win. e.g. searching \"test man ger pp a\" goes from 570ms -> 14ms\n\t\t\tlet terms = split(needle);\n\n\t\t\tif (terms.length > 1) {\n\t\t\t\t// longest -> shortest\n\t\t\t\tlet terms2 = terms.slice().sort((a, b) => b.length - a.length);\n\n\t\t\t\tfor (let ti = 0; ti < terms2.length; ti++) {\n\t\t\t\t\t// no haystack item contained all terms\n\t\t\t\t\tif (preFiltered && preFiltered.length == 0)\n\t\t\t\t\t\treturn [[], null, null];\n\n\t\t\t\t\tpreFiltered = filter(haystack, terms2[ti], preFiltered);\n\t\t\t\t}\n\n\t\t\t\tneedles = permute(terms).map(perm => perm.join(' '));\n\n\t\t\t\t// filtered matches for each needle excluding same matches for prior needles\n\t\t\t\tmatches = [];\n\n\t\t\t\t// keeps track of already-matched idxs to skip in follow-up permutations\n\t\t\t\tlet matchedIdxs = new Set();\n\n\t\t\t\tfor (let ni = 0; ni < needles.length; ni++) {\n\t\t\t\t\tif (matchedIdxs.size < preFiltered.length) {\n\t\t\t\t\t\t// filter further for this needle, exclude already-matched\n\t\t\t\t\t\tlet preFiltered2 = preFiltered.filter(idx => !matchedIdxs.has(idx));\n\n\t\t\t\t\t\tlet matched = filter(haystack, needles[ni], preFiltered2);\n\n\t\t\t\t\t\tfor (let j = 0; j < matched.length; j++)\n\t\t\t\t\t\t\tmatchedIdxs.add(matched[j]);\n\n\t\t\t\t\t\tmatches.push(matched);\n\t\t\t\t\t}\n\t\t\t\t\telse\n\t\t\t\t\t\tmatches.push([]);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\t// interOR\n\t//\tconsole.log(prepQuery(needle, 1, null, true));\n\n\t\t// non-ooo or ooo w/single term\n\t\tif (needles == null) {\n\t\t\tneedles = [needle];\n\t\t\tmatches = [preFiltered && preFiltered.length > 0 ? preFiltered : filter(haystack, needle)];\n\t\t}\n\n\t\tlet retInfo = null;\n\t\tlet retOrder = null;\n\n\t\tif (negs.length > 0)\n\t\t\tmatches = matches.map(idxs => idxs.filter(idx => !negsRe.test(haystack[idx])));\n\n\t\tlet matchCount = matches.reduce((acc, idxs) => acc + idxs.length, 0);\n\n\t\t// rank, sort, concat\n\t\tif (matchCount <= infoThresh) {\n\t\t\tretInfo = {};\n\t\t\tretOrder = [];\n\n\t\t\tfor (let ni = 0; ni < matches.length; ni++) {\n\t\t\t\tlet idxs = matches[ni];\n\n\t\t\t\tif (idxs == null || idxs.length == 0)\n\t\t\t\t\tcontinue;\n\n\t\t\t\tlet needle = needles[ni];\n\t\t\t\tlet _info = info(idxs, haystack, needle);\n\t\t\t\tlet order = opts.sort(_info, haystack, needle);\n\n\t\t\t\t// offset idxs for concat'ing infos\n\t\t\t\tif (ni > 0) {\n\t\t\t\t\tfor (let i = 0; i < order.length; i++)\n\t\t\t\t\t\torder[i] += retOrder.length;\n\t\t\t\t}\n\n\t\t\t\tfor (let k in _info) {\n\t\t\t\t\tretInfo[k] = (retInfo[k] ? retInfo[k] : []).concat(_info[k]);\n                }\n\n\t\t\t\tretOrder = retOrder.concat(order);\n\t\t\t}\n\t\t}\n\n\t\treturn [\n\t\t\t[].concat(...matches),\n\t\t\tretInfo,\n\t\t\tretOrder,\n\t\t];\n\t};\n\n\treturn {\n\t\tsearch: (...args) => {\n\t\t\tlet out = _search(...args);\n\t\t\treturn out;\n\t\t},\n\t\tsplit,\n\t\tfilter,\n\t\tinfo,\n\t\tsort: opts.sort,\n\t};\n}\n\nconst latinize = (() => {\n\tlet accents = {\n\t\tA: '',\n\t\ta: '',\n\t\tE: '',\n\t\te: '',\n\t\tI: '',\n\t\ti: '',\n\t\tO: '',\n\t\to: '',\n\t\tU: '',\n\t\tu: '',\n\t\tC: '',\n\t\tc: '',\n\t\tN: '',\n\t\tn: '',\n\t\tS: '',\n\t\ts: ''\n\t};\n\n\tlet accentsMap = new Map();\n\tlet accentsTpl = '';\n\n\tfor (let r in accents) {\n\t\taccents[r].split('').forEach(a => {\n\t\t\taccentsTpl += a;\n\t\t\taccentsMap.set(a, r);\n\t\t});\n\t}\n\n\tlet accentsRe = new RegExp(`[${accentsTpl}]`, 'g');\n\tlet replacer = m => accentsMap.get(m);\n\n\treturn strings => {\n\t\tif (typeof strings == 'string')\n\t\t\treturn strings.replace(accentsRe, replacer);\n\n\t\tlet out = Array(strings.length);\n\t\tfor (let i = 0; i < strings.length; i++)\n\t\t\tout[i] = strings[i].replace(accentsRe, replacer);\n\t\treturn out;\n\t};\n})();\n\n// https://stackoverflow.com/questions/9960908/permutations-in-javascript/37580979#37580979\nfunction permute(arr) {\n\tarr = arr.slice();\n\n\tlet length = arr.length,\n\t\tresult = [arr.slice()],\n\t\tc = new Array(length).fill(0),\n\t\ti = 1, k, p;\n\n\twhile (i < length) {\n\t\tif (c[i] < i) {\n\t\t\tk = i % 2 && c[i];\n\t\t\tp = arr[i];\n\t\t\tarr[i] = arr[k];\n\t\t\tarr[k] = p;\n\t\t\t++c[i];\n\t\t\ti = 1;\n\t\t\tresult.push(arr.slice());\n\t\t} else {\n\t\t\tc[i] = 0;\n\t\t\t++i;\n\t\t}\n\t}\n\n\treturn result;\n}\n\nconst _mark = (part, matched) => matched ? `<mark>${part}</mark>` : part;\nconst _append = (acc, part) => acc + part;\n\nfunction highlight(str, ranges, mark = _mark, accum = '', append = _append) {\n    let tmp = append(accum, mark(str.substring(0, ranges[0]), false));\n\taccum = tmp !== null ? tmp : accum;\n\n\tfor (let i = 0; i < ranges.length; i+=2) {\n\t\tlet fr = ranges[i];\n\t\tlet to = ranges[i+1];\n\n        tmp = append(accum, mark(str.substring(fr, to), true));\n\t\taccum = tmp !== null ? tmp : accum;\n\n\t\tif (i < ranges.length - 3) {\n            tmp = append(accum, mark(str.substring(ranges[i + 1], ranges[i + 2]), false));\n            accum = tmp !== null ? tmp : accum;\n        }\n\t}\n\n    tmp = append(accum, mark(str.substring(ranges[ranges.length - 1]), false));\n\taccum = tmp !== null ? tmp : accum;\n\n\treturn accum;\n}\n\nuFuzzy.latinize = latinize;\nuFuzzy.permute = arr => {\n\tlet idxs = permute([...Array(arr.length).keys()]).sort((a,b) => {\n\t\tfor (let i = 0; i < a.length; i++) {\n\t\t\tif (a[i] != b[i])\n\t\t\t\treturn a[i] - b[i];\n\t\t}\n\t\treturn 0;\n\t});\n\n\treturn idxs.map(pi => pi.map(i => arr[i]));\n};\nuFuzzy.highlight = highlight;\n\nexport { uFuzzy as default };\n","import uFuzzy from '@leeoniya/ufuzzy';\n\n// See https://github.com/leeoniya/uFuzzy#options\nconst uf = new uFuzzy({\n    intraMode: 1,\n    intraIns: 1,\n    intraSub: 1,\n    intraTrn: 1,\n    intraDel: 1,\n});\n\nfunction sortCommands(\n    a: ProcessedCommandItem,\n    b: ProcessedCommandItem,\n    favouriteCommands: CommandId[],\n    recentCommands: CommandId[]\n): number {\n    // Sort by recent first\n    const aIsRecent = recentCommands.includes(a.id);\n    const bIsRecent = recentCommands.includes(b.id);\n\n    if (aIsRecent && !bIsRecent) {\n        return -1;\n    }\n\n    if (!aIsRecent && bIsRecent) {\n        return 1;\n    }\n\n    if (aIsRecent && bIsRecent) {\n        return recentCommands.indexOf(a.id) - recentCommands.indexOf(b.id);\n    }\n\n    // Sort by favourites second\n    const aIsFavourite = favouriteCommands.includes(a.id);\n    const bIsFavourite = favouriteCommands.includes(b.id);\n\n    if (aIsFavourite && !bIsFavourite) {\n        return -1;\n    }\n\n    if (!aIsFavourite && bIsFavourite) {\n        return 1;\n    }\n\n    // Sort by name third\n    return a.name.localeCompare(b.name);\n}\n\nexport default function filterCommands(\n    selectedCommandGroup: CommandId,\n    searchWord: string,\n    commands: FlatCommandList,\n    favourites: CommandId[],\n    recentCommands: CommandId[]\n): CommandId[] {\n    // If there is a search word, return all commands to allow deep search\n    // If no search word is given, return all commands in the currently selected group or all recent commands if no group is selected\n    let availableCommands = Object.values(commands);\n    availableCommands = searchWord\n        ? availableCommands\n        : availableCommands.filter(\n              (command) =>\n                  command.parentId === selectedCommandGroup ||\n                  (!selectedCommandGroup && recentCommands.includes(command.id))\n          );\n\n    // If there is no search word, return all commands in the current context with favourites first\n    if (!searchWord) {\n        return availableCommands\n            .sort((a, b) => sortCommands(a, b, favourites, recentCommands))\n            .map((command) => command.id);\n    }\n\n    // Create a list of all available commands with their name and description as haystack for the search\n    const availableCommandNames = availableCommands.map(({ name, description }) => name + ' ' + description);\n    const [idxs, , order] = uf.search(availableCommandNames, searchWord.toLowerCase());\n    const matchingIds = order.map((i) => availableCommands[idxs[i]].id);\n\n    // Add all commands that can handle queries to the result, the Set removes duplicates\n    return [\n        ...new Set([\n            ...matchingIds,\n            ...availableCommands.filter((command) => command.canHandleQueries).map((command) => command.id),\n        ]),\n    ];\n}\n","export default function assert(condition: unknown, message = 'Assertion failed'): asserts condition {\n    if (condition === false) throw Error(message);\n}\n","export default function classnames(...args: Array<string | undefined>): string {\n    return args.filter(Boolean).join(' ');\n}\n","import { logger } from '../helpers';\n\nexport enum STATUS {\n    COLLAPSED = 'collapsed',\n    IDLE = 'idle',\n    EXECUTING_COMMAND = 'executingCommand',\n    DISPLAYING_RESULT = 'displayingResult',\n}\n\nexport enum TRANSITION {\n    RESET_SEARCH = 'RESET_SEARCH',\n    HIGHLIGHT_NEXT_ITEM = 'HIGHLIGHT_NEXT_ITEM',\n    HIGHLIGHT_PREVIOUS_ITEM = 'HIGHLIGHT_PREVIOUS_ITEM',\n    CANCEL = 'CANCEL',\n    SELECT_GROUP = 'SELECT_GROUP',\n    GO_TO_PARENT_GROUP = 'GO_TO_PARENT_GROUP',\n    UPDATE_SEARCH = 'UPDATE_SEARCH',\n    UPDATE_COMMAND_QUERY = 'UPDATE_COMMAND_QUERY',\n    EXECUTE_COMMAND = 'EXECUTE_COMMAND',\n    FINISH_COMMAND = 'FINISH_COMMAND',\n    UPDATE_RESULT = 'UPDATE_RESULT',\n    EXPAND = 'EXPAND',\n    ADD_FAVOURITE = 'ADD_FAVOURITE',\n    REMOVE_FAVOURITE = 'REMOVE_FAVOURITE',\n}\n\nexport enum ACTION {\n    ADD_FAVOURITE = 'ADD_FAVOURITE',\n    ADD_RECENTLY_USED = 'ADD_RECENTLY_USED',\n    EXPAND = 'EXPAND',\n    HIGHLIGHT_NEXT_COMMAND = 'HIGHLIGHT_NEXT_COMMAND',\n    HIGHLIGHT_NEXT_OPTION = 'HIGHLIGHT_NEXT_OPTION',\n    HIGHLIGHT_PREVIOUS_COMMAND = 'HIGHLIGHT_PREVIOUS_COMMAND',\n    HIGHLIGHT_PREVIOUS_OPTION = 'HIGHLIGHT_PREVIOUS_OPTION',\n    LEAVE_GROUP = 'LEAVE_GROUP',\n    REFRESH_COMMANDS = 'REFRESH_COMMANDS',\n    REMOVE_FAVOURITE = 'REMOVE_FAVOURITE',\n    RESET_HIGHLIGHT = 'RESET_HIGHLIGHT',\n    RESET_OPTION_HIGHLIGHT = 'RESET_OPTION_HIGHLIGHT',\n    RESET_SEARCH = 'RESET_SEARCH',\n    RESET_SEARCH_OR_LEAVE_GROUP = 'RESET_SEARCH_OR_LEAVE_GROUP',\n    SET_ACTIVE_COMMAND = 'SET_ACTIVE_COMMAND',\n    SET_COMMAND_QUERY = 'SET_COMMAND_QUERY',\n    SET_GROUP = 'SET_GROUP',\n    SET_SEARCH_WORD = 'SET_SEARCH_WORD',\n    UNSET_ACTIVE_COMMAND = 'UNSET_ACTIVE_COMMAND',\n    UNSET_RESULT = 'UNSET_RESULT',\n    UPDATE_RESULT = 'UPDATE_RESULT',\n}\n\ninterface MachineDefinition {\n    initial: STATUS;\n    states: {\n        [state in STATUS]: {\n            on: {\n                [transition in TRANSITION]?:\n                    | STATUS\n                    | {\n                          target: STATUS;\n                          actions?: ACTION[];\n                      };\n            };\n        };\n    };\n}\n\nexport const machine: MachineDefinition = {\n    initial: STATUS.COLLAPSED,\n    states: {\n        collapsed: {\n            on: {\n                UPDATE_SEARCH: {\n                    target: STATUS.IDLE,\n                    actions: [ACTION.EXPAND, ACTION.SET_SEARCH_WORD, ACTION.REFRESH_COMMANDS],\n                },\n                HIGHLIGHT_NEXT_ITEM: {\n                    target: STATUS.IDLE,\n                    actions: [ACTION.REFRESH_COMMANDS, ACTION.EXPAND],\n                },\n                EXPAND: {\n                    target: STATUS.IDLE,\n                    actions: [ACTION.REFRESH_COMMANDS, ACTION.EXPAND],\n                },\n            },\n        },\n        idle: {\n            on: {\n                UPDATE_SEARCH: {\n                    target: STATUS.IDLE,\n                    actions: [ACTION.SET_SEARCH_WORD, ACTION.RESET_HIGHLIGHT, ACTION.REFRESH_COMMANDS],\n                },\n                HIGHLIGHT_NEXT_ITEM: {\n                    target: STATUS.IDLE,\n                    actions: [ACTION.HIGHLIGHT_NEXT_COMMAND],\n                },\n                HIGHLIGHT_PREVIOUS_ITEM: {\n                    target: STATUS.IDLE,\n                    actions: [ACTION.HIGHLIGHT_PREVIOUS_COMMAND],\n                },\n                CANCEL: {\n                    target: STATUS.IDLE,\n                    actions: [ACTION.RESET_HIGHLIGHT, ACTION.RESET_SEARCH_OR_LEAVE_GROUP, ACTION.REFRESH_COMMANDS],\n                },\n                EXECUTE_COMMAND: {\n                    target: STATUS.EXECUTING_COMMAND,\n                    actions: [ACTION.ADD_RECENTLY_USED, ACTION.SET_ACTIVE_COMMAND, ACTION.REFRESH_COMMANDS],\n                },\n                GO_TO_PARENT_GROUP: {\n                    target: STATUS.IDLE,\n                    actions: [ACTION.RESET_HIGHLIGHT, ACTION.LEAVE_GROUP, ACTION.REFRESH_COMMANDS],\n                },\n                SELECT_GROUP: {\n                    target: STATUS.IDLE,\n                    actions: [ACTION.RESET_SEARCH, ACTION.RESET_HIGHLIGHT, ACTION.SET_GROUP, ACTION.REFRESH_COMMANDS],\n                },\n                ADD_FAVOURITE: {\n                    target: STATUS.IDLE,\n                    actions: [ACTION.ADD_FAVOURITE, ACTION.REFRESH_COMMANDS],\n                },\n                REMOVE_FAVOURITE: {\n                    target: STATUS.IDLE,\n                    actions: [ACTION.REMOVE_FAVOURITE, ACTION.REFRESH_COMMANDS],\n                },\n            },\n        },\n        executingCommand: {\n            on: {\n                UPDATE_RESULT: {\n                    target: STATUS.DISPLAYING_RESULT,\n                    actions: [ACTION.UPDATE_RESULT],\n                },\n                FINISH_COMMAND: {\n                    target: STATUS.IDLE,\n                    actions: [ACTION.UNSET_ACTIVE_COMMAND],\n                },\n            },\n        },\n        displayingResult: {\n            on: {\n                UPDATE_COMMAND_QUERY: {\n                    target: STATUS.DISPLAYING_RESULT,\n                    actions: [ACTION.SET_COMMAND_QUERY],\n                },\n                UPDATE_RESULT: {\n                    target: STATUS.DISPLAYING_RESULT,\n                    actions: [ACTION.UPDATE_RESULT, ACTION.RESET_OPTION_HIGHLIGHT],\n                },\n                HIGHLIGHT_NEXT_ITEM: {\n                    target: STATUS.DISPLAYING_RESULT,\n                    actions: [ACTION.HIGHLIGHT_NEXT_OPTION],\n                },\n                HIGHLIGHT_PREVIOUS_ITEM: {\n                    target: STATUS.DISPLAYING_RESULT,\n                    actions: [ACTION.HIGHLIGHT_PREVIOUS_OPTION],\n                },\n                EXECUTE_COMMAND: {\n                    target: STATUS.DISPLAYING_RESULT,\n                    actions: [ACTION.SET_ACTIVE_COMMAND],\n                },\n                CANCEL: {\n                    target: STATUS.IDLE,\n                    actions: [ACTION.UNSET_RESULT, ACTION.UNSET_ACTIVE_COMMAND, ACTION.RESET_OPTION_HIGHLIGHT],\n                },\n                FINISH_COMMAND: {\n                    target: STATUS.DISPLAYING_RESULT,\n                    actions: [ACTION.UNSET_ACTIVE_COMMAND],\n                },\n            },\n        },\n    },\n};\n\nexport interface MachineState {\n    status: STATUS;\n}\n\ntype MachineEvent = {\n    type: TRANSITION;\n    payload?: any;\n};\n\nexport function transition(\n    state: MachineState,\n    event: MachineEvent,\n    actionCallback?: (action: ACTION, nextState: MachineState, event: MachineEvent) => void\n): MachineState {\n    let nextStateNode = machine.states[state.status].on?.[event.type] ?? null;\n\n    if (!nextStateNode) {\n        logger.error(`No transition found for event \"${event.type}\" in state \"${state.status}\"`);\n        nextStateNode = { target: state.status };\n    }\n\n    const nextState = {\n        ...state,\n        status: typeof nextStateNode == 'string' ? nextStateNode : nextStateNode.target,\n    } as MachineState;\n\n    if (actionCallback && typeof nextStateNode == 'object') {\n        nextStateNode.actions?.forEach((action) => actionCallback(action, nextState, event));\n    }\n\n    logger.debug(`Transitioned from \"${state.status}\" to \"${nextState.status}\" with event \"${event.type}\"`);\n\n    return nextState;\n}\n","import { assert, clamp, filterCommands } from '../helpers';\nimport { ACTION, MachineState, TRANSITION, transition } from './commandBarMachine';\n\nexport type CommandBarEvent =\n    | { type: TRANSITION.RESET_SEARCH }\n    | { type: TRANSITION.HIGHLIGHT_NEXT_ITEM }\n    | { type: TRANSITION.HIGHLIGHT_PREVIOUS_ITEM }\n    | { type: TRANSITION.CANCEL }\n    | { type: TRANSITION.SELECT_GROUP; commandId: string }\n    | { type: TRANSITION.GO_TO_PARENT_GROUP }\n    | { type: TRANSITION.UPDATE_SEARCH; searchWord: string }\n    | { type: TRANSITION.UPDATE_COMMAND_QUERY; commandQuery: string }\n    | { type: TRANSITION.EXECUTE_COMMAND; commandId: CommandId; message: string }\n    | { type: TRANSITION.FINISH_COMMAND }\n    | { type: TRANSITION.UPDATE_RESULT; result: CommandResult }\n    | { type: TRANSITION.EXPAND }\n    | { type: TRANSITION.ADD_FAVOURITE; commandId: CommandId }\n    | { type: TRANSITION.REMOVE_FAVOURITE; commandId: CommandId };\n\nexport type CommandBarState = MachineState & {\n    activeCommandId: CommandId;\n    activeCommandMessage: string;\n    availableCommandIds: CommandId[];\n    commandQuery: string;\n    commands: FlatCommandList;\n    expanded: boolean;\n    favouriteCommands: CommandId[];\n    highlightedItem: number;\n    highlightedOption: number;\n    recentCommands: CommandId[];\n    result: CommandResult | null;\n    resultCommandId: CommandId;\n    searchWord: string;\n    selectedCommandGroup: CommandId;\n    showBranding: boolean;\n};\n\nconst MAX_RECENTLY_USED = 5;\n\nfunction runAction(action: ACTION, nextState: CommandBarState, event: CommandBarEvent) {\n    switch (action) {\n        case ACTION.RESET_SEARCH:\n            nextState.searchWord = '';\n            nextState.commandQuery = '';\n            break;\n        case ACTION.RESET_HIGHLIGHT:\n            nextState.highlightedItem = 0;\n            break;\n        case ACTION.REFRESH_COMMANDS:\n            nextState.availableCommandIds = filterCommands(\n                nextState.selectedCommandGroup,\n                nextState.searchWord,\n                nextState.commands,\n                nextState.favouriteCommands,\n                nextState.recentCommands\n            );\n            break;\n        case ACTION.HIGHLIGHT_NEXT_COMMAND:\n            nextState.highlightedItem = clamp(\n                nextState.highlightedItem + 1,\n                0,\n                nextState.availableCommandIds.length - 1\n            );\n            break;\n        case ACTION.HIGHLIGHT_PREVIOUS_COMMAND:\n            nextState.highlightedItem = clamp(\n                nextState.highlightedItem - 1,\n                0,\n                nextState.availableCommandIds.length - 1\n            );\n            break;\n        case ACTION.HIGHLIGHT_NEXT_OPTION:\n            nextState.highlightedOption = clamp(\n                nextState.highlightedOption + 1,\n                0,\n                Object.keys(nextState.result.options).length - 1\n            );\n            break;\n        case ACTION.HIGHLIGHT_PREVIOUS_OPTION:\n            nextState.highlightedOption = clamp(\n                nextState.highlightedOption - 1,\n                0,\n                Object.keys(nextState.result.options).length - 1\n            );\n            break;\n        case ACTION.SET_SEARCH_WORD:\n            assert(event.type === TRANSITION.UPDATE_SEARCH);\n            nextState.searchWord = event.searchWord;\n            break;\n        case ACTION.SET_COMMAND_QUERY:\n            assert(event.type === TRANSITION.UPDATE_COMMAND_QUERY);\n            nextState.commandQuery = event.commandQuery;\n            break;\n        case ACTION.EXPAND:\n            nextState.expanded = true;\n            break;\n        case ACTION.SET_ACTIVE_COMMAND:\n            assert(event.type === TRANSITION.EXECUTE_COMMAND);\n            nextState.activeCommandId = event.commandId;\n            nextState.activeCommandMessage = event.message;\n            break;\n        case ACTION.UNSET_ACTIVE_COMMAND:\n            nextState.activeCommandId = null;\n            nextState.activeCommandMessage = null;\n            break;\n        case ACTION.UPDATE_RESULT:\n            assert(event.type === TRANSITION.UPDATE_RESULT);\n            assert(typeof event.result.success === 'boolean');\n            nextState.result = {\n                options: {},\n                message: 'Command executed',\n                view: null,\n                success: false,\n                ...event.result,\n            };\n            nextState.resultCommandId = nextState.activeCommandId;\n            break;\n        case ACTION.RESET_OPTION_HIGHLIGHT:\n            nextState.highlightedOption = 0;\n            break;\n        case ACTION.RESET_SEARCH_OR_LEAVE_GROUP:\n            if (nextState.commandQuery) {\n                nextState.commandQuery = '';\n            } else if (nextState.searchWord) {\n                nextState.searchWord = '';\n            } else {\n                nextState.selectedCommandGroup = nextState.selectedCommandGroup\n                    ? nextState.commands[nextState.selectedCommandGroup].parentId\n                    : null;\n            }\n            break;\n        case ACTION.UNSET_RESULT:\n            nextState.result = null;\n            nextState.resultCommandId = null;\n            break;\n        case ACTION.LEAVE_GROUP:\n            nextState.selectedCommandGroup = nextState.selectedCommandGroup\n                ? nextState.commands[nextState.selectedCommandGroup].parentId\n                : null;\n            break;\n        case ACTION.SET_GROUP:\n            assert(event.type === TRANSITION.SELECT_GROUP);\n            nextState.selectedCommandGroup = event.commandId;\n            break;\n        case ACTION.ADD_FAVOURITE:\n            assert(event.type === TRANSITION.ADD_FAVOURITE);\n            if (!nextState.favouriteCommands.includes(event.commandId)) {\n                nextState.favouriteCommands.push(event.commandId);\n            }\n            break;\n        case ACTION.REMOVE_FAVOURITE:\n            assert(event.type === TRANSITION.REMOVE_FAVOURITE);\n            nextState.favouriteCommands = nextState.favouriteCommands.filter((id) => id !== event.commandId);\n            break;\n        case ACTION.ADD_RECENTLY_USED:\n            assert(event.type === TRANSITION.EXECUTE_COMMAND);\n            // Only add to recently used if the command has an action\n            if (!nextState.commands[event.commandId].action) {\n                break;\n            }\n            if (nextState.recentCommands.includes(event.commandId)) {\n                nextState.recentCommands = nextState.recentCommands.filter((id) => id !== event.commandId);\n            }\n            nextState.recentCommands.unshift(event.commandId);\n            if (nextState.recentCommands.length > MAX_RECENTLY_USED) {\n                nextState.recentCommands.pop();\n            }\n            break;\n        default:\n            throw Error(`Action ${action} not implemented`);\n    }\n}\n\nconst commandBarReducer = (state: CommandBarState, event: CommandBarEvent): CommandBarState => {\n    return transition(state, event, runAction) as CommandBarState;\n};\n\nexport { commandBarReducer };\n","import React from 'react';\n\nimport * as styles from './IconWrapper.module.css';\n\ntype IconWrapperProps = {\n    children: JSX.Element;\n};\n\nconst IconWrapper: React.FC<IconWrapperProps> = ({ children }) => {\n    return <span className={styles.iconWrap}>{children}</span>;\n};\n\nexport default React.memo(IconWrapper);\n",".iconWrap {\n    width: var(--icon-size);\n    max-height: var(--icon-size);\n    display: inline-block;\n    text-align: center;\n}\n\n.iconWrap svg {\n    max-width: 100%;\n    max-height: inherit;\n    display: inline-block;\n}\n","import React from 'react';\nimport { useCommandBarState, useIntl } from '../../state';\n\nimport * as styles from './Branding.module.css';\n\nconst Branding: React.FC = () => {\n    const {\n        state: { showBranding },\n    } = useCommandBarState();\n    const { translate } = useIntl();\n\n    if (!showBranding) return null;\n\n    return (\n        <a\n            href=\"https://helzle.it\"\n            title={translate('CommandBarFooter.branding', 'Made with love by Sebastian Helzle')}\n            target=\"_blank\"\n            rel=\"noreferrer noopener\"\n            className={styles.madeWithLove}\n        >\n            <small>{translate('CommandBarFooter.brandingSmall', 'Made with love by')}</small>\n            <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"18\" height=\"18\" viewBox=\"0 0 180 180\">\n                <defs>\n                    <linearGradient\n                        id=\"a\"\n                        gradientUnits=\"userSpaceOnUse\"\n                        x1=\"280.25\"\n                        y1=\"377.003\"\n                        x2=\"373.261\"\n                        y2=\"377.003\"\n                    >\n                        <stop offset=\"0\" stopColor=\"#297AAC\" />\n                        <stop offset=\"1\" stopColor=\"#53AADA\" />\n                    </linearGradient>\n                </defs>\n                <path\n                    d=\"M0 180.017h37.287L71.35 52.898H34.061zM48.717 0l-9.083 33.898h36.675L85.392 0z\"\n                    fill=\"#B9B7B3\"\n                />\n                <path\n                    d=\"M335.972 313.444H288.25l-8 28.306h47.691l-28.03 98.813h39.287l34.063-127.119z\"\n                    fill=\"url(#a)\"\n                    transform=\"translate(-195.462 -260.325)\"\n                />\n            </svg>\n        </a>\n    );\n};\n\nexport default React.memo(Branding);\n",".madeWithLove {\n    display: flex;\n    text-decoration: none;\n    gap: 0.5rem;\n}\n\n.madeWithLove small {\n    transition: color 0.1s ease-in-out;\n}\n\n.madeWithLove:hover small {\n    color: var(--color-light-text-hover);\n}\n\n.madeWithLove svg {\n    display: inline-block;\n    width: var(--icon-size);\n    height: auto;\n}\n","import React from 'react';\n\nexport function IconBack() {\n    return (\n        <svg viewBox=\"0 0 448 512\">\n            <path\n                fill=\"currentColor\"\n                d=\"m257.5 445.1-22.2 22.2c-9.4 9.4-24.6 9.4-33.9 0L7 273c-9.4-9.4-9.4-24.6 0-33.9L201.4 44.7c9.4-9.4 24.6-9.4 33.9 0l22.2 22.2c9.5 9.5 9.3 25-.4 34.3L136.6 216H424c13.3 0 24 10.7 24 24v32c0 13.3-10.7 24-24 24H136.6l120.5 114.8c9.8 9.3 10 24.8.4 34.3z\"\n            />\n        </svg>\n    );\n}\n","import React from 'react';\n\nexport function IconNeos() {\n    return (\n        <svg viewBox=\"0 0 512 512\">\n            <path\n                fill=\"currentColor\"\n                d=\"M415.44 512h-95.11L212.12 357.46v91.1L125.69 512H28V29.82L68.47 0h108.05l123.74 176.13V63.45L386.69 0h97.69v461.5zM38.77 35.27V496l72-52.88V194l215.5 307.64h84.79l52.35-38.17h-78.27L69 13zm82.54 466.61 80-58.78v-101l-79.76-114.4v220.94L49 501.89h72.34zM80.63 10.77l310.6 442.57h82.37V10.77h-79.75v317.56L170.91 10.77zM311 191.65l72 102.81V15.93l-72 53v122.72z\"\n            />\n        </svg>\n    );\n}\n","import React from 'react';\n\nexport function IconSpinner() {\n    return (\n        <svg viewBox=\"0 0 512 512\">\n            <path\n                fill=\"currentColor\"\n                d=\"M288 39.056v16.659c0 10.804 7.281 20.159 17.686 23.066C383.204 100.434 440 171.518 440 256c0 101.689-82.295 184-184 184-101.689 0-184-82.295-184-184 0-84.47 56.786-155.564 134.312-177.219C216.719 75.874 224 66.517 224 55.712V39.064c0-15.709-14.834-27.153-30.046-23.234C86.603 43.482 7.394 141.206 8.003 257.332c.72 137.052 111.477 246.956 248.531 246.667C393.255 503.711 504 392.788 504 256c0-115.633-79.14-212.779-186.211-240.236C302.678 11.889 288 23.456 288 39.056z\"\n            />\n        </svg>\n    );\n}\n","import React from 'react';\n\nexport function IconStar() {\n    return (\n        <svg viewBox=\"0 0 576 512\">\n            <path\n                fill=\"currentColor\"\n                d=\"M528.1 171.5 382 150.2 316.7 17.8c-11.7-23.6-45.6-23.9-57.4 0L194 150.2 47.9 171.5c-26.2 3.8-36.7 36.1-17.7 54.6l105.7 103-25 145.5c-4.5 26.3 23.2 46 46.4 33.7L288 439.6l130.7 68.7c23.2 12.2 50.9-7.4 46.4-33.7l-25-145.5 105.7-103c19-18.5 8.5-50.8-17.7-54.6zM388.6 312.3l23.7 138.4L288 385.4l-124.3 65.3 23.7-138.4-100.6-98 139-20.2 62.2-126 62.2 126 139 20.2-100.6 98z\"\n            />\n        </svg>\n    );\n}\n","import React from 'react';\n\nexport function IconPlay() {\n    return (\n        <svg viewBox=\"0 0 512 512\">\n            <path\n                fill=\"currentColor\"\n                d=\"M256 8C119 8 8 119 8 256s111 248 248 248 248-111 248-248S393 8 256 8zm115.7 272l-176 101c-15.8 8.8-35.7-2.5-35.7-21V152c0-18.4 19.8-29.8 35.7-21l176 107c16.4 9.2 16.4 32.9 0 42z\"\n            />\n        </svg>\n    );\n}\n","import React from 'react';\nimport { useComputed } from '@preact/signals';\n\nimport { useCommandBarState } from '../../state';\nimport IconWrapper from '../IconWrapper/IconWrapper';\nimport Branding from './Branding';\nimport { IconNeos, IconSpinner } from '../Icons';\n\nimport * as styles from './CommandBarFooter.module.css';\n\nconst CommandBarFooter: React.FC = () => {\n    const {\n        state: { activeCommandId, activeCommandMessage, commands, result, selectedCommandGroup, expanded },\n        Icon,\n    } = useCommandBarState();\n\n    const runningCommand = useComputed<Command>(() => {\n        if (!activeCommandId.value) return null;\n        // FIXME: This will not be correct when a command and an option in the result have the same id\n        return activeCommandId.value\n            ? commands.value[activeCommandId.value] ?? result.value.options[activeCommandId.value]\n            : null;\n    });\n\n    if (!expanded.value) return null;\n\n    return (\n        <footer className={styles.commandBarFooter}>\n            {activeCommandId.value ? (\n                <span className={styles.activity}>\n                    <IconWrapper>\n                        <IconSpinner />\n                    </IconWrapper>\n                    <em>\n                        {runningCommand.value.name}  {activeCommandMessage}\n                    </em>\n                </span>\n            ) : selectedCommandGroup.value ? (\n                <span className={styles.breadcrumb}>\n                    <Icon icon={commands.value[selectedCommandGroup.value].icon} />\n                    <small>{commands.value[selectedCommandGroup.value].name}</small>\n                </span>\n            ) : (\n                <IconWrapper>\n                    <IconNeos />\n                </IconWrapper>\n            )}\n            <Branding />\n        </footer>\n    );\n};\n\nexport default React.memo(CommandBarFooter);\n",".commandBarFooter {\n    border-top: 1px solid var(--color-border);\n    background-color: var(--footer-background);\n    padding: 0.8rem 1rem;\n    display: flex;\n    align-items: center;\n    justify-content: space-between;\n    gap: 1rem;\n    user-select: none;\n}\n\n.breadcrumb {\n    display: flex;\n    gap: 1rem;\n    --icon-size: 0.875em;\n}\n\n.activity {\n    display: flex;\n    gap: 1rem;\n    --icon-size: 0.875em;\n}\n","import React, { useCallback, useRef } from 'react';\nimport { useSignalEffect } from '@preact/signals';\n\nimport { useCommandBarState, STATUS, useIntl, useCommandExecutor } from '../../state';\nimport IconWrapper from '../IconWrapper/IconWrapper';\n\nimport * as styles from './SearchBox.module.css';\nimport { IconPlay } from '../Icons';\n\n// Timer helper for debouncing updates of command query results\nlet updateResultsTimer = null;\nconst RESULT_UPDATE_DEBOUNCE_TIME = 500;\n\nconst SearchBox: React.FC = () => {\n    const { state, actions } = useCommandBarState();\n    const { executeCommand } = useCommandExecutor();\n    const { translate } = useIntl();\n    const inputRef = useRef<HTMLInputElement>();\n\n    const handleChange = useCallback((e) => {\n        if (state.status.value === STATUS.DISPLAYING_RESULT) {\n            actions.UPDATE_COMMAND_QUERY(e.target.value);\n\n            // Execute command after a delay if it's not a manual command\n            if (!state.commands.value[state.resultCommandId.value].executeManually) {\n                if (updateResultsTimer) {\n                    clearTimeout(updateResultsTimer);\n                }\n                updateResultsTimer = setTimeout(\n                    () => executeCommand(state.resultCommandId.value),\n                    RESULT_UPDATE_DEBOUNCE_TIME\n                );\n            }\n        } else {\n            actions.UPDATE_SEARCH(e.target.value);\n        }\n    }, []);\n\n    const handleKeyPress = useCallback(\n        (e: React.KeyboardEvent<HTMLInputElement>) => {\n            // Prevent escape event from bubbling up if the input is focused and the native reset should be used\n            if (e.key === 'Escape') {\n                if (inputRef.current.value) {\n                    e.preventDefault();\n                    e.stopPropagation();\n                }\n            }\n        },\n        [inputRef.current]\n    );\n\n    // Focus input when the command bar is ready for input\n    useSignalEffect(() => {\n        if (state.status.value !== STATUS.EXECUTING_COMMAND) {\n            inputRef.current?.focus();\n        }\n    });\n\n    console.debug('SearchBox.render', state.commands.value[state.resultCommandId.value]);\n\n    return (\n        <>\n            <input\n                ref={inputRef}\n                className={styles.searchBox}\n                type=\"search\"\n                placeholder={\n                    state.status.value === STATUS.DISPLAYING_RESULT\n                        ? translate('SearchBox.commandQuery.placeholder', 'Enter the query for the command')\n                        : translate('SearchBox.placeholder', 'What do you want to do today?')\n                }\n                autoFocus\n                onChange={handleChange}\n                onKeyUp={handleKeyPress}\n                value={\n                    (state.status.value === STATUS.DISPLAYING_RESULT\n                        ? state.commandQuery\n                        : state.searchWord) as unknown as string\n                }\n                data-testid=\"SearchBox\"\n            />\n            {!state.expanded.value && (\n                <button\n                    className={styles.expandButton}\n                    onClick={actions.EXPAND}\n                    title={translate('SearchBox.expand.title', 'Expand to show all commands')}\n                >\n                    <IconWrapper>\n                        <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 320 512\">\n                            <path\n                                fill=\"currentColor\"\n                                d=\"M31.3 192h257.3c17.8 0 26.7 21.5 14.1 34.1L174.1 354.8c-7.8 7.8-20.5 7.8-28.3 0L17.2 226.1C4.6 213.5 13.5 192 31.3 192z\"\n                            />\n                        </svg>\n                    </IconWrapper>\n                </button>\n            )}\n            {state.status.value === STATUS.DISPLAYING_RESULT &&\n                state.commands.value[state.resultCommandId.value]?.executeManually && (\n                    <button\n                        className={styles.executeButton}\n                        onClick={() => executeCommand(state.resultCommandId.value)}\n                        title={translate('SearchBox.execute.title', 'Execute the command')}\n                    >\n                        <IconWrapper>\n                            <IconPlay />\n                        </IconWrapper>\n                    </button>\n                )}\n        </>\n    );\n};\n\nexport default React.memo(SearchBox);\n",".searchBox {\n    appearance: none;\n    background: none;\n    border: none;\n    color: currentColor;\n    font-size: 1.1em !important; /* Fix to prevent Neos.UI css from forcing the font size to 14px */\n    font-weight: 300;\n    outline: none;\n    padding: 0.5rem;\n    flex: 1;\n}\n\n.searchBox:disabled {\n    color: var(--color-light-text);\n    cursor: not-allowed;\n}\n\n.expandButton {\n    position: absolute;\n    padding: 0 1rem;\n    height: 100%;\n    right: 0;\n    display: block;\n    background: none;\n    border: none;\n    cursor: pointer;\n}\n\n.expandButton svg {\n    color: var(--grayLighter);\n    transition: color 0.1s ease-in-out;\n}\n\n.expandButton:hover svg {\n    color: var(--primaryBlue);\n}\n\n.executeButton {\n    position: absolute;\n    padding: 0 1rem;\n    height: 100%;\n    right: 0;\n    display: block;\n    background: none;\n    border: none;\n    cursor: pointer;\n}\n\n.executeButton {\n    color: var(--grayLighter);\n    transition: color 0.1s ease-in-out;\n}\n\n.executeButton:hover svg {\n    color: var(--primaryBlue);\n}\n","import React from 'react';\nimport { useComputed } from '@preact/signals';\n\nimport { useCommandBarState, STATUS } from '../../state';\nimport IconWrapper from '../IconWrapper/IconWrapper';\nimport SearchBox from '../SearchBox/SearchBox';\nimport { IconBack } from '../Icons';\n\nimport * as styles from './CommandBarHeader.module.css';\n\nconst CommandBarHeader: React.FC = () => {\n    const { state, actions } = useCommandBarState();\n    const isDisplayingResults = useComputed(() => state.status.value == STATUS.DISPLAYING_RESULT);\n\n    return (\n        <header className={styles.commandBarHeader}>\n            {(isDisplayingResults.value || state.selectedCommandGroup.value) && (\n                <button\n                    type=\"button\"\n                    onClick={isDisplayingResults.value ? actions.CANCEL : actions.GO_TO_PARENT_GROUP}\n                    className={styles.backButton}\n                    title=\"Back\"\n                >\n                    <IconWrapper>\n                        <IconBack />\n                    </IconWrapper>\n                </button>\n            )}\n            <SearchBox />\n        </header>\n    );\n};\n\nexport default React.memo(CommandBarHeader);\n",".commandBarHeader {\n    display: flex;\n    align-items: center;\n    gap: 1rem;\n    padding: 0.3rem 0.5rem;\n    border-bottom: 1px solid var(--color-border);\n    position: relative;\n}\n\n.backButton {\n    padding: 0.3rem;\n    background-color: var(--color-icon-bg);\n    border-radius: 50%;\n    appearance: none;\n    border: none;\n    color: white;\n    cursor: pointer;\n    transition: background-color 0.1s ease-in-out;\n    display: flex;\n}\n\n.backButton:hover {\n    background-color: var(--color-icon-bg-hover);\n}\n","import React from 'react';\nimport { ReadonlySignal, useComputed } from '@preact/signals';\n\nimport { IconWrapper } from '../index';\nimport { classnames } from '../../helpers';\nimport { IconStar } from '../Icons';\n\nimport * as styles from './CommandListItem.module.css';\nimport { useCommandBarState } from '../../state';\n\ntype CommandListItemProps = {\n    command: ProcessedCommandItem;\n    onItemSelect: (commandId: CommandId) => void;\n    highlightedId: ReadonlySignal<CommandId>;\n    onToggleFavourite?: (id: CommandId) => void;\n};\n\nfunction getCommandType({ subCommandIds, category, canHandleQueries, action }: ProcessedCommandItem): string {\n    if (subCommandIds?.length > 0) {\n        return 'category';\n    }\n\n    if (category) {\n        return category;\n    }\n\n    if (canHandleQueries) {\n        return 'query';\n    }\n\n    if (typeof action == 'string') {\n        return 'link';\n    }\n\n    return 'command';\n}\n\nfunction CommandListItem({ command, onItemSelect, highlightedId, onToggleFavourite }: CommandListItemProps) {\n    const {\n        state: { favouriteCommands },\n        Icon,\n    } = useCommandBarState();\n    const { id, name, description, icon, action } = command;\n    const commandType = getCommandType(command);\n\n    const isHighlighted = useComputed(() => highlightedId.value === id);\n    const isFavourite = useComputed(() => favouriteCommands.value.includes(id));\n\n    return (\n        <li\n            className={classnames(styles.commandListItem, isHighlighted.value && styles.highlighted)}\n            onClick={() => onItemSelect(id)}\n            data-testid=\"CommandListItem\"\n        >\n            <Icon icon={icon} />\n            <span className={styles.label}>\n                <span>{name}</span>\n                {description && (\n                    <span className={styles.description}>\n                        {typeof description == 'string' ? description : description()}\n                    </span>\n                )}\n            </span>\n            {onToggleFavourite && action && (\n                <button\n                    type=\"button\"\n                    className={classnames(styles.favouriteButton, isFavourite.value && styles.isFavourite)}\n                    onClick={(e) => {\n                        e.stopPropagation();\n                        onToggleFavourite(id);\n                    }}\n                >\n                    <IconWrapper>\n                        <IconStar />\n                    </IconWrapper>\n                </button>\n            )}\n            <small className={styles.type}>{commandType}</small>\n        </li>\n    );\n}\n\n// Use memo to prevent rerendering of all items when the parent list is updated\nexport default React.memo(CommandListItem);\n",".commandListItem {\n    cursor: pointer;\n    display: flex !important; /* Necessary due to the neos header bar styling */\n    gap: 1em;\n    padding: 0.4rem 0.6rem;\n    align-items: baseline;\n    border-radius: var(--border-radius-item);\n    transition: background-color 0.1s ease-in-out, opacity 0.1s ease-in-out;\n    background-color: transparent;\n    user-select: none;\n    --icon-size: 0.875em;\n}\n\n.commandListItem:hover {\n    background-color: var(--color-item-hover);\n}\n\n.highlighted {\n    background-color: var(--color-item-highlighted);\n}\n\n.disabled {\n    opacity: 0.5;\n    cursor: not-allowed;\n}\n\n.label {\n    display: flex;\n    flex-wrap: wrap;\n    flex: 1;\n    gap: 0.2em 1em;\n    align-items: baseline;\n}\n\n.description {\n    white-space:pre-wrap;\n    font-size: 0.9em;\n}\n\n.type {\n    max-width: 30%;\n}\n\n.favouriteButton {\n    visibility: hidden;\n    border: none;\n    background: none;\n    cursor: pointer;\n    transition: color 0.1s ease-in-out;\n    color: var(--textSubtleLight);\n    align-self: baseline;\n    padding: 0 0.3rem;\n}\n.favouriteButton:hover {\n    color: var(--primaryBlue);\n}\n\n.commandListItem:hover .favouriteButton {\n    visibility: visible;\n}\n\n.isFavourite {\n    display: block;\n    color: var(--primaryBlue);\n    visibility: visible;\n}\n","import React, { useCallback } from 'react';\nimport { useComputed, useSignalEffect } from '@preact/signals';\n\nimport CommandListItem from '../CommandListItem/CommandListItem';\nimport { useCommandBarState, useCommandExecutor, useIntl, STATUS } from '../../state';\nimport { classnames } from '../../helpers';\n\nimport * as styles from './CommandListing.module.css';\n\nconst CommandList: React.FC = () => {\n    const {\n        state: {\n            commands,\n            highlightedItem,\n            availableCommandIds,\n            status,\n            searchWord,\n            favouriteCommands,\n            recentCommands,\n        },\n        actions: { ADD_FAVOURITE, REMOVE_FAVOURITE },\n    } = useCommandBarState();\n    const { translate } = useIntl();\n    const { executeCommand } = useCommandExecutor();\n    const navRef = React.useRef<HTMLElement>(null);\n\n    useSignalEffect(() => {\n        navRef.current\n            ?.querySelector(`li:nth-child(${highlightedItem.value})`)\n            ?.scrollIntoView({ behavior: 'smooth', block: 'center' });\n    });\n\n    const handleToggleFavourite = useCallback(\n        (commandId: CommandId) => {\n            if (favouriteCommands.value.includes(commandId)) {\n                REMOVE_FAVOURITE(commandId);\n            } else {\n                ADD_FAVOURITE(commandId);\n            }\n        },\n        [favouriteCommands]\n    );\n\n    const suggestions = useComputed(() => {\n        return searchWord.value\n            ? []\n            : availableCommandIds.value.filter((commandId) => recentCommands.value.includes(commandId));\n    });\n    const availableCommands = useComputed(() => {\n        return searchWord.value\n            ? availableCommandIds.value\n            : availableCommandIds.value.filter((commandId) => !recentCommands.value.includes(commandId));\n    });\n    const highlightedCommand = useComputed<CommandId>(() => availableCommandIds.value[highlightedItem.value]);\n\n    return (\n        <nav\n            className={classnames(styles.results, status.value !== STATUS.IDLE && styles.disabled)}\n            data-testid=\"CommandList\"\n            ref={navRef}\n        >\n            {suggestions.value.length > 0 && (\n                <>\n                    <h6>{translate('CommandList.suggestions', 'Recently used')}</h6>\n                    <ul>\n                        {suggestions.value.map((commandId) => (\n                            <CommandListItem\n                                key={commandId}\n                                command={commands.value[commandId]}\n                                onItemSelect={executeCommand}\n                                highlightedId={highlightedCommand}\n                                onToggleFavourite={handleToggleFavourite}\n                            />\n                        ))}\n                    </ul>\n                </>\n            )}\n            {availableCommands.value.length > 0 && (\n                <>\n                    <h6>{translate('CommandList.heading', 'Commands')}</h6>\n                    <ul>\n                        {availableCommands.value.map((commandId) => (\n                            <CommandListItem\n                                key={commandId}\n                                command={commands.value[commandId]}\n                                onItemSelect={executeCommand}\n                                highlightedId={highlightedCommand}\n                                onToggleFavourite={handleToggleFavourite}\n                            />\n                        ))}\n                    </ul>\n                </>\n            )}\n            {availableCommandIds.value.length === 0 && (\n                <small className={styles.noResults}>\n                    {translate('CommandList.noCommandsMessage', 'No matching commands found')}\n                </small>\n            )}\n        </nav>\n    );\n};\n\nexport default React.memo(CommandList);\n",".results {\n    min-height: 0;\n    transition: opacity 0.3s ease-in;\n    overflow-y: auto;\n    max-height: 60vh;\n    height: 100%;\n}\n\n.results h6 {\n    color: var(--color-light-text);\n    margin: 0.5rem;\n    font-size: 0.9em;\n    font-weight: normal;\n    user-select: none;\n}\n\n.results ul {\n    padding: 0;\n    list-style: none;\n    display: flex;\n    flex-direction: column;\n    gap: 0.5em;\n    margin: 0;\n}\n\n.noResults {\n    padding: 0.5rem;\n}\n\n.disabled {\n    opacity: 0.5 !important;\n    pointer-events: none;\n    user-select: none;\n}\n",".commandResultsView {\n    max-width: 100%;\n    overflow: auto;\n}\n\n.message {\n    font-size: 1em;\n}\n\n.results {\n    min-height: 0;\n    transition: opacity 0.3s ease-in;\n    overflow-y: auto;\n    max-height: 60vh;\n    height: 100%;\n}\n\n.results h6 {\n    color: var(--color-light-text);\n    margin: 0.5rem;\n    font-size: 0.9em;\n    font-weight: normal;\n    user-select: none;\n}\n\n.results ul {\n    padding: 0;\n    list-style: none;\n    display: flex;\n    flex-direction: column;\n    gap: 0.5em;\n    margin: 0;\n}\n\n.noResults {\n    padding: 0.5rem;\n}\n\n.disabled {\n    opacity: 0.5 !important;\n    pointer-events: none;\n    user-select: none;\n}\n","import React from 'react';\nimport { useComputed, useSignalEffect } from '@preact/signals';\n\nimport { useCommandBarState, useCommandExecutor } from '../../state';\nimport CommandListItem from '../CommandListItem/CommandListItem';\n\nimport * as styles from './CommandResultsView.module.css';\n\nconst CommandResultsView: React.FC = () => {\n    const {\n        state: { result, highlightedOption },\n    } = useCommandBarState();\n    const { executeCommand } = useCommandExecutor();\n    const navRef = React.useRef<HTMLElement>(null);\n    const highlightedId = useComputed<CommandId>(() =>\n        result.value ? Object.values(result.value.options)[highlightedOption.value].id : null\n    );\n\n    useSignalEffect(() => {\n        const highlightedIndex = highlightedOption.value;\n        navRef.current\n            ?.querySelector(`li:nth-child(${highlightedIndex})`)\n            ?.scrollIntoView({ behavior: 'smooth', block: 'center' });\n    });\n\n    const { options, view, message } = result.value ?? {};\n\n    return (\n        <div className={styles.commandResultsView}>\n            {message && <h6 className={styles.message}>{message}</h6>}\n            {view ? <div>{view}</div> : ''}\n            {options && (\n                <nav className={[styles.results].join(' ')} ref={navRef}>\n                    <ul>\n                        {Object.keys(options).map((commandId) => (\n                            <CommandListItem\n                                key={commandId}\n                                command={options[commandId]}\n                                onItemSelect={executeCommand}\n                                highlightedId={highlightedId}\n                            />\n                        ))}\n                    </ul>\n                </nav>\n            )}\n        </div>\n    );\n};\n\nexport default CommandResultsView;\n","import React from 'react';\n\nimport * as styles from './ToggleButton.module.css';\n\ntype ToggleButtonProps = {\n    handleToggle: () => void;\n    disabled?: boolean;\n};\n\nconst ToggleButton: React.FC<ToggleButtonProps> = ({ handleToggle, disabled = false }) => {\n    return (\n        <button className={styles.toggleButton} onClick={handleToggle} disabled={disabled} title=\"Toggle command bar\">\n            <span>Search</span>\n            <span className={styles.buttonIcon}>K</span>\n        </button>\n    );\n};\n\nexport default React.memo(ToggleButton);\n",".toggleButton {\n    background-color: var(--grayDark);\n    border: 1px solid var(--grayMedium);\n    color: var(--textSubtleLight);\n    border-radius: 6px;\n    display: flex;\n    align-items: center;\n    gap: 0.5em;\n    transition: 0.1s ease-out;\n    user-select: none;\n    padding: 2px 0.3rem 2px 0.5rem;\n    cursor: pointer;\n    line-height: 1.4em;\n}\n\n.toggleButton:disabled {\n    opacity: 0.5;\n    cursor: not-allowed;\n}\n\n.toggleButton:not(:disabled):hover {\n    background-color: var(--grayLighter);\n    color: var(--textOnWhite);\n}\n\n.buttonIcon {\n    background-color: var(--gray);\n    border-radius: 3px;\n    color: var(--textOnGray);\n    font-size: 80%;\n    padding: 1px 4px;\n    transition: background-color 0.1s ease-out;\n}\n\n.toggleButton:not(:disabled):hover .buttonIcon {\n    background-color: var(--primaryBlue);\n}\n","import React, { createContext, useCallback, useContext, useMemo } from 'react';\nimport { signal, computed, ReadonlySignal } from '@preact/signals';\n\nimport { CommandBarEvent, commandBarReducer, CommandBarState } from './commandBarReducer';\nimport { flattenCommands, logger } from '../helpers';\nimport { STATUS, TRANSITION } from './commandBarMachine';\nimport { IconWrapper } from '../components';\n\ninterface CommandBarContextProps {\n    commands: HierarchicalCommandList;\n    children: JSX.Element;\n    IconComponent: React.FC<IconProps>;\n    userPreferences: UserPreferencesService;\n}\n\ninterface CommandBarContextValues {\n    state: {\n        activeCommandId: ReadonlySignal<CommandId>;\n        activeCommandMessage: ReadonlySignal<string>;\n        availableCommandIds: ReadonlySignal<CommandId[]>;\n        commandQuery: ReadonlySignal<string>;\n        commands: ReadonlySignal<FlatCommandList>;\n        expanded: ReadonlySignal<boolean>;\n        favouriteCommands: ReadonlySignal<CommandId[]>;\n        highlightedItem: ReadonlySignal<number>;\n        highlightedOption: ReadonlySignal<number>;\n        recentCommands: ReadonlySignal<CommandId[]>;\n        result: ReadonlySignal<CommandResult | null>;\n        resultCommandId: ReadonlySignal<CommandId | null>;\n        searchWord: ReadonlySignal<string>;\n        selectedCommandGroup: ReadonlySignal<CommandId>;\n        showBranding: ReadonlySignal<boolean>;\n        status: ReadonlySignal<STATUS>;\n    };\n    actions: Record<TRANSITION, (...any) => void>;\n    Icon: Renderable<IconProps>;\n}\n\nconst CommandBarContext = createContext({} as CommandBarContextValues);\nexport const useCommandBarState = (): CommandBarContextValues => useContext(CommandBarContext);\n\n/**\n * Create the app state and initialize it if it does not exist yet\n */\nfunction createAppState(initialState: CommandBarState) {\n    // Define a signal to hold the state\n    const commandBarState = signal(initialState);\n\n    // Define a function to dispatch events to the reducer and its state machine and update the state with the result\n    const dispatch = (event: CommandBarEvent) => {\n        commandBarState.value = commandBarReducer(commandBarState.value, event);\n    };\n\n    // Derive readonly selectors for partial state values\n    const activeCommandId = computed(() => commandBarState.value.activeCommandId);\n    const activeCommandMessage = computed(() => commandBarState.value.activeCommandMessage);\n    const availableCommandIds = computed(() => commandBarState.value.availableCommandIds);\n    const commandQuery = computed(() => commandBarState.value.commandQuery);\n    const commands = computed(() => commandBarState.value.commands);\n    const expanded = computed(() => commandBarState.value.expanded);\n    const favouriteCommands = computed(() => commandBarState.value.favouriteCommands);\n    const highlightedItem = computed(() => commandBarState.value.highlightedItem);\n    const highlightedOption = computed(() => commandBarState.value.highlightedOption);\n    const recentCommands = computed(() => commandBarState.value.recentCommands);\n    const result = computed(() => commandBarState.value.result);\n    const resultCommandId = computed(() => commandBarState.value.resultCommandId);\n    const searchWord = computed(() => commandBarState.value.searchWord);\n    const selectedCommandGroup = computed(() => commandBarState.value.selectedCommandGroup);\n    const showBranding = computed(() => commandBarState.value.showBranding);\n    const status = computed(() => commandBarState.value.status);\n\n    return {\n        state: {\n            activeCommandId,\n            activeCommandMessage,\n            availableCommandIds,\n            commandQuery,\n            commands,\n            expanded,\n            favouriteCommands,\n            highlightedItem,\n            highlightedOption,\n            recentCommands,\n            result,\n            resultCommandId,\n            searchWord,\n            selectedCommandGroup,\n            showBranding,\n            status,\n        },\n        dispatch,\n    };\n}\n\nexport const CommandBarStateProvider: React.FC<CommandBarContextProps> = ({\n    commands,\n    children,\n    IconComponent,\n    userPreferences,\n}) => {\n    const { state, dispatch } = useMemo(() => {\n        return createAppState({\n            activeCommandId: null,\n            activeCommandMessage: null,\n            availableCommandIds: Object.keys(commands),\n            commandQuery: '',\n            commands: flattenCommands(commands),\n            expanded: false,\n            favouriteCommands: userPreferences.favouriteCommands,\n            highlightedItem: 0,\n            highlightedOption: 0,\n            recentCommands: userPreferences.recentCommands,\n            result: null,\n            resultCommandId: null,\n            searchWord: '',\n            selectedCommandGroup: null,\n            showBranding: userPreferences.showBranding,\n            status: STATUS.COLLAPSED,\n        });\n    }, []);\n\n    // Provide all actions as shorthand functions\n    const actions: Record<TRANSITION, (...any) => void | Promise<void>> = useMemo(() => {\n        return {\n            [TRANSITION.RESET_SEARCH]: () => dispatch({ type: TRANSITION.RESET_SEARCH }),\n            [TRANSITION.HIGHLIGHT_NEXT_ITEM]: () => dispatch({ type: TRANSITION.HIGHLIGHT_NEXT_ITEM }),\n            [TRANSITION.HIGHLIGHT_PREVIOUS_ITEM]: () => dispatch({ type: TRANSITION.HIGHLIGHT_PREVIOUS_ITEM }),\n            [TRANSITION.CANCEL]: () => dispatch({ type: TRANSITION.CANCEL }),\n            [TRANSITION.SELECT_GROUP]: (commandId: CommandId) => dispatch({ type: TRANSITION.SELECT_GROUP, commandId }),\n            [TRANSITION.GO_TO_PARENT_GROUP]: () => dispatch({ type: TRANSITION.GO_TO_PARENT_GROUP }),\n            [TRANSITION.UPDATE_SEARCH]: (searchWord: string) =>\n                dispatch({ type: TRANSITION.UPDATE_SEARCH, searchWord }),\n            [TRANSITION.UPDATE_COMMAND_QUERY]: (commandQuery: string) =>\n                dispatch({ type: TRANSITION.UPDATE_COMMAND_QUERY, commandQuery }),\n            [TRANSITION.EXECUTE_COMMAND]: async (commandId: CommandId, message: string) => {\n                dispatch({\n                    type: TRANSITION.EXECUTE_COMMAND,\n                    commandId,\n                    message,\n                });\n                // Update recent commands in the user preferences when a command is executed\n                return userPreferences\n                    .addRecentCommand(commandId)\n                    .catch((e) => logger.error('Could not add recent command', e));\n            },\n            [TRANSITION.FINISH_COMMAND]: () => dispatch({ type: TRANSITION.FINISH_COMMAND }),\n            [TRANSITION.UPDATE_RESULT]: (result: CommandResult) => dispatch({ type: TRANSITION.UPDATE_RESULT, result }),\n            [TRANSITION.EXPAND]: () => dispatch({ type: TRANSITION.EXPAND }),\n            [TRANSITION.ADD_FAVOURITE]: (commandId: CommandId) => {\n                dispatch({ type: TRANSITION.ADD_FAVOURITE, commandId });\n                userPreferences\n                    .setFavouriteCommands(state.favouriteCommands.value)\n                    .catch((e) => logger.error('Could not update favourite commands', e));\n            },\n            [TRANSITION.REMOVE_FAVOURITE]: (commandId: CommandId) => {\n                dispatch({ type: TRANSITION.REMOVE_FAVOURITE, commandId });\n                userPreferences\n                    .setFavouriteCommands(state.favouriteCommands.value)\n                    .catch((e) => logger.error('Could not update favourite commands', e));\n            },\n        };\n    }, []);\n\n    const Icon: React.FC<IconProps> = useCallback(({ icon, spin = false }) => {\n        return (\n            <IconWrapper>\n                <IconComponent icon={icon} spin={spin} />\n            </IconWrapper>\n        );\n    }, []);\n\n    return <CommandBarContext.Provider value={{ state, actions, Icon }}>{children}</CommandBarContext.Provider>;\n};\n","import React, { useCallback, useEffect } from 'react';\n\nimport useFunctionRef from '../hooks/useFunctionRef';\nimport { useCommandBarState } from './CommandBarStateProvider';\nimport { assert, logger } from '../helpers';\nimport { STATUS } from './commandBarMachine';\n\ninterface CommandInputContextProps {\n    children: React.ReactElement | React.ReactElement[];\n    toggleOpen: () => void;\n    dialogRef: React.RefObject<HTMLDialogElement>;\n    open: boolean;\n}\n\ninterface CommandInputContextValues {\n    executeCommand: (commandId: CommandId) => void;\n}\n\nconst CommandInputContext = React.createContext({} as CommandInputContextValues);\nexport const useCommandExecutor = (): CommandInputContextValues => React.useContext(CommandInputContext);\n\n/**\n * Context provider for the command bar input and command execution\n */\nexport const CommandBarExecutor: React.FC<CommandInputContextProps> = ({ children, toggleOpen, dialogRef, open }) => {\n    const { state, actions } = useCommandBarState();\n\n    const handleKeyEnteredRef = useFunctionRef((e: KeyboardEvent | React.KeyboardEvent<HTMLElement>) => {\n        if (!open || e.defaultPrevented) {\n            return;\n        }\n        if (e.key === 'k' && e.metaKey && dialogRef?.current.contains(e.target as Node)) {\n            // Close command bar\n            toggleOpen();\n        } else if (e.key === 'Escape') {\n            // Cancel search, or selection, or close command bar\n            e.stopPropagation();\n            e.preventDefault();\n            if (state.selectedCommandGroup.value || state.searchWord.value || state.commandQuery.value) {\n                actions.CANCEL();\n            } else {\n                // Close command bar if cancel is noop\n                toggleOpen();\n            }\n        } else if (e.key === 'ArrowDown') {\n            // Navigate to next command\n            e.stopPropagation();\n            e.preventDefault();\n            actions.HIGHLIGHT_NEXT_ITEM();\n        } else if (e.key === 'ArrowUp') {\n            // Navigate to previous command\n            e.stopPropagation();\n            e.preventDefault();\n            actions.HIGHLIGHT_PREVIOUS_ITEM();\n        } else if (e.key === 'Enter') {\n            // Execute highlighted command\n            e.stopPropagation();\n            e.preventDefault();\n\n            let commandId = state.availableCommandIds.value[state.highlightedItem.value];\n            if (state.status.value === STATUS.DISPLAYING_RESULT && state.result.value.options) {\n                commandId = Object.keys(state.result.value.options)[state.highlightedOption.value] || commandId;\n            }\n\n            if (commandId) {\n                void executeCommand(commandId);\n            }\n        }\n    });\n\n    const executeCommand = useCallback(\n        async (commandId: CommandId) => {\n            const command = state.result.value?.options[commandId] ?? state.commands.value[commandId];\n            const { action, canHandleQueries, subCommandIds, name } = command;\n\n            // If the command is a group, select it\n            if (subCommandIds?.length > 0) {\n                actions.SELECT_GROUP(commandId);\n                return;\n            }\n\n            assert(action, `Command ${commandId} has no action`);\n\n            // If the command is a url, open it\n            if (typeof action == 'string') {\n                // We wait for the state change to be finished before opening the url\n                await actions.EXECUTE_COMMAND(commandId, 'Loading url');\n\n                // We need to check if the url is in the same domain, otherwise we need to open it in a new tab\n                // TODO: We should add another option to a link command to define its target\n                if (action.indexOf('http') === 0 && action.indexOf(document.location.origin) !== 0) {\n                    window.open(action, '_blank', 'noopener,noreferrer')?.focus();\n                } else {\n                    window.location.href = action;\n                }\n                return actions.FINISH_COMMAND();\n            }\n\n            // If the command is a function, execute it\n            actions.EXECUTE_COMMAND(commandId, 'Running command');\n            const actionResult = action(canHandleQueries ? state.commandQuery.value : undefined);\n            if ((actionResult as AsyncCommandResult).then) {\n                // Handle Promises\n                (actionResult as AsyncCommandResult)\n                    .then((result) => {\n                        if (result && !result.success) {\n                            throw new Error(`The command \"${name}\" failed`);\n                        }\n                    })\n                    .catch((error) => {\n                        // TODO: Show an error message to the user\n                        logger.error('Command error', name, error);\n                    })\n                    .finally(() => {\n                        actions.FINISH_COMMAND();\n                    });\n            } else if ((actionResult as CommandGeneratorResult).next) {\n                // Handle generators\n                const generator = actionResult as CommandGeneratorResult;\n                // TODO: Handle errors / success === false\n                for await (const result of generator) {\n                    actions.UPDATE_RESULT(result);\n                }\n                actions.FINISH_COMMAND();\n            } else {\n                logger.error('Command result is not a promise or generator', actionResult);\n            }\n\n            if (command.closeOnExecute) {\n                toggleOpen();\n            }\n        },\n        [state.searchWord, state.commands, state.result]\n    );\n\n    const executeCommandRef = useFunctionRef((commandId: CommandId) => {\n        void executeCommand(commandId);\n    });\n\n    /**\n     * Add key event handler, needs to be updated when any parameter for the key event handler changes\n     */\n    useEffect(() => {\n        if (!open) return;\n\n        // const guestFrame = document.getElementsByName('neos-content-main')[0] as HTMLIFrameElement;\n        // guestFrame.contentWindow?.addEventListener('keyup', (e) => {\n        //     log.debug('keypress in guestframe', e);\n        // });\n        // log.debug('guestFrame', guestFrame.contentWindow);\n\n        const windowKeyEventHandler = (e) => handleKeyEnteredRef.current(e);\n\n        window.addEventListener('keydown', windowKeyEventHandler);\n        return () => window.removeEventListener('keydown', windowKeyEventHandler);\n    }, [open]);\n\n    return (\n        <CommandInputContext.Provider value={{ executeCommand: executeCommandRef.current }}>\n            {children}\n        </CommandInputContext.Provider>\n    );\n};\n","import React, { createContext, ReactNode, useContext } from 'react';\n\ntype IntlProviderProps = {\n    children: ReactNode;\n    translate: TranslateFunction;\n};\n\ntype IntlProviderValues = {\n    translate: TranslateFunction;\n};\n\nexport const IntlContext = createContext({} as IntlProviderValues);\nexport const useIntl = (): IntlProviderValues => useContext(IntlContext);\n\nexport const IntlProvider = ({ translate, children }: IntlProviderProps) => {\n    return <IntlContext.Provider value={{ translate }}>{children}</IntlContext.Provider>;\n};\n",".commandBar {\n    backdrop-filter: blur(var(--dialog-blur));\n    background: var(--bar-background);\n    border-radius: var(--border-radius-bar, 5);\n    border: 1px solid var(--color-border);\n    box-shadow: 0 3px 10px rgba(0, 0, 0, 0.5);\n    color: white;\n    display: flex;\n    flex-direction: column;\n    left: 50%;\n    margin: 0;\n    max-width: var(--bar-max-width);\n    min-width: var(--bar-min-width);\n    max-height: 90vh;\n    overflow: hidden;\n    position: absolute;\n    padding: 0;\n    top: 50%;\n    translate: -50% -50%;\n    width: var(--bar-width);\n    pointer-events: all;\n    transition: width 0.1s ease-out;\n}\n\n.commandBar.hasResults {\n    width: var(--bar-width-expanded);\n}\n\n.commandBar small {\n    color: var(--color-light-text);\n    font-size: 90%;\n}\n\n.commandBar ::-webkit-scrollbar {\n    width: 4px;\n    height: 4px;\n}\n\n.commandBar ::-webkit-scrollbar-track {\n    background-color: transparent;\n}\n\n.commandBar ::-webkit-scrollbar-thumb {\n    background-color: var(--grayLight);\n}\n\n.commandBar ::-webkit-scrollbar-corner {\n    background-color: var(--grayDark);\n}\n\n.resultsWrap {\n    display: grid;\n    grid-template-rows: 0fr;\n    transform-origin: top center;\n    transition: grid-template-rows 0.2s ease-in;\n    overflow: auto;\n}\n\n.resultsWrap > * {\n    opacity: 0;\n}\n\n.resultsWrap.expanded {\n    grid-template-rows: 1fr;\n}\n\n.resultsWrap.expanded > * {\n    opacity: 1;\n    padding: 0.5rem;\n}\n.resultsWrap.split {\n    grid-template-columns: 1fr 1fr;\n}\n","import React, { CSSProperties, useCallback, useEffect, useRef } from 'react';\nimport { batch, signal, useComputed } from '@preact/signals';\n\nimport { CommandBarFooter, CommandBarHeader, CommandList, CommandResultsView } from '../index';\nimport { CommandBarExecutor, useCommandBarState } from '../../state';\nimport { clamp } from '../../helpers';\n\nimport * as styles from './CommandBarDialog.module.css';\n\ninterface CommandBarDialogProps {\n    onDrag?: (state: boolean) => void;\n    open: boolean;\n    toggleOpen: () => void;\n}\n\nconst isDragging = signal(false);\nconst dragState = signal<{\n    left: string | number;\n    top: string | number;\n    offsetLeft: number;\n    offsetTop: number;\n}>({\n    left: '50%',\n    top: '50%',\n    offsetLeft: 0,\n    offsetTop: 0,\n});\n\nconst CommandBarDialog: React.FC<CommandBarDialogProps> = ({ onDrag, open, toggleOpen }) => {\n    const {\n        state: { expanded, result },\n    } = useCommandBarState();\n    const dialogRef = useRef<HTMLDialogElement>(null);\n\n    const dialogStyle = useComputed(() => {\n        const { left, top, offsetLeft, offsetTop } = dragState.value;\n        return {\n            left: typeof left == 'string' ? left : left + offsetLeft + 'px',\n            top: typeof top == 'string' ? top : top + offsetTop + 'px',\n            visibility: isDragging.value ? 'hidden' : 'visible',\n        } as CSSProperties;\n    });\n\n    const reposition = useCallback((left: number | string, top: number | string) => {\n        if (typeof left == 'string' || typeof top == 'string') return;\n        dragState.value = {\n            ...dragState.value,\n            left: clamp(\n                left,\n                dialogRef.current.offsetWidth / 2 - dragState.value.offsetLeft,\n                window.innerWidth - (dialogRef.current.offsetWidth / 2 + dragState.value.offsetLeft)\n            ),\n            top: clamp(\n                top,\n                dialogRef.current.offsetHeight / 2 - dragState.value.offsetTop,\n                window.innerHeight - (dialogRef.current.offsetHeight / 2 + dragState.value.offsetTop)\n            ),\n        };\n    }, []);\n\n    const handleDragStart = useCallback(\n        (e) => {\n            if (e.target.tagName === 'INPUT') {\n                return;\n            }\n            e.dataTransfer.setData('text/plain', 'CommandBar');\n            e.dataTransfer.dropEffect = 'move';\n            e.dataTransfer.effectAllowed = 'move';\n            dragState.value = {\n                left: e.clientX,\n                top: e.clientY,\n                offsetLeft: dialogRef.current.offsetLeft - e.clientX,\n                offsetTop: dialogRef.current.offsetTop - e.clientY,\n            };\n            onDrag && onDrag(true);\n        },\n        [dialogRef.current]\n    );\n\n    const handleDragEnd = useCallback(\n        (e) => {\n            const { clientX, clientY } = e;\n            batch(() => {\n                isDragging.value = false;\n                reposition(clientX, clientY);\n            });\n            onDrag && onDrag(false);\n        },\n        [dialogRef.current]\n    );\n\n    const onResize = useCallback(() => reposition(dragState.value.left, dragState.value.top), []);\n\n    useEffect(() => {\n        if (!open) return;\n        window.addEventListener('resize', onResize);\n        return () => window.removeEventListener('resize', onResize);\n    }, [open]);\n\n    if (!open) {\n        return null;\n    }\n\n    return (\n        <dialog\n            ref={dialogRef}\n            className={[styles.commandBar, result.value && styles.hasResults].join(' ')}\n            open={open}\n            draggable\n            onDragStart={handleDragStart}\n            onDrag={() => (isDragging.value = true)}\n            onDragEnd={handleDragEnd}\n            style={dialogStyle.value}\n            data-testid=\"CommandBarDialog\"\n        >\n            <CommandBarExecutor toggleOpen={toggleOpen} dialogRef={dialogRef} open={open}>\n                <CommandBarHeader />\n                <div\n                    className={[\n                        styles.resultsWrap,\n                        expanded.value && styles.expanded,\n                        result.value && styles.split,\n                    ].join(' ')}\n                >\n                    <CommandList />\n                    {result.value && <CommandResultsView />}\n                </div>\n                <CommandBarFooter />\n            </CommandBarExecutor>\n        </dialog>\n    );\n};\n\nexport default CommandBarDialog;\n","import React from 'react';\n\nimport { CommandBarStateProvider, IntlProvider } from './state';\nimport CommandBarDialog from './components/CommandBarDialog/CommandBarDialog';\n\nimport './Variables.module.css';\n\ntype CommandBarProps = {\n    commands: HierarchicalCommandList;\n    open: boolean;\n    toggleOpen: () => void;\n    onDrag?: (state: boolean) => void;\n    IconComponent: React.FC<IconProps>;\n    userPreferences: UserPreferencesService;\n    translate?: TranslateFunction;\n};\n\nconst CommandBar: React.FC<CommandBarProps> = ({\n    commands,\n    open,\n    toggleOpen,\n    onDrag,\n    IconComponent,\n    userPreferences,\n    translate = (_id, fallback) => fallback,\n}) => {\n    return (\n        <IntlProvider translate={translate}>\n            <CommandBarStateProvider\n                commands={commands}\n                IconComponent={IconComponent}\n                userPreferences={userPreferences}\n            >\n                <CommandBarDialog onDrag={onDrag} open={open} toggleOpen={toggleOpen} />\n            </CommandBarStateProvider>\n        </IntlProvider>\n    );\n};\n\nexport default CommandBar;\n","export async function fetchData<T = any>(endpoint: string, params?: Record<string, any>, method = 'GET'): Promise<T> {\n    if (params && method === 'GET') {\n        endpoint = Object.keys(params).reduce((url, key) => {\n            return url + '&' + key + '=' + encodeURIComponent(params[key]);\n        }, endpoint + '?');\n    }\n    return fetch(endpoint, {\n        method,\n        credentials: 'include',\n        body: params && method === 'POST' ? JSON.stringify(params) : undefined,\n        headers: {\n            // FIXME: Include CSRF Token\n            // 'X-Flow-Csrftoken': csrfToken,\n            'Content-Type': 'application/json',\n            Accept: 'application/json',\n        },\n    }).then((response: Response) => {\n        if (response.status !== 200) {\n            throw new Error(`The request failed with code ${response.status}: \"${response.statusText}\"`);\n        }\n        if (response.headers.get('Content-Type')?.includes('application/json')) {\n            return response.json();\n        }\n        return response.text();\n    }) as Promise<T>;\n}\n","import { fetchData } from './fetch';\n\nconst ENDPOINT_GET_PREFERENCES = '/neos/shel-neos-commandbar/preferences/getpreferences';\nconst ENDPOINT_SET_FAVOURITE_COMMANDS = '/neos/shel-neos-commandbar/preferences/setfavourites';\nconst ENDPOINT_ADD_RECENT_COMMAND = '/neos/shel-neos-commandbar/preferences/addrecentcommand';\n\nasync function setPreference<T = any>(endpoint: string, data: any): Promise<T> {\n    return fetchData<T>(endpoint, data, 'POST');\n}\n\nexport async function getPreferences() {\n    return fetchData<UserPreferences>(ENDPOINT_GET_PREFERENCES);\n}\n\nexport async function setFavouriteCommands(commandIds: CommandId[]) {\n    return setPreference<CommandId[]>(ENDPOINT_SET_FAVOURITE_COMMANDS, { commandIds: commandIds });\n}\n\nexport async function addRecentCommand(commandId: CommandId) {\n    // TODO: Check if sendBeacon is a better option here to reduce the impact on the user\n    return setPreference<CommandId[]>(ENDPOINT_ADD_RECENT_COMMAND, { commandId: commandId });\n}\n","import { fetchData } from './fetch';\n\nconst ENDPOINT_COMMANDS = '/neos/service/data-source/shel-neos-commandbar-commands';\n\nexport async function getCommands() {\n    return fetchData<HierarchicalCommandList>(ENDPOINT_COMMANDS);\n}\n","import { fetchData } from './fetch';\n\nconst ENDPOINT_SEARCH_NEOS_DOCS = '/neos/service/data-source/shel-neos-commandbar-search-neos-docs';\n\nexport async function searchNeosDocs(query: string): Promise<FlatCommandList> {\n    return query ? fetchData<FlatCommandList>(ENDPOINT_SEARCH_NEOS_DOCS, { query }) : {};\n}\n","import { fetchData } from './fetch';\n\nconst ENDPOINT_SEARCH_NEOS_PACKAGES = '/neos/service/data-source/shel-neos-commandbar-search-neos-packages';\n\nexport async function searchNeosPackages(query: string): Promise<FlatCommandList> {\n    return query ? fetchData<FlatCommandList>(ENDPOINT_SEARCH_NEOS_PACKAGES, { query }) : {};\n}\n",".pluginWrap {\n    display: flex;\n    align-items: center;\n    height: 41px;\n    font-size: 14px !important;\n    line-height: 20px;\n    margin: 0 1rem;\n}\n\n.fullScreenLayer {\n    width: 100vw;\n    height: 100vh;\n    position: absolute;\n    left: 0;\n    top: 0;\n    pointer-events: none;\n    z-index: 9999;\n    display: none;\n}\n\n.open {\n    display: block;\n}\n\n@keyframes spin {\n    0% { transform: rotate(0deg); }\n    100% {  transform: rotate(359deg); }\n}\n\n.spin {\n    animation: spin 2s linear infinite;\n}\n","import React from 'preact/compat';\nimport * as styles from './ModulePlugin.module.css';\n\n/**\n * As we don't have font awesome in the shadow dom, we need to render a fallback icon for commands\n */\nconst IconComponent: React.FC<IconProps> = ({ spin = false }) => {\n    return (\n        <svg className={spin ? styles.spin : ''} xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 512 512\">\n            <path\n                fill=\"currentColor\"\n                d=\"M509.5 184.6 458.9 32.8C452.4 13.2 434.1 0 413.4 0H272v192h238.7c-.4-2.5-.4-5-1.2-7.4zM240 0H98.6c-20.7 0-39 13.2-45.5 32.8L2.5 184.6c-.8 2.4-.8 4.9-1.2 7.4H240V0zM0 224v240c0 26.5 21.5 48 48 48h416c26.5 0 48-21.5 48-48V224H0z\"\n            />\n        </svg>\n    );\n};\n\nexport default IconComponent;\n","import { Component } from 'preact';\nimport React from 'preact/compat';\n\nimport { CommandBar, logger, ToggleButton } from '@neos-commandbar/commandbar';\nimport { PreferencesApi, CommandsApi, DocumentationApi, PackagesApi } from '@neos-commandbar/neos-api';\nimport IconComponent from './IconComponent';\n\nimport * as styles from './ModulePlugin.module.css';\n\n/**\n * This is a custom element that is used to render the command bar inside a shadow dom to prevent Neos and module\n * styles from leaking into the component\n */\nexport default class App extends Component<\n    {\n        styleuri: string;\n    },\n    {\n        initialized: boolean;\n        open: boolean;\n        dragging: boolean;\n        commands: HierarchicalCommandList;\n        preferences: {\n            favouriteCommands: CommandId[];\n            recentCommands: CommandId[];\n            recentDocuments: NodeContextPath[];\n            showBranding: boolean;\n        };\n    }\n> {\n    static tagName = 'command-bar-container';\n    static options = { shadow: true };\n\n    constructor() {\n        super();\n        this.state = {\n            initialized: false,\n            open: false,\n            dragging: false,\n            commands: {\n                neosDocs: {\n                    name: 'Documentation',\n                    icon: 'book',\n                    description: 'Browse or search the Neos documentation',\n                    canHandleQueries: true,\n                    action: this.handleSearchNeosDocs.bind(this),\n                },\n                neosPackages: {\n                    name: 'Packages',\n                    icon: 'boxes',\n                    description: 'Search for Neos packages',\n                    canHandleQueries: true,\n                    action: this.handleSearchNeosPackages.bind(this),\n                },\n            },\n            preferences: { favouriteCommands: [], recentCommands: [], recentDocuments: [], showBranding: true },\n        };\n    }\n\n    /**\n     * Wrapper for the Neos backend translation api\n     */\n    private static translate(id: string, label = '', args = []): string {\n        return (window as NeosModuleWindow).NeosCMS.I18n.translate(id, label, 'Shel.Neos.CommandBar', 'Main', args);\n    }\n\n    /**\n     * Load the commands and preferences from the server and set the state to initialized\n     */\n    async componentDidMount() {\n        try {\n            const preferences = await PreferencesApi.getPreferences();\n            const commands = await CommandsApi.getCommands();\n            this.setState((prev) => ({ initialized: true, preferences, commands: { ...prev.commands, ...commands } }));\n\n            document.addEventListener('keydown', (e) => {\n                if (e.key === 'k' && e.metaKey) {\n                    e.preventDefault();\n                    this.handleToggle();\n                }\n            });\n        } catch (e) {\n            logger.error(e);\n        }\n    }\n\n    handleToggle = () => {\n        this.setState(({ open }) => ({\n            open: !open,\n        }));\n    };\n\n    handleDrag = (dragging: boolean) => {\n        this.setState({ dragging: dragging });\n    };\n\n    handleSearchNeosDocs = async function* (query: string): CommandGeneratorResult {\n        yield {\n            success: true,\n            message: `Searching for \"${query}\"`,\n        };\n        let error;\n        const options = await DocumentationApi.searchNeosDocs(query).catch((e) => {\n            logger.error('Could not search Neos docs', e);\n            error = e.message;\n        });\n        if (error || !options) {\n            yield {\n                success: false,\n                message: 'Search failed',\n                view: error,\n            };\n        } else {\n            yield {\n                success: true,\n                message: `${Object.keys(options).length} options match your query`,\n                options,\n            };\n        }\n    };\n\n    handleSearchNeosPackages = async function* (query: string): CommandGeneratorResult {\n        yield {\n            success: true,\n            message: `Searching for \"${query}\"`,\n        };\n        let error;\n        const options = await PackagesApi.searchNeosPackages(query).catch((e) => {\n            logger.error('Could not search Neos packages', e);\n            error = e.message;\n        });\n        if (error || !options) {\n            yield {\n                success: !!options,\n                message: options ? 'Finished search' : 'Search failed',\n                view: error,\n            };\n        } else {\n            yield {\n                success: true,\n                message: `${options.length} options match your query`,\n                options,\n            };\n        }\n    };\n\n    render() {\n        const { initialized, open, dragging, commands, preferences } = this.state;\n\n        return (\n            <>\n                <style>{'@import \"' + this.props.styleuri + '\";'}</style>\n                <div className={styles.pluginWrap}>\n                    <ToggleButton handleToggle={this.handleToggle} disabled={!initialized} />\n                    {initialized && (\n                        <div\n                            className={[styles.fullScreenLayer, open && styles.open].join(' ')}\n                            onDragOver={(e) => e.preventDefault()}\n                            style={dragging ? { pointerEvents: 'all' } : null}\n                        >\n                            <CommandBar\n                                commands={commands}\n                                open={open}\n                                toggleOpen={this.handleToggle}\n                                onDrag={this.handleDrag}\n                                IconComponent={IconComponent}\n                                userPreferences={{\n                                    ...preferences,\n                                    setFavouriteCommands: PreferencesApi.setFavouriteCommands,\n                                    addRecentCommand: PreferencesApi.addRecentCommand,\n                                }}\n                                translate={App.translate}\n                            />\n                        </div>\n                    )}\n                </div>\n            </>\n        );\n    }\n}\n","import register from 'preact-custom-element';\n\nimport App from './App';\n\n// @ts-ignore\nif (process.env.NODE_ENV !== 'production') {\n    // @ts-ignore\n    require('preact/debug');\n}\n\n// Register & add the debug web component, tagName and attributes are automatically read from the component\nregister(App, null, null, App.options);\n\nwindow.addEventListener('neoscms-i18n-initialized', () => {\n    // Get the top bar left container and create a custom element to render the command bar into\n    const topBarLeft = document.querySelector('.neos-top-bar-left');\n    const pluginContainer = document.createElement('command-bar-container');\n    pluginContainer.id = 'shel-neos-commandbar';\n\n    // Get the style tag of the command bar package from the HTML head to also load it inside the custom element\n    const commandBarStyleTag = document.querySelector(\n        'link[rel=\"stylesheet\"][href*=\"Shel.Neos.CommandBar\"]'\n    ) as HTMLLinkElement;\n    pluginContainer.setAttribute('styleuri', commandBarStyleTag.href);\n\n    topBarLeft.appendChild(pluginContainer);\n});\n"],"names":["slice","options","vnodeId","rerenderQueue","prevDebounce","defer","i","EMPTY_OBJ","EMPTY_ARR","IS_NON_DIMENSIONAL","assign","obj","props","removeNode","node","parentNode","removeChild","createElement","type","children","key","ref","normalizedProps","arguments","length","call","defaultProps","createVNode","original","vnode","__k","__","__b","__e","__d","__c","__h","constructor","__v","Fragment","Component","context","this","getDomSibling","childIndex","indexOf","sibling","updateParentDomPointers","child","base","enqueueRender","c","push","process","__r","debounceRendering","renderQueueLength","component","commitQueue","oldVNode","oldDom","parentDom","sort","a","b","shift","diff","ownerSVGElement","commitRoot","diffChildren","renderResult","newParentVNode","oldParentVNode","globalContext","isSvg","excessDomChildren","isHydrating","j","childVNode","newDom","firstChildDom","refs","oldChildren","oldChildrenLength","Array","isArray","reorderChildren","placeChild","getLastDom","nextSibling","unmount","applyRef","tmp","toChildArray","out","some","nextDom","sibDom","outer","appendChild","insertBefore","lastDom","setStyle","style","value","setProperty","test","dom","name","oldValue","useCapture","o","cssText","replace","toLowerCase","l","addEventListener","eventProxyCapture","eventProxy","removeEventListener","e","removeAttribute","setAttribute","event","newVNode","isNew","oldProps","oldState","snapshot","clearProcessingException","newProps","provider","componentContext","renderHook","count","newType","contextType","__E","prototype","render","doRender","sub","state","__n","_sb","__s","getDerivedStateFromProps","componentWillMount","componentDidMount","componentWillReceiveProps","shouldComponentUpdate","forEach","componentWillUpdate","componentDidUpdate","__P","getChildContext","getSnapshotBeforeUpdate","oldHtml","newHtml","nodeType","localName","document","createTextNode","createElementNS","is","data","childNodes","dangerouslySetInnerHTML","attributes","__html","innerHTML","diffProps","hydrate","checked","diffElementNodes","diffed","root","cb","current","parentVNode","skipRemove","r","componentWillUnmount","replaceNode","firstChild","cloneElement","createContext","defaultValue","contextId","Consumer","contextValue","Provider","subs","ctx","_props","old","splice","$8ce2b6e41a0de290$var$r","Object","t","n","hasOwnProperty","apply","ContextProvider","rest","connectedCallback","CustomEvent","detail","bubbles","cancelable","dispatchEvent","_vdom","h","toVdom","element","nodeName","cn","toCamelCase","slot","Slot","wrappedChildren","_vdomComponent","hasAttribute","_root","str","_","toUpperCase","attributeChangedCallback","newValue","disconnectedCallback","_this","_listener","stopPropagation","error","errorInfo","ctor","handled","getDerivedStateFromError","setState","componentDidCatch","update","callback","s","forceUpdate","Promise","then","bind","resolve","setTimeout","isStaticChildren","__source","__self","currentIndex","currentComponent","previousComponent","prevRaf","currentHook","afterPaintEffects","EMPTY","oldBeforeDiff","oldBeforeRender","oldAfterDiff","oldCommit","oldBeforeUnmount","getHookState","index","hooks","__H","__V","useState","initialState","useReducer","invokeOrReturn","reducer","init","hookState","_reducer","action","currentValue","__N","nextValue","_hasScuFromHooks","prevScu","p","stateHooks","filter","x","every","shouldUpdate","hookItem","useEffect","args","argsChanged","_pendingArgs","useLayoutEffect","useRef","initialValue","useMemo","factory","useCallback","useContext","flushAfterPaintEffects","invokeCleanup","invokeEffect","requestAnimationFrame","afterNextFrame","hasErrored","HAS_RAF","raf","done","clearTimeout","timeout","cancelAnimationFrame","hook","comp","cleanup","oldArgs","newArgs","arg","f","shallowDiffers","y","PureComponent","isPureReactComponent","oldDiffHook","__f","REACT_FORWARD_SYMBOL","Symbol","for","mapFn","fn","map","Children","only","normalized","toArray","oldCatchError","oldUnmount","detachedClone","detachedParent","effect","removeOriginal","originalParent","Suspense","__u","_suspenders","suspended","__a","SuspenseList","_next","_map","__R","promise","suspendingVNode","suspendingComponent","resolved","onResolved","onSuspensionComplete","suspendedVNode","pop","wasHydrating","detachedComponent","__O","fallback","list","delete","revealOrder","size","Portal","container","_container","_temp","before","delegated","get","unsuspend","wrappedUnsuspend","Map","reverse","set","REACT_ELEMENT_TYPE","CAMEL_PROPS","IS_DOM","onChangeInputType","isReactComponent","defineProperty","configurable","v","writable","oldEventHook","empty","isPropagationStopped","cancelBubble","isDefaultPrevented","defaultPrevented","persist","nativeEvent","classNameDescriptor","class","oldVNodeHook","nonCustomElement","multiple","selected","className","enumerable","$$typeof","oldDiffed","isValidElement","startTransition","useId","__m","mask","useInsertionEffect","useTransition","useDeferredValue","val","useSyncExternalStore","subscribe","getSnapshot","_useState","_instance","_getSnapshot","useImperativeHandle","createHandle","concat","useDebugValue","formatter","version","parent","textContent","preactRender","preactHydrate","unmountComponentAtNode","createPortal","el","containerInfo","createFactory","preactCloneElement","createRef","findDOMNode","memo","comparer","nextProps","updateRef","Memoed","displayName","forwardRef","Forwarded","clone","flushSync","unstable_batchedUpdates","StrictMode","lazy","loader","prom","Lazy","exports","default","__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED","ReactCurrentDispatcher","readContext","$1b06254f22bdd07e$export$2e2bcd8739ae039","fnRef","$d6bdfea1a1e13052$export$b8f5890fc79d6aca","cycleDetected","Error","endBatch","batchDepth","hasError","batchedEffect","_effect","batchIteration","next","_nextBatchedEffect","_flags","needsToRecompute","_callback","err","batch","evalContext","globalVersion","addDependency","signal","_node","_target","_version","_source","_prevSource","_sources","_nextSource","_prevTarget","_nextTarget","_rollbackNode","_subscribe","Signal","_value","_targets","target","_refresh","prepareSources","rollbackNode","cleanupSources","head","prev","_unsubscribe","Computed","compute","_compute","_globalVersion","computed","cleanupEffect","_cleanup","prevContext","disposeEffect","endEffect","Effect","_dispose","hookName","hookFn","setCurrentUpdater","updater","finishUpdate","_start","Text","_ref","currentSignal","useSignal","_updateFlags","_updater","peek","createPropUpdater","prop","propSignal","setAsProperty","changeSignal","_update","newSignal","useComputed","$compute","useSignalEffect","$edcc64b978b003b2$export$2e2bcd8739ae039","commands","parentId","keys","reduce","commandList","commandId","icon","description","subCommands","canHandleQueries","closeOnExecute","category","executeManually","absoluteCommandId","subCommandIds","subCommandId","id","flag","valueOf","toString","_notify","OUTDATED","finish","defineProperties","signalProps","__np","renderedProps","_updaters","updaters","_signal","_updater2","HAS_PENDING_UPDATE","_i","$ea926074f08a4cd5$var$PREFIX","$ea926074f08a4cd5$export$2e2bcd8739ae039","ok","message","console","log","warn","debug","$197034fc7f52566b$export$2e2bcd8739ae039","min","max","Math","$44ee2883445aae00$var$cmp","Intl","Collator","compare","$44ee2883445aae00$var$inf","Infinity","$44ee2883445aae00$var$NEGS_RE","$44ee2883445aae00$var$OPTS","interSplit","intraSplit","intraBound","interLft","interRgt","interChars","interIns","intraChars","intraIns","intraContr","intraMode","intraSlice","intraSub","intraTrn","intraDel","intraFilt","term","match","info","haystack","needle","idx","chars","terms","interLft2","interLft1","start","ia","ib","$44ee2883445aae00$var$lazyRepeat","limit","$44ee2883445aae00$var$mode2Tpl","$44ee2883445aae00$export$2e2bcd8739ae039","opts","_intraSplit","_interSplit","_intraBound","intraRules","_intraSlice","_intraIns","_intraSub","_intraTrn","_intraDel","plen","withIntraSplit","RegExp","trimRe","contrsRe","split","m","prepQuery","capt","interOR","parts","reTpl","contrs","fill","pi","lftIdx","rgtIdx","lftChar","rgtChar","numChars","variants","intraInsTpl","join","preTpl","sufTpl","interCharsTpl","idxs","query","withIntraBound","interBound","queryR","partsLen","len","field","interRgt2","interRgt1","ranges","mayDiscard","ii","mhstr","idxAcc","disc","lft2","lft1","rgt2","rgt1","inter","intra","refine","k","group","termLen","groupLen","fullMatch","idxOf","refineMatch","lftCharIdx","rgtCharIdx","isPre","isSuf","junk","junkIdx","m2","found","re","exec","charIdx","from","to","refLen","ri","lastRi","idxInNext","matchLen","offset","prepend","search","outOfOrder","infoThresh","preFiltered","negsRe","needles","matches","negs","trim","terms2","ti","$44ee2883445aae00$var$permute","perm","matchedIdxs","Set","ni","preFiltered2","has","matched","add","retInfo","retOrder","acc","_info","order","_search","$44ee2883445aae00$var$latinize","accents","A","E","I","O","U","u","C","N","S","accentsMap","accentsTpl","accentsRe","replacer","strings","arr","result","$44ee2883445aae00$var$_mark","part","$44ee2883445aae00$var$_append","latinize","permute","highlight","mark","accum","append","substring","fr","$f5323048963c3f50$var$uf","$f5323048963c3f50$export$2e2bcd8739ae039","selectedCommandGroup","searchWord","favourites","recentCommands","availableCommands","values","command","includes","favouriteCommands","aIsRecent","bIsRecent","aIsFavourite","bIsFavourite","localeCompare","$f5323048963c3f50$var$sortCommands","availableCommandNames","matchingIds","$187cc7d792701051$export$2e2bcd8739ae039","condition","$4de6e96dcc9c5973$export$2e2bcd8739ae039","Boolean","$4327cc3088ca9bcc$export$e50006273435e7d4","STATUS","$4327cc3088ca9bcc$export$f2127cf693ff3edc","TRANSITION","$4327cc3088ca9bcc$export$9523889e0a5da4ba","ACTION","COLLAPSED","$4327cc3088ca9bcc$export$ea56d40cd27c3480","collapsed","on","UPDATE_SEARCH","IDLE","actions","EXPAND","SET_SEARCH_WORD","REFRESH_COMMANDS","HIGHLIGHT_NEXT_ITEM","idle","RESET_HIGHLIGHT","HIGHLIGHT_NEXT_COMMAND","HIGHLIGHT_PREVIOUS_ITEM","HIGHLIGHT_PREVIOUS_COMMAND","CANCEL","RESET_SEARCH_OR_LEAVE_GROUP","EXECUTE_COMMAND","EXECUTING_COMMAND","ADD_RECENTLY_USED","SET_ACTIVE_COMMAND","GO_TO_PARENT_GROUP","LEAVE_GROUP","SELECT_GROUP","RESET_SEARCH","SET_GROUP","ADD_FAVOURITE","REMOVE_FAVOURITE","executingCommand","UPDATE_RESULT","DISPLAYING_RESULT","FINISH_COMMAND","UNSET_ACTIVE_COMMAND","displayingResult","UPDATE_COMMAND_QUERY","SET_COMMAND_QUERY","RESET_OPTION_HIGHLIGHT","HIGHLIGHT_NEXT_OPTION","HIGHLIGHT_PREVIOUS_OPTION","UNSET_RESULT","$4327cc3088ca9bcc$export$66bb15e2994e6a26","actionCallback","nextStateNode","status","nextState","$3bdb7eb1bca92625$var$runAction","commandQuery","highlightedItem","availableCommandIds","highlightedOption","expanded","activeCommandId","activeCommandMessage","success","view","resultCommandId","unshift","$3bdb7eb1bca92625$export$9e3f7bba62d514d7","$5105b2e4b958e09e$export$2e2bcd8739ae039","$a35043596f133777$export$2e2bcd8739ae039","$1f5e800e7e637d25$export$2e2bcd8739ae039","showBranding","$c92c3390bd0178a7$export$53e25b3b0bb3833c","translate","$16998066b180f6ef$export$5aebe9a147f4d146","href","title","rel","xmlns","width","height","viewBox","gradientUnits","x1","y1","x2","y2","stopColor","d","transform","$a9d8acb8ffa4eae4$export$9f1a005b19e034c8","$04a90802deaf6510$export$1440ab2404307ace","$aa76484c3e1ffc63$export$bd96d8defd13d2a9","$5dcc0a8fea92bfd7$export$bfe304c803da70de","$d8d8e5123e381d27$export$4b2505a64d1f53bd","$2aa32f662e9078f8$export$2e2bcd8739ae039","Icon","runningCommand","$2f74d86b545ec476$export$e3d20747ab930783","$87c672bf702cb1a4$var$updateResultsTimer","$87c672bf702cb1a4$export$2e2bcd8739ae039","executeCommand","$1ea80d3c959bcb5f$export$40a06c0c5b3ff9aa","inputRef","handleChange","$d6bdfea1a1e13052$export$35808ee640e87ca7","handleKeyPress","preventDefault","$2f74d86b545ec476$export$ed99038c4a6f842a","focus","placeholder","autoFocus","onChange","onKeyUp","onClick","$937f9e11bd53a43f$export$2e2bcd8739ae039","isDisplayingResults","$b1dbce9614761190$var$CommandListItem","onItemSelect","highlightedId","onToggleFavourite","commandType","$b1dbce9614761190$var$getCommandType","isHighlighted","isFavourite","$b1dbce9614761190$export$2e2bcd8739ae039","$8564955bb37d770f$var$CommandList","navRef","querySelector","scrollIntoView","behavior","block","handleToggleFavourite","suggestions","highlightedCommand","$359a9f77a9e1896c$export$5be82eb8d376fece","$8564955bb37d770f$export$2e2bcd8739ae039","$798ea27d8acd4548$export$2e2bcd8739ae039","highlightedIndex","$2a001a2eafdc7fa7$export$2e2bcd8739ae039","handleToggle","disabled","$c92c3390bd0178a7$var$CommandBarContext","$450fc775b2f7950e$export$fd42f52fd3ae1109","$d6bdfea1a1e13052$export$fae74005e78b1a27","$c92c3390bd0178a7$export$8ffac7c47764ac1d","IconComponent","userPreferences","dispatch","$d6bdfea1a1e13052$export$1538c33de8887b59","commandBarState","$0ed7988ef29ac9ba$export$e2ef10f86a8d60e8","$0ed7988ef29ac9ba$export$2983e091f1a1e8e2","$c92c3390bd0178a7$var$createAppState","async","addRecentCommand","catch","setFavouriteCommands","spin","$1ea80d3c959bcb5f$var$CommandInputContext","$1ea80d3c959bcb5f$export$c67beff7acfe625","toggleOpen","dialogRef","open","handleKeyEnteredRef","metaKey","contains","location","origin","window","actionResult","undefined","finally","generator","executeCommandRef","$d6bdfea1a1e13052$export$6d9c69b0de29b591","windowKeyEventHandler","$16998066b180f6ef$export$9073ae457aa4b186","$16998066b180f6ef$export$480518999dfc4151","$35240156ab719318$export$83a6871283058b59","$35240156ab719318$export$ee49ed7f2751836b","$e407a5ca25d14613$var$isDragging","$e407a5ca25d14613$var$dragState","left","top","offsetLeft","offsetTop","$e407a5ca25d14613$export$2e2bcd8739ae039","onDrag","dialogStyle","visibility","reposition","offsetWidth","innerWidth","offsetHeight","innerHeight","handleDragStart","tagName","dataTransfer","setData","dropEffect","effectAllowed","clientX","clientY","handleDragEnd","$0ed7988ef29ac9ba$export$712ea50be43a7858","onResize","draggable","onDragStart","onDragEnd","$0a82af2c679f148f$export$2e2bcd8739ae039","_id","$6b9d0563b231bc8e$export$8134c072fddab6a5","endpoint","params","method","url","encodeURIComponent","fetch","credentials","body","JSON","stringify","headers","Accept","response","statusText","json","text","$524075ade96a5510$var$setPreference","$524075ade96a5510$export$1de6a888ae076ff8","$524075ade96a5510$export$df984a4ad36be2aa","commandIds","$524075ade96a5510$export$910806e2dc4fd6f4","$0c75c51914774a7a$export$7a6092e2ae7e1845","$a0088a67651538b4$export$e747fdfe1889f28d","$670219d361a1461f$export$6d49ca4503d8331","$0be707f3177806f3$export$27b1eaa2ed0d5a99","$0be707f3177806f3$export$c82e186cf428d56d","$83fa79e240d3a2bb$export$2e2bcd8739ae039","$563cc721c6a67067$export$34b9dba7ce09269b","$694b266eb137553d$export$2e2bcd8739ae039","$450fc775b2f7950e$export$16fa2f45be04daa8","static","shadow","super","initialized","dragging","neosDocs","handleSearchNeosDocs","neosPackages","handleSearchNeosPackages","preferences","recentDocuments","label","NeosCMS","I18n","$524075ade96a5510$exports","getPreferences","$0c75c51914774a7a$exports","getCommands","handleDrag","$a0088a67651538b4$exports","searchNeosDocs","$670219d361a1461f$exports","searchNeosPackages","$450fc775b2f7950e$export$ffb0004e005737fa","styleuri","onDragOver","pointerEvents","propNames","PreactElement","inst","Reflect","construct","HTMLElement","attachShadow","mode","create","observedAttributes","propTypes","customElements","define","topBarLeft","pluginContainer","commandBarStyleTag"],"version":3,"file":"Module.js.map"}